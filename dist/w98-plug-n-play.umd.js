var G1=Object.defineProperty;var W1=(Ze,xt,gr)=>xt in Ze?G1(Ze,xt,{enumerable:!0,configurable:!0,writable:!0,value:gr}):Ze[xt]=gr;var qe=(Ze,xt,gr)=>(W1(Ze,typeof xt!="symbol"?xt+"":xt,gr),gr);(function(Ze,xt){typeof exports=="object"&&typeof module<"u"?xt(exports,require("@astrox/sdk-web"),require("@astrox/sdk-webview"),require("@fort-major/msq-client")):typeof define=="function"&&define.amd?define(["exports","@astrox/sdk-web","@astrox/sdk-webview","@fort-major/msq-client"],xt):(Ze=typeof globalThis<"u"?globalThis:Ze||self,xt(Ze.W98PlugNPlay={},Ze.astrox.sdkWeb,Ze.astrox.sdkWebview,Ze.fortMajor.msqClient))})(this,function(Ze,xt,gr,Ou){var Tu,Su;"use strict";var ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function qs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Mu(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Lt={},Kr={};Kr.byteLength=ku,Kr.toByteArray=Du,Kr.fromByteArray=qu;for(var Tt=[],yt=[],Uu=typeof Uint8Array<"u"?Uint8Array:Array,U0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nr=0,Iu=U0.length;Nr<Iu;++Nr)Tt[Nr]=U0[Nr],yt[U0.charCodeAt(Nr)]=Nr;yt["-".charCodeAt(0)]=62,yt["_".charCodeAt(0)]=63;function Hs(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function ku(t){var e=Hs(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Pu(t,e,r){return(e+r)*3/4-r}function Du(t){var e,r=Hs(t),n=r[0],i=r[1],s=new Uu(Pu(t,n,i)),c=0,a=i>0?n-4:n,h;for(h=0;h<a;h+=4)e=yt[t.charCodeAt(h)]<<18|yt[t.charCodeAt(h+1)]<<12|yt[t.charCodeAt(h+2)]<<6|yt[t.charCodeAt(h+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=e&255;return i===2&&(e=yt[t.charCodeAt(h)]<<2|yt[t.charCodeAt(h+1)]>>4,s[c++]=e&255),i===1&&(e=yt[t.charCodeAt(h)]<<10|yt[t.charCodeAt(h+1)]<<4|yt[t.charCodeAt(h+2)]>>2,s[c++]=e>>8&255,s[c++]=e&255),s}function zu(t){return Tt[t>>18&63]+Tt[t>>12&63]+Tt[t>>6&63]+Tt[t&63]}function ju(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(zu(n));return i.join("")}function qu(t){for(var e,r=t.length,n=r%3,i=[],s=16383,c=0,a=r-n;c<a;c+=s)i.push(ju(t,c,c+s>a?a:c+s));return n===1?(e=t[r-1],i.push(Tt[e>>2]+Tt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Tt[e>>10]+Tt[e>>4&63]+Tt[e<<2&63]+"=")),i.join("")}var Yr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Yr.read=function(t,e,r,n,i){var s,c,a=i*8-n-1,h=(1<<a)-1,l=h>>1,p=-7,w=r?i-1:0,_=r?-1:1,m=t[e+w];for(w+=_,s=m&(1<<-p)-1,m>>=-p,p+=a;p>0;s=s*256+t[e+w],w+=_,p-=8);for(c=s&(1<<-p)-1,s>>=-p,p+=n;p>0;c=c*256+t[e+w],w+=_,p-=8);if(s===0)s=1-l;else{if(s===h)return c?NaN:(m?-1:1)*(1/0);c=c+Math.pow(2,n),s=s-l}return(m?-1:1)*c*Math.pow(2,s-n)},Yr.write=function(t,e,r,n,i,s){var c,a,h,l=s*8-i-1,p=(1<<l)-1,w=p>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:s-1,d=n?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,c=p):(c=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-c))<1&&(c--,h*=2),c+w>=1?e+=_/h:e+=_*Math.pow(2,1-w),e*h>=2&&(c++,h/=2),c+w>=p?(a=0,c=p):c+w>=1?(a=(e*h-1)*Math.pow(2,i),c=c+w):(a=e*Math.pow(2,w-1)*Math.pow(2,i),c=0));i>=8;t[r+m]=a&255,m+=d,a/=256,i-=8);for(c=c<<i|a,l+=i;l>0;t[r+m]=c&255,m+=d,c/=256,l-=8);t[r+m-d]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Kr,r=Yr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=B,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const b=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(b,f),b.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function c(b){if(b>i)throw new RangeError('The value "'+b+'" is invalid for option "size"');const f=new Uint8Array(b);return Object.setPrototypeOf(f,a.prototype),f}function a(b,f,x){if(typeof b=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(b)}return h(b,f,x)}a.poolSize=8192;function h(b,f,x){if(typeof b=="string")return _(b,f);if(ArrayBuffer.isView(b))return d(b);if(b==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(J(b,ArrayBuffer)||b&&J(b.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(b,SharedArrayBuffer)||b&&J(b.buffer,SharedArrayBuffer)))return E(b,f,x);if(typeof b=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=b.valueOf&&b.valueOf();if(I!=null&&I!==b)return a.from(I,f,x);const Y=A(b);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof b[Symbol.toPrimitive]=="function")return a.from(b[Symbol.toPrimitive]("string"),f,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b)}a.from=function(b,f,x){return h(b,f,x)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(b){if(typeof b!="number")throw new TypeError('"size" argument must be of type number');if(b<0)throw new RangeError('The value "'+b+'" is invalid for option "size"')}function p(b,f,x){return l(b),b<=0?c(b):f!==void 0?typeof x=="string"?c(b).fill(f,x):c(b).fill(f):c(b)}a.alloc=function(b,f,x){return p(b,f,x)};function w(b){return l(b),c(b<0?0:U(b)|0)}a.allocUnsafe=function(b){return w(b)},a.allocUnsafeSlow=function(b){return w(b)};function _(b,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const x=C(b,f)|0;let I=c(x);const Y=I.write(b,f);return Y!==x&&(I=I.slice(0,Y)),I}function m(b){const f=b.length<0?0:U(b.length)|0,x=c(f);for(let I=0;I<f;I+=1)x[I]=b[I]&255;return x}function d(b){if(J(b,Uint8Array)){const f=new Uint8Array(b);return E(f.buffer,f.byteOffset,f.byteLength)}return m(b)}function E(b,f,x){if(f<0||b.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<f+(x||0))throw new RangeError('"length" is outside of buffer bounds');let I;return f===void 0&&x===void 0?I=new Uint8Array(b):x===void 0?I=new Uint8Array(b,f):I=new Uint8Array(b,f,x),Object.setPrototypeOf(I,a.prototype),I}function A(b){if(a.isBuffer(b)){const f=U(b.length)|0,x=c(f);return x.length===0||b.copy(x,0,0,f),x}if(b.length!==void 0)return typeof b.length!="number"||ue(b.length)?c(0):m(b);if(b.type==="Buffer"&&Array.isArray(b.data))return m(b.data)}function U(b){if(b>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return b|0}function B(b){return+b!=b&&(b=0),a.alloc(+b)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,x){if(J(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),J(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(f)||!a.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===x)return 0;let I=f.length,Y=x.length;for(let te=0,ne=Math.min(I,Y);te<ne;++te)if(f[te]!==x[te]){I=f[te],Y=x[te];break}return I<Y?-1:Y<I?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,x){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);let I;if(x===void 0)for(x=0,I=0;I<f.length;++I)x+=f[I].length;const Y=a.allocUnsafe(x);let te=0;for(I=0;I<f.length;++I){let ne=f[I];if(J(ne,Uint8Array))te+ne.length>Y.length?(a.isBuffer(ne)||(ne=a.from(ne)),ne.copy(Y,te)):Uint8Array.prototype.set.call(Y,ne,te);else if(a.isBuffer(ne))ne.copy(Y,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=ne.length}return Y};function C(b,f){if(a.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||J(b,ArrayBuffer))return b.byteLength;if(typeof b!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);const x=b.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&x===0)return 0;let Y=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return o(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return N(b).length;default:if(Y)return I?-1:o(b).length;f=(""+f).toLowerCase(),Y=!0}}a.byteLength=C;function O(b,f,x){let I=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,f>>>=0,x<=f))return"";for(b||(b="utf8");;)switch(b){case"hex":return oe(this,f,x);case"utf8":case"utf-8":return q(this,f,x);case"ascii":return re(this,f,x);case"latin1":case"binary":return se(this,f,x);case"base64":return F(this,f,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,f,x);default:if(I)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),I=!0}}a.prototype._isBuffer=!0;function S(b,f,x){const I=b[f];b[f]=b[x],b[x]=I}a.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<f;x+=2)S(this,x,x+1);return this},a.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<f;x+=4)S(this,x,x+3),S(this,x+1,x+2);return this},a.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<f;x+=8)S(this,x,x+7),S(this,x+1,x+6),S(this,x+2,x+5),S(this,x+3,x+4);return this},a.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?q(this,0,f):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){let f="";const x=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(f+=" ... "),"<Buffer "+f+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(f,x,I,Y,te){if(J(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(x===void 0&&(x=0),I===void 0&&(I=f?f.length:0),Y===void 0&&(Y=0),te===void 0&&(te=this.length),x<0||I>f.length||Y<0||te>this.length)throw new RangeError("out of range index");if(Y>=te&&x>=I)return 0;if(Y>=te)return-1;if(x>=I)return 1;if(x>>>=0,I>>>=0,Y>>>=0,te>>>=0,this===f)return 0;let ne=te-Y,be=I-x;const Ce=Math.min(ne,be),_e=this.slice(Y,te),me=f.slice(x,I);for(let Oe=0;Oe<Ce;++Oe)if(_e[Oe]!==me[Oe]){ne=_e[Oe],be=me[Oe];break}return ne<be?-1:be<ne?1:0};function k(b,f,x,I,Y){if(b.length===0)return-1;if(typeof x=="string"?(I=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,ue(x)&&(x=Y?0:b.length-1),x<0&&(x=b.length+x),x>=b.length){if(Y)return-1;x=b.length-1}else if(x<0)if(Y)x=0;else return-1;if(typeof f=="string"&&(f=a.from(f,I)),a.isBuffer(f))return f.length===0?-1:P(b,f,x,I,Y);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(b,f,x):Uint8Array.prototype.lastIndexOf.call(b,f,x):P(b,[f],x,I,Y);throw new TypeError("val must be string, number or Buffer")}function P(b,f,x,I,Y){let te=1,ne=b.length,be=f.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(b.length<2||f.length<2)return-1;te=2,ne/=2,be/=2,x/=2}function Ce(me,Oe){return te===1?me[Oe]:me.readUInt16BE(Oe*te)}let _e;if(Y){let me=-1;for(_e=x;_e<ne;_e++)if(Ce(b,_e)===Ce(f,me===-1?0:_e-me)){if(me===-1&&(me=_e),_e-me+1===be)return me*te}else me!==-1&&(_e-=_e-me),me=-1}else for(x+be>ne&&(x=ne-be),_e=x;_e>=0;_e--){let me=!0;for(let Oe=0;Oe<be;Oe++)if(Ce(b,_e+Oe)!==Ce(f,Oe)){me=!1;break}if(me)return _e}return-1}a.prototype.includes=function(f,x,I){return this.indexOf(f,x,I)!==-1},a.prototype.indexOf=function(f,x,I){return k(this,f,x,I,!0)},a.prototype.lastIndexOf=function(f,x,I){return k(this,f,x,I,!1)};function $(b,f,x,I){x=Number(x)||0;const Y=b.length-x;I?(I=Number(I),I>Y&&(I=Y)):I=Y;const te=f.length;I>te/2&&(I=te/2);let ne;for(ne=0;ne<I;++ne){const be=parseInt(f.substr(ne*2,2),16);if(ue(be))return ne;b[x+ne]=be}return ne}function ie(b,f,x,I){return z(o(f,b.length-x),b,x,I)}function M(b,f,x,I){return z(u(f),b,x,I)}function W(b,f,x,I){return z(N(f),b,x,I)}function ee(b,f,x,I){return z(v(f,b.length-x),b,x,I)}a.prototype.write=function(f,x,I,Y){if(x===void 0)Y="utf8",I=this.length,x=0;else if(I===void 0&&typeof x=="string")Y=x,I=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(I)?(I=I>>>0,Y===void 0&&(Y="utf8")):(Y=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const te=this.length-x;if((I===void 0||I>te)&&(I=te),f.length>0&&(I<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y||(Y="utf8");let ne=!1;for(;;)switch(Y){case"hex":return $(this,f,x,I);case"utf8":case"utf-8":return ie(this,f,x,I);case"ascii":case"latin1":case"binary":return M(this,f,x,I);case"base64":return W(this,f,x,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,f,x,I);default:if(ne)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),ne=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(b,f,x){return f===0&&x===b.length?e.fromByteArray(b):e.fromByteArray(b.slice(f,x))}function q(b,f,x){x=Math.min(b.length,x);const I=[];let Y=f;for(;Y<x;){const te=b[Y];let ne=null,be=te>239?4:te>223?3:te>191?2:1;if(Y+be<=x){let Ce,_e,me,Oe;switch(be){case 1:te<128&&(ne=te);break;case 2:Ce=b[Y+1],(Ce&192)===128&&(Oe=(te&31)<<6|Ce&63,Oe>127&&(ne=Oe));break;case 3:Ce=b[Y+1],_e=b[Y+2],(Ce&192)===128&&(_e&192)===128&&(Oe=(te&15)<<12|(Ce&63)<<6|_e&63,Oe>2047&&(Oe<55296||Oe>57343)&&(ne=Oe));break;case 4:Ce=b[Y+1],_e=b[Y+2],me=b[Y+3],(Ce&192)===128&&(_e&192)===128&&(me&192)===128&&(Oe=(te&15)<<18|(Ce&63)<<12|(_e&63)<<6|me&63,Oe>65535&&Oe<1114112&&(ne=Oe))}}ne===null?(ne=65533,be=1):ne>65535&&(ne-=65536,I.push(ne>>>10&1023|55296),ne=56320|ne&1023),I.push(ne),Y+=be}return V(I)}const j=4096;function V(b){const f=b.length;if(f<=j)return String.fromCharCode.apply(String,b);let x="",I=0;for(;I<f;)x+=String.fromCharCode.apply(String,b.slice(I,I+=j));return x}function re(b,f,x){let I="";x=Math.min(b.length,x);for(let Y=f;Y<x;++Y)I+=String.fromCharCode(b[Y]&127);return I}function se(b,f,x){let I="";x=Math.min(b.length,x);for(let Y=f;Y<x;++Y)I+=String.fromCharCode(b[Y]);return I}function oe(b,f,x){const I=b.length;(!f||f<0)&&(f=0),(!x||x<0||x>I)&&(x=I);let Y="";for(let te=f;te<x;++te)Y+=he[b[te]];return Y}function de(b,f,x){const I=b.slice(f,x);let Y="";for(let te=0;te<I.length-1;te+=2)Y+=String.fromCharCode(I[te]+I[te+1]*256);return Y}a.prototype.slice=function(f,x){const I=this.length;f=~~f,x=x===void 0?I:~~x,f<0?(f+=I,f<0&&(f=0)):f>I&&(f=I),x<0?(x+=I,x<0&&(x=0)):x>I&&(x=I),x<f&&(x=f);const Y=this.subarray(f,x);return Object.setPrototypeOf(Y,a.prototype),Y};function Z(b,f,x){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+f>x)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,x,I){f=f>>>0,x=x>>>0,I||Z(f,x,this.length);let Y=this[f],te=1,ne=0;for(;++ne<x&&(te*=256);)Y+=this[f+ne]*te;return Y},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,x,I){f=f>>>0,x=x>>>0,I||Z(f,x,this.length);let Y=this[f+--x],te=1;for(;x>0&&(te*=256);)Y+=this[f+--x]*te;return Y},a.prototype.readUint8=a.prototype.readUInt8=function(f,x){return f=f>>>0,x||Z(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,x){return f=f>>>0,x||Z(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,x){return f=f>>>0,x||Z(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,x){return f=f>>>0,x||Z(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,x){return f=f>>>0,x||Z(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readBigUInt64LE=xe(function(f){f=f>>>0,K(f,"offset");const x=this[f],I=this[f+7];(x===void 0||I===void 0)&&G(f,this.length-8);const Y=x+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,te=this[++f]+this[++f]*2**8+this[++f]*2**16+I*2**24;return BigInt(Y)+(BigInt(te)<<BigInt(32))}),a.prototype.readBigUInt64BE=xe(function(f){f=f>>>0,K(f,"offset");const x=this[f],I=this[f+7];(x===void 0||I===void 0)&&G(f,this.length-8);const Y=x*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],te=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+I;return(BigInt(Y)<<BigInt(32))+BigInt(te)}),a.prototype.readIntLE=function(f,x,I){f=f>>>0,x=x>>>0,I||Z(f,x,this.length);let Y=this[f],te=1,ne=0;for(;++ne<x&&(te*=256);)Y+=this[f+ne]*te;return te*=128,Y>=te&&(Y-=Math.pow(2,8*x)),Y},a.prototype.readIntBE=function(f,x,I){f=f>>>0,x=x>>>0,I||Z(f,x,this.length);let Y=x,te=1,ne=this[f+--Y];for(;Y>0&&(te*=256);)ne+=this[f+--Y]*te;return te*=128,ne>=te&&(ne-=Math.pow(2,8*x)),ne},a.prototype.readInt8=function(f,x){return f=f>>>0,x||Z(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,x){f=f>>>0,x||Z(f,2,this.length);const I=this[f]|this[f+1]<<8;return I&32768?I|4294901760:I},a.prototype.readInt16BE=function(f,x){f=f>>>0,x||Z(f,2,this.length);const I=this[f+1]|this[f]<<8;return I&32768?I|4294901760:I},a.prototype.readInt32LE=function(f,x){return f=f>>>0,x||Z(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,x){return f=f>>>0,x||Z(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readBigInt64LE=xe(function(f){f=f>>>0,K(f,"offset");const x=this[f],I=this[f+7];(x===void 0||I===void 0)&&G(f,this.length-8);const Y=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(I<<24);return(BigInt(Y)<<BigInt(32))+BigInt(x+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),a.prototype.readBigInt64BE=xe(function(f){f=f>>>0,K(f,"offset");const x=this[f],I=this[f+7];(x===void 0||I===void 0)&&G(f,this.length-8);const Y=(x<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(Y)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+I)}),a.prototype.readFloatLE=function(f,x){return f=f>>>0,x||Z(f,4,this.length),r.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,x){return f=f>>>0,x||Z(f,4,this.length),r.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,x){return f=f>>>0,x||Z(f,8,this.length),r.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,x){return f=f>>>0,x||Z(f,8,this.length),r.read(this,f,!1,52,8)};function H(b,f,x,I,Y,te){if(!a.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>Y||f<te)throw new RangeError('"value" argument is out of bounds');if(x+I>b.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,x,I,Y){if(f=+f,x=x>>>0,I=I>>>0,!Y){const be=Math.pow(2,8*I)-1;H(this,f,x,I,be,0)}let te=1,ne=0;for(this[x]=f&255;++ne<I&&(te*=256);)this[x+ne]=f/te&255;return x+I},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,x,I,Y){if(f=+f,x=x>>>0,I=I>>>0,!Y){const be=Math.pow(2,8*I)-1;H(this,f,x,I,be,0)}let te=I-1,ne=1;for(this[x+te]=f&255;--te>=0&&(ne*=256);)this[x+te]=f/ne&255;return x+I},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,1,255,0),this[x]=f&255,x+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,2,65535,0),this[x]=f&255,this[x+1]=f>>>8,x+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,2,65535,0),this[x]=f>>>8,this[x+1]=f&255,x+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,4,4294967295,0),this[x+3]=f>>>24,this[x+2]=f>>>16,this[x+1]=f>>>8,this[x]=f&255,x+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,4,4294967295,0),this[x]=f>>>24,this[x+1]=f>>>16,this[x+2]=f>>>8,this[x+3]=f&255,x+4};function X(b,f,x,I,Y){D(f,I,Y,b,x,7);let te=Number(f&BigInt(4294967295));b[x++]=te,te=te>>8,b[x++]=te,te=te>>8,b[x++]=te,te=te>>8,b[x++]=te;let ne=Number(f>>BigInt(32)&BigInt(4294967295));return b[x++]=ne,ne=ne>>8,b[x++]=ne,ne=ne>>8,b[x++]=ne,ne=ne>>8,b[x++]=ne,x}function y(b,f,x,I,Y){D(f,I,Y,b,x,7);let te=Number(f&BigInt(4294967295));b[x+7]=te,te=te>>8,b[x+6]=te,te=te>>8,b[x+5]=te,te=te>>8,b[x+4]=te;let ne=Number(f>>BigInt(32)&BigInt(4294967295));return b[x+3]=ne,ne=ne>>8,b[x+2]=ne,ne=ne>>8,b[x+1]=ne,ne=ne>>8,b[x]=ne,x+8}a.prototype.writeBigUInt64LE=xe(function(f,x=0){return X(this,f,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=xe(function(f,x=0){return y(this,f,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(f,x,I,Y){if(f=+f,x=x>>>0,!Y){const Ce=Math.pow(2,8*I-1);H(this,f,x,I,Ce-1,-Ce)}let te=0,ne=1,be=0;for(this[x]=f&255;++te<I&&(ne*=256);)f<0&&be===0&&this[x+te-1]!==0&&(be=1),this[x+te]=(f/ne>>0)-be&255;return x+I},a.prototype.writeIntBE=function(f,x,I,Y){if(f=+f,x=x>>>0,!Y){const Ce=Math.pow(2,8*I-1);H(this,f,x,I,Ce-1,-Ce)}let te=I-1,ne=1,be=0;for(this[x+te]=f&255;--te>=0&&(ne*=256);)f<0&&be===0&&this[x+te+1]!==0&&(be=1),this[x+te]=(f/ne>>0)-be&255;return x+I},a.prototype.writeInt8=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,1,127,-128),f<0&&(f=255+f+1),this[x]=f&255,x+1},a.prototype.writeInt16LE=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,2,32767,-32768),this[x]=f&255,this[x+1]=f>>>8,x+2},a.prototype.writeInt16BE=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,2,32767,-32768),this[x]=f>>>8,this[x+1]=f&255,x+2},a.prototype.writeInt32LE=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,4,2147483647,-2147483648),this[x]=f&255,this[x+1]=f>>>8,this[x+2]=f>>>16,this[x+3]=f>>>24,x+4},a.prototype.writeInt32BE=function(f,x,I){return f=+f,x=x>>>0,I||H(this,f,x,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[x]=f>>>24,this[x+1]=f>>>16,this[x+2]=f>>>8,this[x+3]=f&255,x+4},a.prototype.writeBigInt64LE=xe(function(f,x=0){return X(this,f,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=xe(function(f,x=0){return y(this,f,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ce(b,f,x,I,Y,te){if(x+I>b.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function fe(b,f,x,I,Y){return f=+f,x=x>>>0,Y||ce(b,f,x,4),r.write(b,f,x,I,23,4),x+4}a.prototype.writeFloatLE=function(f,x,I){return fe(this,f,x,!0,I)},a.prototype.writeFloatBE=function(f,x,I){return fe(this,f,x,!1,I)};function pe(b,f,x,I,Y){return f=+f,x=x>>>0,Y||ce(b,f,x,8),r.write(b,f,x,I,52,8),x+8}a.prototype.writeDoubleLE=function(f,x,I){return pe(this,f,x,!0,I)},a.prototype.writeDoubleBE=function(f,x,I){return pe(this,f,x,!1,I)},a.prototype.copy=function(f,x,I,Y){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(I||(I=0),!Y&&Y!==0&&(Y=this.length),x>=f.length&&(x=f.length),x||(x=0),Y>0&&Y<I&&(Y=I),Y===I||f.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length),f.length-x<Y-I&&(Y=f.length-x+I);const te=Y-I;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,I,Y):Uint8Array.prototype.set.call(f,this.subarray(I,Y),x),te},a.prototype.fill=function(f,x,I,Y){if(typeof f=="string"){if(typeof x=="string"?(Y=x,x=0,I=this.length):typeof I=="string"&&(Y=I,I=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!a.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);if(f.length===1){const ne=f.charCodeAt(0);(Y==="utf8"&&ne<128||Y==="latin1")&&(f=ne)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(x<0||this.length<x||this.length<I)throw new RangeError("Out of range index");if(I<=x)return this;x=x>>>0,I=I===void 0?this.length:I>>>0,f||(f=0);let te;if(typeof f=="number")for(te=x;te<I;++te)this[te]=f;else{const ne=a.isBuffer(f)?f:a.from(f,Y),be=ne.length;if(be===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(te=0;te<I-x;++te)this[te+x]=ne[te%be]}return this};const ae={};function le(b,f,x){ae[b]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${b}]`,this.stack,delete this.name}get code(){return b}set code(Y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Y,writable:!0})}toString(){return`${this.name} [${b}]: ${this.message}`}}}le("ERR_BUFFER_OUT_OF_BOUNDS",function(b){return b?`${b} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),le("ERR_INVALID_ARG_TYPE",function(b,f){return`The "${b}" argument must be of type number. Received type ${typeof f}`},TypeError),le("ERR_OUT_OF_RANGE",function(b,f,x){let I=`The value of "${b}" is out of range.`,Y=x;return Number.isInteger(x)&&Math.abs(x)>2**32?Y=T(String(x)):typeof x=="bigint"&&(Y=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(Y=T(Y)),Y+="n"),I+=` It must be ${f}. Received ${Y}`,I},RangeError);function T(b){let f="",x=b.length;const I=b[0]==="-"?1:0;for(;x>=I+4;x-=3)f=`_${b.slice(x-3,x)}${f}`;return`${b.slice(0,x)}${f}`}function R(b,f,x){K(f,"offset"),(b[f]===void 0||b[f+x]===void 0)&&G(f,b.length-(x+1))}function D(b,f,x,I,Y,te){if(b>x||b<f){const ne=typeof f=="bigint"?"n":"";let be;throw te>3?f===0||f===BigInt(0)?be=`>= 0${ne} and < 2${ne} ** ${(te+1)*8}${ne}`:be=`>= -(2${ne} ** ${(te+1)*8-1}${ne}) and < 2 ** ${(te+1)*8-1}${ne}`:be=`>= ${f}${ne} and <= ${x}${ne}`,new ae.ERR_OUT_OF_RANGE("value",be,b)}R(I,Y,te)}function K(b,f){if(typeof b!="number")throw new ae.ERR_INVALID_ARG_TYPE(f,"number",b)}function G(b,f,x){throw Math.floor(b)!==b?(K(b,x),new ae.ERR_OUT_OF_RANGE(x||"offset","an integer",b)):f<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE(x||"offset",`>= ${x?1:0} and <= ${f}`,b)}const Q=/[^+/0-9A-Za-z-_]/g;function g(b){if(b=b.split("=")[0],b=b.trim().replace(Q,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function o(b,f){f=f||1/0;let x;const I=b.length;let Y=null;const te=[];for(let ne=0;ne<I;++ne){if(x=b.charCodeAt(ne),x>55295&&x<57344){if(!Y){if(x>56319){(f-=3)>-1&&te.push(239,191,189);continue}else if(ne+1===I){(f-=3)>-1&&te.push(239,191,189);continue}Y=x;continue}if(x<56320){(f-=3)>-1&&te.push(239,191,189),Y=x;continue}x=(Y-55296<<10|x-56320)+65536}else Y&&(f-=3)>-1&&te.push(239,191,189);if(Y=null,x<128){if((f-=1)<0)break;te.push(x)}else if(x<2048){if((f-=2)<0)break;te.push(x>>6|192,x&63|128)}else if(x<65536){if((f-=3)<0)break;te.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((f-=4)<0)break;te.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return te}function u(b){const f=[];for(let x=0;x<b.length;++x)f.push(b.charCodeAt(x)&255);return f}function v(b,f){let x,I,Y;const te=[];for(let ne=0;ne<b.length&&!((f-=2)<0);++ne)x=b.charCodeAt(ne),I=x>>8,Y=x%256,te.push(Y),te.push(I);return te}function N(b){return e.toByteArray(g(b))}function z(b,f,x,I){let Y;for(Y=0;Y<I&&!(Y+x>=f.length||Y>=b.length);++Y)f[Y+x]=b[Y];return Y}function J(b,f){return b instanceof f||b!=null&&b.constructor!=null&&b.constructor.name!=null&&b.constructor.name===f.name}function ue(b){return b!==b}const he=function(){const b="0123456789abcdef",f=new Array(256);for(let x=0;x<16;++x){const I=x*16;for(let Y=0;Y<16;++Y)f[I+Y]=b[x]+b[Y]}return f}();function xe(b){return typeof BigInt>"u"?we:b}function we(){throw new Error("BigInt not supported")}})(Lt);var I0;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(I0||(I0={}));const gn="abcdefghijklmnopqrstuvwxyz234567",Rr=Object.create(null);for(let t=0;t<gn.length;t++)Rr[gn[t]]=t;Rr[0]=Rr.o,Rr[1]=Rr.i;function Hu(t){let e=0,r=0,n="";function i(s){return e<0?r|=s>>-e:r=s<<e&248,e>3?(e-=8,1):(e<4&&(n+=gn[r>>3],e+=5),0)}for(let s=0;s<t.length;)s+=i(t[s]);return n+(e<0?gn[r>>3]:"")}function $u(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let i=0;function s(c){let a=Rr[c.toLowerCase()];if(a===void 0)throw new Error(`Invalid character: ${JSON.stringify(c)}`);a<<=3,r|=a>>>e,e+=5,e>=8&&(n[i++]=r,e-=8,e>0?r=a<<5-e&255:r=0)}for(const c of t)s(c);return n.slice(0,i)}const Vu=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Gu(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const s=(e[n]^r)&255;r=Vu[s]^r>>>8}return(r^-1)>>>0}function Wu(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function $s(t,...e){if(!Wu(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Vs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Lu(t,e){$s(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const k0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const P0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),St=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Ku(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Gs(t){return typeof t=="string"&&(t=Ku(t)),$s(t),t}class Yu{clone(){return this._cloneInto()}}function D0(t){const e=n=>t().update(Gs(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Ws(t=32){if(k0&&typeof k0.getRandomValues=="function")return k0.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Zu(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),c=Number(r>>i&s),a=Number(r&s),h=n?4:0,l=n?0:4;t.setUint32(e+h,c,n),t.setUint32(e+l,a,n)}const Qu=(t,e,r)=>t&e^~t&r,Xu=(t,e,r)=>t&e^t&r^e&r;class Ls extends Yu{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=P0(this.buffer)}update(e){Vs(this);const{view:r,buffer:n,blockLen:i}=this;e=Gs(e);const s=e.length;for(let c=0;c<s;){const a=Math.min(i-this.pos,s-c);if(a===i){const h=P0(e);for(;i<=s-c;c+=i)this.process(h,c);continue}n.set(e.subarray(c,c+a),this.pos),this.pos+=a,c+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Vs(this),Lu(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:c}=this;r[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(n,0),c=0);for(let w=c;w<i;w++)r[w]=0;Zu(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=P0(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=h/4,p=this.get();if(l>p.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<l;w++)a.setUint32(4*w,p[w],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:c,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=c,i%r&&e.buffer.set(n),e}}const Ju=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yt=new Uint32Array(64);class Ks extends Ls{constructor(){super(64,32,8,!1),this.A=Kt[0]|0,this.B=Kt[1]|0,this.C=Kt[2]|0,this.D=Kt[3]|0,this.E=Kt[4]|0,this.F=Kt[5]|0,this.G=Kt[6]|0,this.H=Kt[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:c,G:a,H:h}=this;return[e,r,n,i,s,c,a,h]}set(e,r,n,i,s,c,a,h){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=c|0,this.G=a|0,this.H=h|0}process(e,r){for(let w=0;w<16;w++,r+=4)Yt[w]=e.getUint32(r,!1);for(let w=16;w<64;w++){const _=Yt[w-15],m=Yt[w-2],d=St(_,7)^St(_,18)^_>>>3,E=St(m,17)^St(m,19)^m>>>10;Yt[w]=E+Yt[w-7]+d+Yt[w-16]|0}let{A:n,B:i,C:s,D:c,E:a,F:h,G:l,H:p}=this;for(let w=0;w<64;w++){const _=St(a,6)^St(a,11)^St(a,25),m=p+_+Qu(a,h,l)+Ju[w]+Yt[w]|0,E=(St(n,2)^St(n,13)^St(n,22))+Xu(n,i,s)|0;p=l,l=h,h=a,a=c+m|0,c=s,s=i,i=n,n=m+E|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,c=c+this.D|0,a=a+this.E|0,h=h+this.F|0,l=l+this.G|0,p=p+this.H|0,this.set(n,i,s,c,a,h,l,p)}roundClean(){Yt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class ef extends Ks{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const z0=D0(()=>new Ks),tf=D0(()=>new ef);function rf(t){return tf.create().update(new Uint8Array(t)).digest()}const wn="__principal__",nf=2,Ys=4,sf="aaaaa-aa",af=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},of=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let Ee=class M0{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([Ys]))}static managementCanister(){return this.fromHex(sf)}static selfAuthenticating(e){const r=rf(e);return new this(new Uint8Array([...r,nf]))}static from(e){if(typeof e=="string")return M0.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new M0(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new M0(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(af(e))}static fromText(e){let r=e;if(e.includes(wn)){const c=JSON.parse(e);wn in c&&(r=c[wn])}const n=r.toLowerCase().replace(/-/g,"");let i=$u(n);i=i.slice(4,i.length);const s=new this(i);if(s.toText()!==r)throw new Error(`Principal "${s.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return s}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===Ys}toUint8Array(){return this._arr}toHex(){return of(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,Gu(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),s=new Uint8Array([...n,...i]),a=Hu(s).match(/.{1,5}/g);if(!a)throw new Error;return a.join("-")}toString(){return this.toText()}toJSON(){return{[wn]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};class ut extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,ut.prototype)}}function Me(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class Or{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=q0(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return q0(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function j0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function q0(t){return t instanceof Uint8Array?j0(t):t instanceof ArrayBuffer?t:Array.isArray(t)?j0(new Uint8Array(t)):"buffer"in t?q0(t.buffer):j0(new Uint8Array(t))}function cf(t){const r=new TextEncoder().encode(t);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Nt(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return cf(t)}function Zs(){throw new Error("unexpected end of buffer")}function wr(t,e){return t.byteLength<e&&Zs(),t.read(e)}function br(t){const e=t.readUint8();return e===void 0&&Zs(),e}function ze(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new Or(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Qe(t){let e=BigInt(1),r=BigInt(0),n;do n=br(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function Le(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new Or(new ArrayBuffer(r),0);for(;;){const s=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&s&64||!e&&t===BigInt(0)&&!(s&64)){n.write(new Uint8Array([s]));break}else n.write(new Uint8Array([s|128]))}function i(s){const c=s%BigInt(128);return Number(e?BigInt(128)-c-BigInt(1):c)}return n.buffer}function Zt(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return Qe(t);break}const n=new Uint8Array(wr(t,r+1));let i=BigInt(0);for(let s=n.byteLength-1;s>=0;s--)i=i*BigInt(128)+BigInt(128-(n[s]&127)-1);return-i-BigInt(1)}function uf(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return Qs(t,e)}function Qs(t,e){t=BigInt(t);const r=new Or(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),s=BigInt(0),c=Number(t%i);for(r.write(new Uint8Array([c]));++n<e;)t<0&&s===BigInt(0)&&c!==0&&(s=BigInt(1)),c=Number((t/i-s)%BigInt(256)),r.write(new Uint8Array([c])),i*=BigInt(256);return r.buffer}function Xs(t,e){let r=BigInt(br(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const s=BigInt(br(t));r=r+n*s}return r}function ff(t,e){let r=Xs(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function H0(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const bn="DIDL",Js=400;function Zr(t,e,r){return t.map((n,i)=>r(n,e[i]))}class lf{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const e=ze(this._typs.length),r=Me(...this._typs);return Me(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return Le(this._idx.get(e)||0)}}class df{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const i=r.map((s,c)=>[`_${c}_`,s]);return this.visitRecord(e,i,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}class mn{display(){return this.name}valueToString(e){return He(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class gt extends mn{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class Qt extends mn{checkType(e){if(e instanceof Jt){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class ea extends gt{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return Le(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class ta extends mn{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof Jt?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class ra extends gt{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return Le(-2)}decodeValue(e,r){switch(this.checkType(r),br(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class na extends gt{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Le(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class _n extends gt{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Le(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class ia extends gt{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=ze(r.byteLength);return Me(n,r)}encodeType(){return Le(-15)}decodeValue(e,r){this.checkType(r);const n=Qe(e),i=wr(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class sa extends gt{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){return Le(e)}encodeType(){return Le(-4)}decodeValue(e,r){return this.checkType(r),Zt(e)}get name(){return"int"}valueToString(e){return e.toString()}}class aa extends gt{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){return ze(e)}encodeType(){return Le(-3)}decodeValue(e,r){return this.checkType(r),Qe(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class $0 extends gt{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return Le(e)}decodeValue(e,r){this.checkType(r);const n=wr(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class mr extends gt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=H0(this._bits-1)*BigInt(-1),n=H0(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=r&&e<=n;else if(Number.isInteger(e)){const s=BigInt(e);i=s>=r&&s<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){return Qs(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return Le(-9-e)}decodeValue(e,r){this.checkType(r);const n=ff(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class Xt extends gt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=H0(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){return uf(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return Le(-5-e)}decodeValue(e,r){this.checkType(r);const n=Xs(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class En extends Qt{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof Xt&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof Xt?this._type._bits:this._type instanceof mr?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(s){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${s.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){const r=ze(e.length);if(this._blobOptimization)return Me(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return Me(r,new Uint8Array(e.buffer));const n=new Or(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const i of e){const s=this._type.encodeValue(i);n.write(new Uint8Array(s))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=Le(-19),n=this._type.encodeType(e);e.add(this,Me(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof En))throw new Error("Not a vector type");const i=Number(Qe(e));if(this._type instanceof Xt){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof mr){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const s=[];for(let c=0;c<i;c++)s.push(this._type.decodeValue(e,n._type));return s}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class Mr extends Qt{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${He(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Me(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=Le(-18),n=this._type.encodeType(e);e.add(this,Me(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Mr))throw new Error("Not an option type");switch(br(e)){case 0:return[];case 1:return[this._type.decodeValue(e,n._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class Qr extends Qt{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Nt(r[0])-Nt(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){const r=this._fields.map(([i])=>e[i]),n=Zr(this._fields,r,([,i],s)=>i.encodeValue(s));return Me(...n)}_buildTypeTableImpl(e){this._fields.forEach(([s,c])=>c.buildTypeTable(e));const r=Le(-20),n=ze(this._fields.length),i=this._fields.map(([s,c])=>Me(ze(Nt(s)),c.encodeType(e)));e.add(this,Me(r,n,Me(...i)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Qr))throw new Error("Not a record type");const i={};let s=0,c=0;for(;c<n._fields.length;){const[a,h]=n._fields[c];if(s>=this._fields.length){h.decodeValue(e,h),c++;continue}const[l,p]=this._fields[s],w=Nt(this._fields[s][0]),_=Nt(a);if(w===_)i[l]=p.decodeValue(e,h),s++,c++;else if(_>w)if(p instanceof Mr||p instanceof _n)i[l]=[],s++;else throw new Error("Cannot find required field "+l);else h.decodeValue(e,h),c++}for(const[a,h]of this._fields.slice(s))if(h instanceof Mr||h instanceof _n)i[a]=[];else throw new Error("Cannot find required field "+a);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([i])=>e[i]);return`record {${Zr(this._fields,r,([i,s],c)=>i+"="+s.valueToString(c)).join("; ")}}`}}class vn extends Qr{constructor(e){const r={};e.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){const r=Zr(this._components,e,(n,i)=>n.encodeValue(i));return Me(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof vn))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[s,c]of n._components.entries())s>=this._components.length?c.decodeValue(e,c):i.push(this._components[s].decodeValue(e,c));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${Zr(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class Bn extends Qt{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Nt(r[0])-Nt(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(e.hasOwnProperty(n)){const s=ze(r),c=i.encodeValue(e[n]);return Me(s,c)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,s])=>{s.buildTypeTable(e)});const r=Le(-21),n=ze(this._fields.length),i=this._fields.map(([s,c])=>Me(ze(Nt(s)),c.encodeType(e)));e.add(this,Me(r,n,...i))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Bn))throw new Error("Not a variant type");const i=Number(Qe(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[s,c]=n._fields[i];for(const[a,h]of this._fields)if(Nt(s)===Nt(a)){const l=h.decodeValue(e,c);return{[a]:l}}throw new Error("Cannot find field hash "+s)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const i=n.valueToString(e[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+e)}}class Jt extends Qt{constructor(){super(...arguments),this._id=Jt._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}Jt._counter=0;function V0(t){if(br(t)!==1)throw new Error("Cannot decode principal");const r=Number(Qe(t));return Ee.fromUint8Array(new Uint8Array(wr(t,r)))}class oa extends gt{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=ze(r.byteLength);return Me(new Uint8Array([1]),n,r)}encodeType(){return Le(-24)}decodeValue(e,r){return this.checkType(r),V0(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class G0 extends Qt{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),i=ze(n.byteLength),s=Me(new Uint8Array([1]),i,n),c=new TextEncoder().encode(r),a=ze(c.byteLength);return Me(new Uint8Array([1]),s,a,c)}_buildTypeTableImpl(e){this.argTypes.forEach(l=>l.buildTypeTable(e)),this.retTypes.forEach(l=>l.buildTypeTable(e));const r=Le(-22),n=ze(this.argTypes.length),i=Me(...this.argTypes.map(l=>l.encodeType(e))),s=ze(this.retTypes.length),c=Me(...this.retTypes.map(l=>l.encodeType(e))),a=ze(this.annotations.length),h=Me(...this.annotations.map(l=>this.encodeAnnotation(l)));e.add(this,Me(r,n,i,s,c,a,h))}decodeValue(e){if(br(e)!==1)throw new Error("Cannot decode function reference");const n=V0(e),i=Number(Qe(e)),s=wr(e,i),a=new TextDecoder("utf8",{fatal:!0}).decode(s);return[n,a]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e}) → (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class ca extends Qt{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${He(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=ze(r.length);return Me(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([s,c])=>c.buildTypeTable(e));const r=Le(-23),n=ze(this._fields.length),i=this._fields.map(([s,c])=>{const a=new TextEncoder().encode(s),h=ze(a.length);return Me(h,a,c.encodeType(e))});e.add(this,Me(r,n,...i))}decodeValue(e){return V0(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function He(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>Js?e.substring(0,Js-3)+"...":e}function W0(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new lf;t.forEach(h=>h.buildTypeTable(r));const n=new TextEncoder().encode(bn),i=r.encode(),s=ze(e.length),c=Me(...t.map(h=>h.encodeType(r))),a=Me(...Zr(t,e,(h,l)=>{try{h.covariant(l)}catch(p){throw new Error(p.message+`

`)}return h.encodeValue(l)}));return Me(n,i,s,c,a)}function ua(t,e){const r=new Or(e);if(e.byteLength<bn.length)throw new Error("Message length smaller than magic number");const n=wr(r,bn.length),i=new TextDecoder().decode(n);if(i!==bn)throw new Error("Wrong magic number: "+JSON.stringify(i));function s(m){const d=[],E=Number(Qe(m));for(let B=0;B<E;B++){const C=Number(Zt(m));switch(C){case-18:case-19:{const O=Number(Zt(m));d.push([C,O]);break}case-20:case-21:{const O=[];let S=Number(Qe(m)),k;for(;S--;){const P=Number(Qe(m));if(P>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof k=="number"&&k>=P)throw new Error("field id collision or not sorted");k=P;const $=Number(Zt(m));O.push([P,$])}d.push([C,O]);break}case-22:{const O=[];let S=Number(Qe(m));for(;S--;)O.push(Number(Zt(m)));const k=[];let P=Number(Qe(m));for(;P--;)k.push(Number(Zt(m)));const $=[];let ie=Number(Qe(m));for(;ie--;)switch(Number(Qe(m))){case 1:{$.push("query");break}case 2:{$.push("oneway");break}case 3:{$.push("composite_query");break}default:throw new Error("unknown annotation")}d.push([C,[O,k,$]]);break}case-23:{let O=Number(Qe(m));const S=[];for(;O--;){const k=Number(Qe(m)),P=new TextDecoder().decode(wr(m,k)),$=Zt(m);S.push([P,$])}d.push([C,S]);break}default:throw new Error("Illegal op_code: "+C)}}const A=[],U=Number(Qe(m));for(let B=0;B<U;B++)A.push(Number(Zt(m)));return[d,A]}const[c,a]=s(r);if(a.length<t.length)throw new Error("Wrong number of return values");const h=c.map(m=>Ma());function l(m){if(m<-24)throw new Error("future value not supported");if(m<0)switch(m){case-1:return ha;case-2:return da;case-3:return ya;case-4:return pa;case-5:return va;case-6:return Ba;case-7:return Aa;case-8:return Ca;case-9:return ba;case-10:return ma;case-11:return _a;case-12:return Ea;case-13:return ga;case-14:return wa;case-15:return xa;case-16:return la;case-17:return fa;case-24:return Fa;default:throw new Error("Illegal op_code: "+m)}if(m>=c.length)throw new Error("type index out of range");return h[m]}function p(m){switch(m[0]){case-19:{const d=l(m[1]);return Sa(d)}case-18:{const d=l(m[1]);return Na(d)}case-20:{const d={};for(const[U,B]of m[1]){const C=`_${U}_`;d[C]=l(B)}const E=Ra(d),A=E.tryAsTuple();return Array.isArray(A)?Ta(...A):E}case-21:{const d={};for(const[E,A]of m[1]){const U=`_${E}_`;d[U]=l(A)}return Oa(d)}case-22:{const[d,E,A]=m[1];return Ua(d.map(U=>l(U)),E.map(U=>l(U)),A)}case-23:{const d={},E=m[1];for(const[A,U]of E){let B=l(U);if(B instanceof Jt&&(B=B.getType()),!(B instanceof G0))throw new Error("Illegal service definition: services can only contain functions");d[A]=B}return Ia(d)}default:throw new Error("Illegal op_code: "+m[0])}}c.forEach((m,d)=>{if(m[0]===-22){const E=p(m);h[d].fill(E)}}),c.forEach((m,d)=>{if(m[0]!==-22){const E=p(m);h[d].fill(E)}});const w=a.map(m=>l(m)),_=t.map((m,d)=>m.decodeValue(r,w[d]));for(let m=t.length;m<w.length;m++)w[m].decodeValue(r,w[m]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return _}const fa=new ea,la=new _n,hf=new ta,da=new ra,ha=new na,xa=new ia,pa=new sa,ya=new aa,ga=new $0(32),wa=new $0(64),ba=new mr(8),ma=new mr(16),_a=new mr(32),Ea=new mr(64),va=new Xt(8),Ba=new Xt(16),Aa=new Xt(32),Ca=new Xt(64),Fa=new oa;function Ta(...t){return new vn(t)}function Sa(t){return new En(t)}function Na(t){return new Mr(t)}function Ra(t){return new Qr(t)}function Oa(t){return new Bn(t)}function Ma(){return new Jt}function Ua(t,e,r=[]){return new G0(t,e,r)}function Ia(t){return new ca(t)}const xf=Object.freeze(Object.defineProperty({__proto__:null,Bool:da,BoolClass:ra,ConstructType:Qt,Empty:fa,EmptyClass:ea,FixedIntClass:mr,FixedNatClass:Xt,Float32:ga,Float64:wa,FloatClass:$0,Func:Ua,FuncClass:G0,Int:pa,Int16:ma,Int32:_a,Int64:Ea,Int8:ba,IntClass:sa,Nat:ya,Nat16:Ba,Nat32:Aa,Nat64:Ca,Nat8:va,NatClass:aa,Null:ha,NullClass:na,Opt:Na,OptClass:Mr,PrimitiveType:gt,Principal:Fa,PrincipalClass:oa,Rec:Ma,RecClass:Jt,Record:Ra,RecordClass:Qr,Reserved:la,ReservedClass:_n,Service:Ia,ServiceClass:ca,Text:xa,TextClass:ia,Tuple:Ta,TupleClass:vn,Type:mn,Unknown:hf,UnknownClass:ta,Variant:Oa,VariantClass:Bn,Vec:Sa,VecClass:En,Visitor:df,decode:ua,encode:W0},Symbol.toStringTag,{value:"Module"}));var ka={},Xr={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=Kr,r=Yr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=B,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var g=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(g,o),g.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function c(g){if(g>i)throw new RangeError('The value "'+g+'" is invalid for option "size"');var o=new Uint8Array(g);return Object.setPrototypeOf(o,a.prototype),o}function a(g,o,u){if(typeof g=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(g)}return h(g,o,u)}a.poolSize=8192;function h(g,o,u){if(typeof g=="string")return _(g,o);if(ArrayBuffer.isView(g))return d(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(K(g,ArrayBuffer)||g&&K(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(K(g,SharedArrayBuffer)||g&&K(g.buffer,SharedArrayBuffer)))return E(g,o,u);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var v=g.valueOf&&g.valueOf();if(v!=null&&v!==g)return a.from(v,o,u);var N=A(g);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return a.from(g[Symbol.toPrimitive]("string"),o,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}a.from=function(g,o,u){return h(g,o,u)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function p(g,o,u){return l(g),g<=0?c(g):o!==void 0?typeof u=="string"?c(g).fill(o,u):c(g).fill(o):c(g)}a.alloc=function(g,o,u){return p(g,o,u)};function w(g){return l(g),c(g<0?0:U(g)|0)}a.allocUnsafe=function(g){return w(g)},a.allocUnsafeSlow=function(g){return w(g)};function _(g,o){if((typeof o!="string"||o==="")&&(o="utf8"),!a.isEncoding(o))throw new TypeError("Unknown encoding: "+o);var u=C(g,o)|0,v=c(u),N=v.write(g,o);return N!==u&&(v=v.slice(0,N)),v}function m(g){for(var o=g.length<0?0:U(g.length)|0,u=c(o),v=0;v<o;v+=1)u[v]=g[v]&255;return u}function d(g){if(K(g,Uint8Array)){var o=new Uint8Array(g);return E(o.buffer,o.byteOffset,o.byteLength)}return m(g)}function E(g,o,u){if(o<0||g.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<o+(u||0))throw new RangeError('"length" is outside of buffer bounds');var v;return o===void 0&&u===void 0?v=new Uint8Array(g):u===void 0?v=new Uint8Array(g,o):v=new Uint8Array(g,o,u),Object.setPrototypeOf(v,a.prototype),v}function A(g){if(a.isBuffer(g)){var o=U(g.length)|0,u=c(o);return u.length===0||g.copy(u,0,0,o),u}if(g.length!==void 0)return typeof g.length!="number"||G(g.length)?c(0):m(g);if(g.type==="Buffer"&&Array.isArray(g.data))return m(g.data)}function U(g){if(g>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return g|0}function B(g){return+g!=g&&(g=0),a.alloc(+g)}a.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==a.prototype},a.compare=function(o,u){if(K(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),K(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(o)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===u)return 0;for(var v=o.length,N=u.length,z=0,J=Math.min(v,N);z<J;++z)if(o[z]!==u[z]){v=o[z],N=u[z];break}return v<N?-1:N<v?1:0},a.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(o,u){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return a.alloc(0);var v;if(u===void 0)for(u=0,v=0;v<o.length;++v)u+=o[v].length;var N=a.allocUnsafe(u),z=0;for(v=0;v<o.length;++v){var J=o[v];if(K(J,Uint8Array))z+J.length>N.length?a.from(J).copy(N,z):Uint8Array.prototype.set.call(N,J,z);else if(a.isBuffer(J))J.copy(N,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=J.length}return N};function C(g,o){if(a.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||K(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var u=g.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&u===0)return 0;for(var N=!1;;)switch(o){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return ae(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return R(g).length;default:if(N)return v?-1:ae(g).length;o=(""+o).toLowerCase(),N=!0}}a.byteLength=C;function O(g,o,u){var v=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,o>>>=0,u<=o))return"";for(g||(g="utf8");;)switch(g){case"hex":return oe(this,o,u);case"utf8":case"utf-8":return q(this,o,u);case"ascii":return re(this,o,u);case"latin1":case"binary":return se(this,o,u);case"base64":return F(this,o,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,o,u);default:if(v)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),v=!0}}a.prototype._isBuffer=!0;function S(g,o,u){var v=g[o];g[o]=g[u],g[u]=v}a.prototype.swap16=function(){var o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<o;u+=2)S(this,u,u+1);return this},a.prototype.swap32=function(){var o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<o;u+=4)S(this,u,u+3),S(this,u+1,u+2);return this},a.prototype.swap64=function(){var o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<o;u+=8)S(this,u,u+7),S(this,u+1,u+6),S(this,u+2,u+5),S(this,u+3,u+4);return this},a.prototype.toString=function(){var o=this.length;return o===0?"":arguments.length===0?q(this,0,o):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(o){if(!a.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:a.compare(this,o)===0},a.prototype.inspect=function(){var o="",u=t.INSPECT_MAX_BYTES;return o=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(o+=" ... "),"<Buffer "+o+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(o,u,v,N,z){if(K(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),!a.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(u===void 0&&(u=0),v===void 0&&(v=o?o.length:0),N===void 0&&(N=0),z===void 0&&(z=this.length),u<0||v>o.length||N<0||z>this.length)throw new RangeError("out of range index");if(N>=z&&u>=v)return 0;if(N>=z)return-1;if(u>=v)return 1;if(u>>>=0,v>>>=0,N>>>=0,z>>>=0,this===o)return 0;for(var J=z-N,ue=v-u,he=Math.min(J,ue),xe=this.slice(N,z),we=o.slice(u,v),b=0;b<he;++b)if(xe[b]!==we[b]){J=xe[b],ue=we[b];break}return J<ue?-1:ue<J?1:0};function k(g,o,u,v,N){if(g.length===0)return-1;if(typeof u=="string"?(v=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,G(u)&&(u=N?0:g.length-1),u<0&&(u=g.length+u),u>=g.length){if(N)return-1;u=g.length-1}else if(u<0)if(N)u=0;else return-1;if(typeof o=="string"&&(o=a.from(o,v)),a.isBuffer(o))return o.length===0?-1:P(g,o,u,v,N);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(g,o,u):Uint8Array.prototype.lastIndexOf.call(g,o,u):P(g,[o],u,v,N);throw new TypeError("val must be string, number or Buffer")}function P(g,o,u,v,N){var z=1,J=g.length,ue=o.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(g.length<2||o.length<2)return-1;z=2,J/=2,ue/=2,u/=2}function he(x,I){return z===1?x[I]:x.readUInt16BE(I*z)}var xe;if(N){var we=-1;for(xe=u;xe<J;xe++)if(he(g,xe)===he(o,we===-1?0:xe-we)){if(we===-1&&(we=xe),xe-we+1===ue)return we*z}else we!==-1&&(xe-=xe-we),we=-1}else for(u+ue>J&&(u=J-ue),xe=u;xe>=0;xe--){for(var b=!0,f=0;f<ue;f++)if(he(g,xe+f)!==he(o,f)){b=!1;break}if(b)return xe}return-1}a.prototype.includes=function(o,u,v){return this.indexOf(o,u,v)!==-1},a.prototype.indexOf=function(o,u,v){return k(this,o,u,v,!0)},a.prototype.lastIndexOf=function(o,u,v){return k(this,o,u,v,!1)};function $(g,o,u,v){u=Number(u)||0;var N=g.length-u;v?(v=Number(v),v>N&&(v=N)):v=N;var z=o.length;v>z/2&&(v=z/2);for(var J=0;J<v;++J){var ue=parseInt(o.substr(J*2,2),16);if(G(ue))return J;g[u+J]=ue}return J}function ie(g,o,u,v){return D(ae(o,g.length-u),g,u,v)}function M(g,o,u,v){return D(le(o),g,u,v)}function W(g,o,u,v){return D(R(o),g,u,v)}function ee(g,o,u,v){return D(T(o,g.length-u),g,u,v)}a.prototype.write=function(o,u,v,N){if(u===void 0)N="utf8",v=this.length,u=0;else if(v===void 0&&typeof u=="string")N=u,v=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(v)?(v=v>>>0,N===void 0&&(N="utf8")):(N=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var z=this.length-u;if((v===void 0||v>z)&&(v=z),o.length>0&&(v<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");for(var J=!1;;)switch(N){case"hex":return $(this,o,u,v);case"utf8":case"utf-8":return ie(this,o,u,v);case"ascii":case"latin1":case"binary":return M(this,o,u,v);case"base64":return W(this,o,u,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,o,u,v);default:if(J)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),J=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(g,o,u){return o===0&&u===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(o,u))}function q(g,o,u){u=Math.min(g.length,u);for(var v=[],N=o;N<u;){var z=g[N],J=null,ue=z>239?4:z>223?3:z>191?2:1;if(N+ue<=u){var he,xe,we,b;switch(ue){case 1:z<128&&(J=z);break;case 2:he=g[N+1],(he&192)===128&&(b=(z&31)<<6|he&63,b>127&&(J=b));break;case 3:he=g[N+1],xe=g[N+2],(he&192)===128&&(xe&192)===128&&(b=(z&15)<<12|(he&63)<<6|xe&63,b>2047&&(b<55296||b>57343)&&(J=b));break;case 4:he=g[N+1],xe=g[N+2],we=g[N+3],(he&192)===128&&(xe&192)===128&&(we&192)===128&&(b=(z&15)<<18|(he&63)<<12|(xe&63)<<6|we&63,b>65535&&b<1114112&&(J=b))}}J===null?(J=65533,ue=1):J>65535&&(J-=65536,v.push(J>>>10&1023|55296),J=56320|J&1023),v.push(J),N+=ue}return V(v)}var j=4096;function V(g){var o=g.length;if(o<=j)return String.fromCharCode.apply(String,g);for(var u="",v=0;v<o;)u+=String.fromCharCode.apply(String,g.slice(v,v+=j));return u}function re(g,o,u){var v="";u=Math.min(g.length,u);for(var N=o;N<u;++N)v+=String.fromCharCode(g[N]&127);return v}function se(g,o,u){var v="";u=Math.min(g.length,u);for(var N=o;N<u;++N)v+=String.fromCharCode(g[N]);return v}function oe(g,o,u){var v=g.length;(!o||o<0)&&(o=0),(!u||u<0||u>v)&&(u=v);for(var N="",z=o;z<u;++z)N+=Q[g[z]];return N}function de(g,o,u){for(var v=g.slice(o,u),N="",z=0;z<v.length-1;z+=2)N+=String.fromCharCode(v[z]+v[z+1]*256);return N}a.prototype.slice=function(o,u){var v=this.length;o=~~o,u=u===void 0?v:~~u,o<0?(o+=v,o<0&&(o=0)):o>v&&(o=v),u<0?(u+=v,u<0&&(u=0)):u>v&&(u=v),u<o&&(u=o);var N=this.subarray(o,u);return Object.setPrototypeOf(N,a.prototype),N};function Z(g,o,u){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+o>u)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(o,u,v){o=o>>>0,u=u>>>0,v||Z(o,u,this.length);for(var N=this[o],z=1,J=0;++J<u&&(z*=256);)N+=this[o+J]*z;return N},a.prototype.readUintBE=a.prototype.readUIntBE=function(o,u,v){o=o>>>0,u=u>>>0,v||Z(o,u,this.length);for(var N=this[o+--u],z=1;u>0&&(z*=256);)N+=this[o+--u]*z;return N},a.prototype.readUint8=a.prototype.readUInt8=function(o,u){return o=o>>>0,u||Z(o,1,this.length),this[o]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(o,u){return o=o>>>0,u||Z(o,2,this.length),this[o]|this[o+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(o,u){return o=o>>>0,u||Z(o,2,this.length),this[o]<<8|this[o+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(o,u){return o=o>>>0,u||Z(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(o,u){return o=o>>>0,u||Z(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},a.prototype.readIntLE=function(o,u,v){o=o>>>0,u=u>>>0,v||Z(o,u,this.length);for(var N=this[o],z=1,J=0;++J<u&&(z*=256);)N+=this[o+J]*z;return z*=128,N>=z&&(N-=Math.pow(2,8*u)),N},a.prototype.readIntBE=function(o,u,v){o=o>>>0,u=u>>>0,v||Z(o,u,this.length);for(var N=u,z=1,J=this[o+--N];N>0&&(z*=256);)J+=this[o+--N]*z;return z*=128,J>=z&&(J-=Math.pow(2,8*u)),J},a.prototype.readInt8=function(o,u){return o=o>>>0,u||Z(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},a.prototype.readInt16LE=function(o,u){o=o>>>0,u||Z(o,2,this.length);var v=this[o]|this[o+1]<<8;return v&32768?v|4294901760:v},a.prototype.readInt16BE=function(o,u){o=o>>>0,u||Z(o,2,this.length);var v=this[o+1]|this[o]<<8;return v&32768?v|4294901760:v},a.prototype.readInt32LE=function(o,u){return o=o>>>0,u||Z(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},a.prototype.readInt32BE=function(o,u){return o=o>>>0,u||Z(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},a.prototype.readFloatLE=function(o,u){return o=o>>>0,u||Z(o,4,this.length),r.read(this,o,!0,23,4)},a.prototype.readFloatBE=function(o,u){return o=o>>>0,u||Z(o,4,this.length),r.read(this,o,!1,23,4)},a.prototype.readDoubleLE=function(o,u){return o=o>>>0,u||Z(o,8,this.length),r.read(this,o,!0,52,8)},a.prototype.readDoubleBE=function(o,u){return o=o>>>0,u||Z(o,8,this.length),r.read(this,o,!1,52,8)};function H(g,o,u,v,N,z){if(!a.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>N||o<z)throw new RangeError('"value" argument is out of bounds');if(u+v>g.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(o,u,v,N){if(o=+o,u=u>>>0,v=v>>>0,!N){var z=Math.pow(2,8*v)-1;H(this,o,u,v,z,0)}var J=1,ue=0;for(this[u]=o&255;++ue<v&&(J*=256);)this[u+ue]=o/J&255;return u+v},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(o,u,v,N){if(o=+o,u=u>>>0,v=v>>>0,!N){var z=Math.pow(2,8*v)-1;H(this,o,u,v,z,0)}var J=v-1,ue=1;for(this[u+J]=o&255;--J>=0&&(ue*=256);)this[u+J]=o/ue&255;return u+v},a.prototype.writeUint8=a.prototype.writeUInt8=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,1,255,0),this[u]=o&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,2,65535,0),this[u]=o&255,this[u+1]=o>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,2,65535,0),this[u]=o>>>8,this[u+1]=o&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,4,4294967295,0),this[u+3]=o>>>24,this[u+2]=o>>>16,this[u+1]=o>>>8,this[u]=o&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,4,4294967295,0),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4},a.prototype.writeIntLE=function(o,u,v,N){if(o=+o,u=u>>>0,!N){var z=Math.pow(2,8*v-1);H(this,o,u,v,z-1,-z)}var J=0,ue=1,he=0;for(this[u]=o&255;++J<v&&(ue*=256);)o<0&&he===0&&this[u+J-1]!==0&&(he=1),this[u+J]=(o/ue>>0)-he&255;return u+v},a.prototype.writeIntBE=function(o,u,v,N){if(o=+o,u=u>>>0,!N){var z=Math.pow(2,8*v-1);H(this,o,u,v,z-1,-z)}var J=v-1,ue=1,he=0;for(this[u+J]=o&255;--J>=0&&(ue*=256);)o<0&&he===0&&this[u+J+1]!==0&&(he=1),this[u+J]=(o/ue>>0)-he&255;return u+v},a.prototype.writeInt8=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,1,127,-128),o<0&&(o=255+o+1),this[u]=o&255,u+1},a.prototype.writeInt16LE=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,2,32767,-32768),this[u]=o&255,this[u+1]=o>>>8,u+2},a.prototype.writeInt16BE=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,2,32767,-32768),this[u]=o>>>8,this[u+1]=o&255,u+2},a.prototype.writeInt32LE=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,4,2147483647,-2147483648),this[u]=o&255,this[u+1]=o>>>8,this[u+2]=o>>>16,this[u+3]=o>>>24,u+4},a.prototype.writeInt32BE=function(o,u,v){return o=+o,u=u>>>0,v||H(this,o,u,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4};function X(g,o,u,v,N,z){if(u+v>g.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function y(g,o,u,v,N){return o=+o,u=u>>>0,N||X(g,o,u,4),r.write(g,o,u,v,23,4),u+4}a.prototype.writeFloatLE=function(o,u,v){return y(this,o,u,!0,v)},a.prototype.writeFloatBE=function(o,u,v){return y(this,o,u,!1,v)};function ce(g,o,u,v,N){return o=+o,u=u>>>0,N||X(g,o,u,8),r.write(g,o,u,v,52,8),u+8}a.prototype.writeDoubleLE=function(o,u,v){return ce(this,o,u,!0,v)},a.prototype.writeDoubleBE=function(o,u,v){return ce(this,o,u,!1,v)},a.prototype.copy=function(o,u,v,N){if(!a.isBuffer(o))throw new TypeError("argument should be a Buffer");if(v||(v=0),!N&&N!==0&&(N=this.length),u>=o.length&&(u=o.length),u||(u=0),N>0&&N<v&&(N=v),N===v||o.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),o.length-u<N-v&&(N=o.length-u+v);var z=N-v;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,v,N):Uint8Array.prototype.set.call(o,this.subarray(v,N),u),z},a.prototype.fill=function(o,u,v,N){if(typeof o=="string"){if(typeof u=="string"?(N=u,u=0,v=this.length):typeof v=="string"&&(N=v,v=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(o.length===1){var z=o.charCodeAt(0);(N==="utf8"&&z<128||N==="latin1")&&(o=z)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(u<0||this.length<u||this.length<v)throw new RangeError("Out of range index");if(v<=u)return this;u=u>>>0,v=v===void 0?this.length:v>>>0,o||(o=0);var J;if(typeof o=="number")for(J=u;J<v;++J)this[J]=o;else{var ue=a.isBuffer(o)?o:a.from(o,N),he=ue.length;if(he===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(J=0;J<v-u;++J)this[J+u]=ue[J%he]}return this};var fe=/[^+/0-9A-Za-z-_]/g;function pe(g){if(g=g.split("=")[0],g=g.trim().replace(fe,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function ae(g,o){o=o||1/0;for(var u,v=g.length,N=null,z=[],J=0;J<v;++J){if(u=g.charCodeAt(J),u>55295&&u<57344){if(!N){if(u>56319){(o-=3)>-1&&z.push(239,191,189);continue}else if(J+1===v){(o-=3)>-1&&z.push(239,191,189);continue}N=u;continue}if(u<56320){(o-=3)>-1&&z.push(239,191,189),N=u;continue}u=(N-55296<<10|u-56320)+65536}else N&&(o-=3)>-1&&z.push(239,191,189);if(N=null,u<128){if((o-=1)<0)break;z.push(u)}else if(u<2048){if((o-=2)<0)break;z.push(u>>6|192,u&63|128)}else if(u<65536){if((o-=3)<0)break;z.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((o-=4)<0)break;z.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return z}function le(g){for(var o=[],u=0;u<g.length;++u)o.push(g.charCodeAt(u)&255);return o}function T(g,o){for(var u,v,N,z=[],J=0;J<g.length&&!((o-=2)<0);++J)u=g.charCodeAt(J),v=u>>8,N=u%256,z.push(N),z.push(v);return z}function R(g){return e.toByteArray(pe(g))}function D(g,o,u,v){for(var N=0;N<v&&!(N+u>=o.length||N>=g.length);++N)o[N+u]=g[N];return N}function K(g,o){return g instanceof o||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===o.name}function G(g){return g!==g}var Q=function(){for(var g="0123456789abcdef",o=new Array(256),u=0;u<16;++u)for(var v=u*16,N=0;N<16;++N)o[v+N]=g[u]+g[N];return o}()})(Xr);var Pa={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,c="[BigNumber Error] ",a=c+"Number primitive has more than 15 significant digits: ",h=1e14,l=14,p=9007199254740991,w=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],_=1e7,m=1e9;function d(k){var P,$,ie,M=y.prototype={constructor:y,toString:null,valueOf:null},W=new y(1),ee=20,F=4,q=-7,j=21,V=-1e7,re=1e7,se=!1,oe=1,de=0,Z={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",X=!0;function y(T,R){var D,K,G,Q,g,o,u,v,N=this;if(!(N instanceof y))return new y(T,R);if(R==null){if(T&&T._isBigNumber===!0){N.s=T.s,!T.c||T.e>re?N.c=N.e=null:T.e<V?N.c=[N.e=0]:(N.e=T.e,N.c=T.c.slice());return}if((o=typeof T=="number")&&T*0==0){if(N.s=1/T<0?(T=-T,-1):1,T===~~T){for(Q=0,g=T;g>=10;g/=10,Q++);Q>re?N.c=N.e=null:(N.e=Q,N.c=[T]);return}v=String(T)}else{if(!n.test(v=String(T)))return ie(N,v,o);N.s=v.charCodeAt(0)==45?(v=v.slice(1),-1):1}(Q=v.indexOf("."))>-1&&(v=v.replace(".","")),(g=v.search(/e/i))>0?(Q<0&&(Q=g),Q+=+v.slice(g+1),v=v.substring(0,g)):Q<0&&(Q=v.length)}else{if(B(R,2,H.length,"Base"),R==10&&X)return N=new y(T),ae(N,ee+N.e+1,F);if(v=String(T),o=typeof T=="number"){if(T*0!=0)return ie(N,v,o,R);if(N.s=1/T<0?(v=v.slice(1),-1):1,y.DEBUG&&v.replace(/^0\.0*|\./,"").length>15)throw Error(a+T)}else N.s=v.charCodeAt(0)===45?(v=v.slice(1),-1):1;for(D=H.slice(0,R),Q=g=0,u=v.length;g<u;g++)if(D.indexOf(K=v.charAt(g))<0){if(K=="."){if(g>Q){Q=u;continue}}else if(!G&&(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase()))){G=!0,g=-1,Q=0;continue}return ie(N,String(T),o,R)}o=!1,v=$(v,R,10,N.s),(Q=v.indexOf("."))>-1?v=v.replace(".",""):Q=v.length}for(g=0;v.charCodeAt(g)===48;g++);for(u=v.length;v.charCodeAt(--u)===48;);if(v=v.slice(g,++u)){if(u-=g,o&&y.DEBUG&&u>15&&(T>p||T!==s(T)))throw Error(a+N.s*T);if((Q=Q-g-1)>re)N.c=N.e=null;else if(Q<V)N.c=[N.e=0];else{if(N.e=Q,N.c=[],g=(Q+1)%l,Q<0&&(g+=l),g<u){for(g&&N.c.push(+v.slice(0,g)),u-=l;g<u;)N.c.push(+v.slice(g,g+=l));g=l-(v=v.slice(g)).length}else g-=u;for(;g--;v+="0");N.c.push(+v)}}else N.c=[N.e=0]}y.clone=d,y.ROUND_UP=0,y.ROUND_DOWN=1,y.ROUND_CEIL=2,y.ROUND_FLOOR=3,y.ROUND_HALF_UP=4,y.ROUND_HALF_DOWN=5,y.ROUND_HALF_EVEN=6,y.ROUND_HALF_CEIL=7,y.ROUND_HALF_FLOOR=8,y.EUCLID=9,y.config=y.set=function(T){var R,D;if(T!=null)if(typeof T=="object"){if(T.hasOwnProperty(R="DECIMAL_PLACES")&&(D=T[R],B(D,0,m,R),ee=D),T.hasOwnProperty(R="ROUNDING_MODE")&&(D=T[R],B(D,0,8,R),F=D),T.hasOwnProperty(R="EXPONENTIAL_AT")&&(D=T[R],D&&D.pop?(B(D[0],-m,0,R),B(D[1],0,m,R),q=D[0],j=D[1]):(B(D,-m,m,R),q=-(j=D<0?-D:D))),T.hasOwnProperty(R="RANGE"))if(D=T[R],D&&D.pop)B(D[0],-m,-1,R),B(D[1],1,m,R),V=D[0],re=D[1];else if(B(D,-m,m,R),D)V=-(re=D<0?-D:D);else throw Error(c+R+" cannot be zero: "+D);if(T.hasOwnProperty(R="CRYPTO"))if(D=T[R],D===!!D)if(D)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))se=D;else throw se=!D,Error(c+"crypto unavailable");else se=D;else throw Error(c+R+" not true or false: "+D);if(T.hasOwnProperty(R="MODULO_MODE")&&(D=T[R],B(D,0,9,R),oe=D),T.hasOwnProperty(R="POW_PRECISION")&&(D=T[R],B(D,0,m,R),de=D),T.hasOwnProperty(R="FORMAT"))if(D=T[R],typeof D=="object")Z=D;else throw Error(c+R+" not an object: "+D);if(T.hasOwnProperty(R="ALPHABET"))if(D=T[R],typeof D=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(D))X=D.slice(0,10)=="0123456789",H=D;else throw Error(c+R+" invalid: "+D)}else throw Error(c+"Object expected: "+T);return{DECIMAL_PLACES:ee,ROUNDING_MODE:F,EXPONENTIAL_AT:[q,j],RANGE:[V,re],CRYPTO:se,MODULO_MODE:oe,POW_PRECISION:de,FORMAT:Z,ALPHABET:H}},y.isBigNumber=function(T){if(!T||T._isBigNumber!==!0)return!1;if(!y.DEBUG)return!0;var R,D,K=T.c,G=T.e,Q=T.s;e:if({}.toString.call(K)=="[object Array]"){if((Q===1||Q===-1)&&G>=-m&&G<=m&&G===s(G)){if(K[0]===0){if(G===0&&K.length===1)return!0;break e}if(R=(G+1)%l,R<1&&(R+=l),String(K[0]).length==R){for(R=0;R<K.length;R++)if(D=K[R],D<0||D>=h||D!==s(D))break e;if(D!==0)return!0}}}else if(K===null&&G===null&&(Q===null||Q===1||Q===-1))return!0;throw Error(c+"Invalid BigNumber: "+T)},y.maximum=y.max=function(){return fe(arguments,-1)},y.minimum=y.min=function(){return fe(arguments,1)},y.random=function(){var T=9007199254740992,R=Math.random()*T&2097151?function(){return s(Math.random()*T)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(D){var K,G,Q,g,o,u=0,v=[],N=new y(W);if(D==null?D=ee:B(D,0,m),g=i(D/l),se)if(crypto.getRandomValues){for(K=crypto.getRandomValues(new Uint32Array(g*=2));u<g;)o=K[u]*131072+(K[u+1]>>>11),o>=9e15?(G=crypto.getRandomValues(new Uint32Array(2)),K[u]=G[0],K[u+1]=G[1]):(v.push(o%1e14),u+=2);u=g/2}else if(crypto.randomBytes){for(K=crypto.randomBytes(g*=7);u<g;)o=(K[u]&31)*281474976710656+K[u+1]*1099511627776+K[u+2]*4294967296+K[u+3]*16777216+(K[u+4]<<16)+(K[u+5]<<8)+K[u+6],o>=9e15?crypto.randomBytes(7).copy(K,u):(v.push(o%1e14),u+=7);u=g/7}else throw se=!1,Error(c+"crypto unavailable");if(!se)for(;u<g;)o=R(),o<9e15&&(v[u++]=o%1e14);for(g=v[--u],D%=l,g&&D&&(o=w[l-D],v[u]=s(g/o)*o);v[u]===0;v.pop(),u--);if(u<0)v=[Q=0];else{for(Q=-1;v[0]===0;v.splice(0,1),Q-=l);for(u=1,o=v[0];o>=10;o/=10,u++);u<l&&(Q-=l-u)}return N.e=Q,N.c=v,N}}(),y.sum=function(){for(var T=1,R=arguments,D=new y(R[0]);T<R.length;)D=D.plus(R[T++]);return D},$=function(){var T="0123456789";function R(D,K,G,Q){for(var g,o=[0],u,v=0,N=D.length;v<N;){for(u=o.length;u--;o[u]*=K);for(o[0]+=Q.indexOf(D.charAt(v++)),g=0;g<o.length;g++)o[g]>G-1&&(o[g+1]==null&&(o[g+1]=0),o[g+1]+=o[g]/G|0,o[g]%=G)}return o.reverse()}return function(D,K,G,Q,g){var o,u,v,N,z,J,ue,he,xe=D.indexOf("."),we=ee,b=F;for(xe>=0&&(N=de,de=0,D=D.replace(".",""),he=new y(K),J=he.pow(D.length-xe),de=N,he.c=R(S(A(J.c),J.e,"0"),10,G,T),he.e=he.c.length),ue=R(D,K,G,g?(o=H,T):(o=T,H)),v=N=ue.length;ue[--N]==0;ue.pop());if(!ue[0])return o.charAt(0);if(xe<0?--v:(J.c=ue,J.e=v,J.s=Q,J=P(J,he,we,b,G),ue=J.c,z=J.r,v=J.e),u=v+we+1,xe=ue[u],N=G/2,z=z||u<0||ue[u+1]!=null,z=b<4?(xe!=null||z)&&(b==0||b==(J.s<0?3:2)):xe>N||xe==N&&(b==4||z||b==6&&ue[u-1]&1||b==(J.s<0?8:7)),u<1||!ue[0])D=z?S(o.charAt(1),-we,o.charAt(0)):o.charAt(0);else{if(ue.length=u,z)for(--G;++ue[--u]>G;)ue[u]=0,u||(++v,ue=[1].concat(ue));for(N=ue.length;!ue[--N];);for(xe=0,D="";xe<=N;D+=o.charAt(ue[xe++]));D=S(D,v,o.charAt(0))}return D}}(),P=function(){function T(K,G,Q){var g,o,u,v,N=0,z=K.length,J=G%_,ue=G/_|0;for(K=K.slice();z--;)u=K[z]%_,v=K[z]/_|0,g=ue*u+v*J,o=J*u+g%_*_+N,N=(o/Q|0)+(g/_|0)+ue*v,K[z]=o%Q;return N&&(K=[N].concat(K)),K}function R(K,G,Q,g){var o,u;if(Q!=g)u=Q>g?1:-1;else for(o=u=0;o<Q;o++)if(K[o]!=G[o]){u=K[o]>G[o]?1:-1;break}return u}function D(K,G,Q,g){for(var o=0;Q--;)K[Q]-=o,o=K[Q]<G[Q]?1:0,K[Q]=o*g+K[Q]-G[Q];for(;!K[0]&&K.length>1;K.splice(0,1));}return function(K,G,Q,g,o){var u,v,N,z,J,ue,he,xe,we,b,f,x,I,Y,te,ne,be,Ce=K.s==G.s?1:-1,_e=K.c,me=G.c;if(!_e||!_e[0]||!me||!me[0])return new y(!K.s||!G.s||(_e?me&&_e[0]==me[0]:!me)?NaN:_e&&_e[0]==0||!me?Ce*0:Ce/0);for(xe=new y(Ce),we=xe.c=[],v=K.e-G.e,Ce=Q+v+1,o||(o=h,v=E(K.e/l)-E(G.e/l),Ce=Ce/l|0),N=0;me[N]==(_e[N]||0);N++);if(me[N]>(_e[N]||0)&&v--,Ce<0)we.push(1),z=!0;else{for(Y=_e.length,ne=me.length,N=0,Ce+=2,J=s(o/(me[0]+1)),J>1&&(me=T(me,J,o),_e=T(_e,J,o),ne=me.length,Y=_e.length),I=ne,b=_e.slice(0,ne),f=b.length;f<ne;b[f++]=0);be=me.slice(),be=[0].concat(be),te=me[0],me[1]>=o/2&&te++;do{if(J=0,u=R(me,b,ne,f),u<0){if(x=b[0],ne!=f&&(x=x*o+(b[1]||0)),J=s(x/te),J>1)for(J>=o&&(J=o-1),ue=T(me,J,o),he=ue.length,f=b.length;R(ue,b,he,f)==1;)J--,D(ue,ne<he?be:me,he,o),he=ue.length,u=1;else J==0&&(u=J=1),ue=me.slice(),he=ue.length;if(he<f&&(ue=[0].concat(ue)),D(b,ue,f,o),f=b.length,u==-1)for(;R(me,b,ne,f)<1;)J++,D(b,ne<f?be:me,f,o),f=b.length}else u===0&&(J++,b=[0]);we[N++]=J,b[0]?b[f++]=_e[I]||0:(b=[_e[I]],f=1)}while((I++<Y||b[0]!=null)&&Ce--);z=b[0]!=null,we[0]||we.splice(0,1)}if(o==h){for(N=1,Ce=we[0];Ce>=10;Ce/=10,N++);ae(xe,Q+(xe.e=N+v*l-1)+1,g,z)}else xe.e=v,xe.r=+z;return xe}}();function ce(T,R,D,K){var G,Q,g,o,u;if(D==null?D=F:B(D,0,8),!T.c)return T.toString();if(G=T.c[0],g=T.e,R==null)u=A(T.c),u=K==1||K==2&&(g<=q||g>=j)?O(u,g):S(u,g,"0");else if(T=ae(new y(T),R,D),Q=T.e,u=A(T.c),o=u.length,K==1||K==2&&(R<=Q||Q<=q)){for(;o<R;u+="0",o++);u=O(u,Q)}else if(R-=g,u=S(u,Q,"0"),Q+1>o){if(--R>0)for(u+=".";R--;u+="0");}else if(R+=Q-o,R>0)for(Q+1==o&&(u+=".");R--;u+="0");return T.s<0&&G?"-"+u:u}function fe(T,R){for(var D,K,G=1,Q=new y(T[0]);G<T.length;G++)K=new y(T[G]),(!K.s||(D=U(Q,K))===R||D===0&&Q.s===R)&&(Q=K);return Q}function pe(T,R,D){for(var K=1,G=R.length;!R[--G];R.pop());for(G=R[0];G>=10;G/=10,K++);return(D=K+D*l-1)>re?T.c=T.e=null:D<V?T.c=[T.e=0]:(T.e=D,T.c=R),T}ie=function(){var T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,R=/^([^.]+)\.$/,D=/^\.([^.]+)$/,K=/^-?(Infinity|NaN)$/,G=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Q,g,o,u){var v,N=o?g:g.replace(G,"");if(K.test(N))Q.s=isNaN(N)?null:N<0?-1:1;else{if(!o&&(N=N.replace(T,function(z,J,ue){return v=(ue=ue.toLowerCase())=="x"?16:ue=="b"?2:8,!u||u==v?J:z}),u&&(v=u,N=N.replace(R,"$1").replace(D,"0.$1")),g!=N))return new y(N,v);if(y.DEBUG)throw Error(c+"Not a"+(u?" base "+u:"")+" number: "+g);Q.s=null}Q.c=Q.e=null}}();function ae(T,R,D,K){var G,Q,g,o,u,v,N,z=T.c,J=w;if(z){e:{for(G=1,o=z[0];o>=10;o/=10,G++);if(Q=R-G,Q<0)Q+=l,g=R,u=z[v=0],N=s(u/J[G-g-1]%10);else if(v=i((Q+1)/l),v>=z.length)if(K){for(;z.length<=v;z.push(0));u=N=0,G=1,Q%=l,g=Q-l+1}else break e;else{for(u=o=z[v],G=1;o>=10;o/=10,G++);Q%=l,g=Q-l+G,N=g<0?0:s(u/J[G-g-1]%10)}if(K=K||R<0||z[v+1]!=null||(g<0?u:u%J[G-g-1]),K=D<4?(N||K)&&(D==0||D==(T.s<0?3:2)):N>5||N==5&&(D==4||K||D==6&&(Q>0?g>0?u/J[G-g]:0:z[v-1])%10&1||D==(T.s<0?8:7)),R<1||!z[0])return z.length=0,K?(R-=T.e+1,z[0]=J[(l-R%l)%l],T.e=-R||0):z[0]=T.e=0,T;if(Q==0?(z.length=v,o=1,v--):(z.length=v+1,o=J[l-Q],z[v]=g>0?s(u/J[G-g]%J[g])*o:0),K)for(;;)if(v==0){for(Q=1,g=z[0];g>=10;g/=10,Q++);for(g=z[0]+=o,o=1;g>=10;g/=10,o++);Q!=o&&(T.e++,z[0]==h&&(z[0]=1));break}else{if(z[v]+=o,z[v]!=h)break;z[v--]=0,o=1}for(Q=z.length;z[--Q]===0;z.pop());}T.e>re?T.c=T.e=null:T.e<V&&(T.c=[T.e=0])}return T}function le(T){var R,D=T.e;return D===null?T.toString():(R=A(T.c),R=D<=q||D>=j?O(R,D):S(R,D,"0"),T.s<0?"-"+R:R)}return M.absoluteValue=M.abs=function(){var T=new y(this);return T.s<0&&(T.s=1),T},M.comparedTo=function(T,R){return U(this,new y(T,R))},M.decimalPlaces=M.dp=function(T,R){var D,K,G,Q=this;if(T!=null)return B(T,0,m),R==null?R=F:B(R,0,8),ae(new y(Q),T+Q.e+1,R);if(!(D=Q.c))return null;if(K=((G=D.length-1)-E(this.e/l))*l,G=D[G])for(;G%10==0;G/=10,K--);return K<0&&(K=0),K},M.dividedBy=M.div=function(T,R){return P(this,new y(T,R),ee,F)},M.dividedToIntegerBy=M.idiv=function(T,R){return P(this,new y(T,R),0,1)},M.exponentiatedBy=M.pow=function(T,R){var D,K,G,Q,g,o,u,v,N,z=this;if(T=new y(T),T.c&&!T.isInteger())throw Error(c+"Exponent not an integer: "+le(T));if(R!=null&&(R=new y(R)),o=T.e>14,!z.c||!z.c[0]||z.c[0]==1&&!z.e&&z.c.length==1||!T.c||!T.c[0])return N=new y(Math.pow(+le(z),o?T.s*(2-C(T)):+le(T))),R?N.mod(R):N;if(u=T.s<0,R){if(R.c?!R.c[0]:!R.s)return new y(NaN);K=!u&&z.isInteger()&&R.isInteger(),K&&(z=z.mod(R))}else{if(T.e>9&&(z.e>0||z.e<-1||(z.e==0?z.c[0]>1||o&&z.c[1]>=24e7:z.c[0]<8e13||o&&z.c[0]<=9999975e7)))return Q=z.s<0&&C(T)?-0:0,z.e>-1&&(Q=1/Q),new y(u?1/Q:Q);de&&(Q=i(de/l+2))}for(o?(D=new y(.5),u&&(T.s=1),v=C(T)):(G=Math.abs(+le(T)),v=G%2),N=new y(W);;){if(v){if(N=N.times(z),!N.c)break;Q?N.c.length>Q&&(N.c.length=Q):K&&(N=N.mod(R))}if(G){if(G=s(G/2),G===0)break;v=G%2}else if(T=T.times(D),ae(T,T.e+1,1),T.e>14)v=C(T);else{if(G=+le(T),G===0)break;v=G%2}z=z.times(z),Q?z.c&&z.c.length>Q&&(z.c.length=Q):K&&(z=z.mod(R))}return K?N:(u&&(N=W.div(N)),R?N.mod(R):Q?ae(N,de,F,g):N)},M.integerValue=function(T){var R=new y(this);return T==null?T=F:B(T,0,8),ae(R,R.e+1,T)},M.isEqualTo=M.eq=function(T,R){return U(this,new y(T,R))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(T,R){return U(this,new y(T,R))>0},M.isGreaterThanOrEqualTo=M.gte=function(T,R){return(R=U(this,new y(T,R)))===1||R===0},M.isInteger=function(){return!!this.c&&E(this.e/l)>this.c.length-2},M.isLessThan=M.lt=function(T,R){return U(this,new y(T,R))<0},M.isLessThanOrEqualTo=M.lte=function(T,R){return(R=U(this,new y(T,R)))===-1||R===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(T,R){var D,K,G,Q,g=this,o=g.s;if(T=new y(T,R),R=T.s,!o||!R)return new y(NaN);if(o!=R)return T.s=-R,g.plus(T);var u=g.e/l,v=T.e/l,N=g.c,z=T.c;if(!u||!v){if(!N||!z)return N?(T.s=-R,T):new y(z?g:NaN);if(!N[0]||!z[0])return z[0]?(T.s=-R,T):new y(N[0]?g:F==3?-0:0)}if(u=E(u),v=E(v),N=N.slice(),o=u-v){for((Q=o<0)?(o=-o,G=N):(v=u,G=z),G.reverse(),R=o;R--;G.push(0));G.reverse()}else for(K=(Q=(o=N.length)<(R=z.length))?o:R,o=R=0;R<K;R++)if(N[R]!=z[R]){Q=N[R]<z[R];break}if(Q&&(G=N,N=z,z=G,T.s=-T.s),R=(K=z.length)-(D=N.length),R>0)for(;R--;N[D++]=0);for(R=h-1;K>o;){if(N[--K]<z[K]){for(D=K;D&&!N[--D];N[D]=R);--N[D],N[K]+=h}N[K]-=z[K]}for(;N[0]==0;N.splice(0,1),--v);return N[0]?pe(T,N,v):(T.s=F==3?-1:1,T.c=[T.e=0],T)},M.modulo=M.mod=function(T,R){var D,K,G=this;return T=new y(T,R),!G.c||!T.s||T.c&&!T.c[0]?new y(NaN):!T.c||G.c&&!G.c[0]?new y(G):(oe==9?(K=T.s,T.s=1,D=P(G,T,0,3),T.s=K,D.s*=K):D=P(G,T,0,oe),T=G.minus(D.times(T)),!T.c[0]&&oe==1&&(T.s=G.s),T)},M.multipliedBy=M.times=function(T,R){var D,K,G,Q,g,o,u,v,N,z,J,ue,he,xe,we,b=this,f=b.c,x=(T=new y(T,R)).c;if(!f||!x||!f[0]||!x[0])return!b.s||!T.s||f&&!f[0]&&!x||x&&!x[0]&&!f?T.c=T.e=T.s=null:(T.s*=b.s,!f||!x?T.c=T.e=null:(T.c=[0],T.e=0)),T;for(K=E(b.e/l)+E(T.e/l),T.s*=b.s,u=f.length,z=x.length,u<z&&(he=f,f=x,x=he,G=u,u=z,z=G),G=u+z,he=[];G--;he.push(0));for(xe=h,we=_,G=z;--G>=0;){for(D=0,J=x[G]%we,ue=x[G]/we|0,g=u,Q=G+g;Q>G;)v=f[--g]%we,N=f[g]/we|0,o=ue*v+N*J,v=J*v+o%we*we+he[Q]+D,D=(v/xe|0)+(o/we|0)+ue*N,he[Q--]=v%xe;he[Q]=D}return D?++K:he.splice(0,1),pe(T,he,K)},M.negated=function(){var T=new y(this);return T.s=-T.s||null,T},M.plus=function(T,R){var D,K=this,G=K.s;if(T=new y(T,R),R=T.s,!G||!R)return new y(NaN);if(G!=R)return T.s=-R,K.minus(T);var Q=K.e/l,g=T.e/l,o=K.c,u=T.c;if(!Q||!g){if(!o||!u)return new y(G/0);if(!o[0]||!u[0])return u[0]?T:new y(o[0]?K:G*0)}if(Q=E(Q),g=E(g),o=o.slice(),G=Q-g){for(G>0?(g=Q,D=u):(G=-G,D=o),D.reverse();G--;D.push(0));D.reverse()}for(G=o.length,R=u.length,G-R<0&&(D=u,u=o,o=D,R=G),G=0;R;)G=(o[--R]=o[R]+u[R]+G)/h|0,o[R]=h===o[R]?0:o[R]%h;return G&&(o=[G].concat(o),++g),pe(T,o,g)},M.precision=M.sd=function(T,R){var D,K,G,Q=this;if(T!=null&&T!==!!T)return B(T,1,m),R==null?R=F:B(R,0,8),ae(new y(Q),T,R);if(!(D=Q.c))return null;if(G=D.length-1,K=G*l+1,G=D[G]){for(;G%10==0;G/=10,K--);for(G=D[0];G>=10;G/=10,K++);}return T&&Q.e+1>K&&(K=Q.e+1),K},M.shiftedBy=function(T){return B(T,-p,p),this.times("1e"+T)},M.squareRoot=M.sqrt=function(){var T,R,D,K,G,Q=this,g=Q.c,o=Q.s,u=Q.e,v=ee+4,N=new y("0.5");if(o!==1||!g||!g[0])return new y(!o||o<0&&(!g||g[0])?NaN:g?Q:1/0);if(o=Math.sqrt(+le(Q)),o==0||o==1/0?(R=A(g),(R.length+u)%2==0&&(R+="0"),o=Math.sqrt(+R),u=E((u+1)/2)-(u<0||u%2),o==1/0?R="5e"+u:(R=o.toExponential(),R=R.slice(0,R.indexOf("e")+1)+u),D=new y(R)):D=new y(o+""),D.c[0]){for(u=D.e,o=u+v,o<3&&(o=0);;)if(G=D,D=N.times(G.plus(P(Q,G,v,1))),A(G.c).slice(0,o)===(R=A(D.c)).slice(0,o))if(D.e<u&&--o,R=R.slice(o-3,o+1),R=="9999"||!K&&R=="4999"){if(!K&&(ae(G,G.e+ee+2,0),G.times(G).eq(Q))){D=G;break}v+=4,o+=4,K=1}else{(!+R||!+R.slice(1)&&R.charAt(0)=="5")&&(ae(D,D.e+ee+2,1),T=!D.times(D).eq(Q));break}}return ae(D,D.e+ee+1,F,T)},M.toExponential=function(T,R){return T!=null&&(B(T,0,m),T++),ce(this,T,R,1)},M.toFixed=function(T,R){return T!=null&&(B(T,0,m),T=T+this.e+1),ce(this,T,R)},M.toFormat=function(T,R,D){var K,G=this;if(D==null)T!=null&&R&&typeof R=="object"?(D=R,R=null):T&&typeof T=="object"?(D=T,T=R=null):D=Z;else if(typeof D!="object")throw Error(c+"Argument not an object: "+D);if(K=G.toFixed(T,R),G.c){var Q,g=K.split("."),o=+D.groupSize,u=+D.secondaryGroupSize,v=D.groupSeparator||"",N=g[0],z=g[1],J=G.s<0,ue=J?N.slice(1):N,he=ue.length;if(u&&(Q=o,o=u,u=Q,he-=Q),o>0&&he>0){for(Q=he%o||o,N=ue.substr(0,Q);Q<he;Q+=o)N+=v+ue.substr(Q,o);u>0&&(N+=v+ue.slice(Q)),J&&(N="-"+N)}K=z?N+(D.decimalSeparator||"")+((u=+D.fractionGroupSize)?z.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(D.fractionGroupSeparator||"")):z):N}return(D.prefix||"")+K+(D.suffix||"")},M.toFraction=function(T){var R,D,K,G,Q,g,o,u,v,N,z,J,ue=this,he=ue.c;if(T!=null&&(o=new y(T),!o.isInteger()&&(o.c||o.s!==1)||o.lt(W)))throw Error(c+"Argument "+(o.isInteger()?"out of range: ":"not an integer: ")+le(o));if(!he)return new y(ue);for(R=new y(W),v=D=new y(W),K=u=new y(W),J=A(he),Q=R.e=J.length-ue.e-1,R.c[0]=w[(g=Q%l)<0?l+g:g],T=!T||o.comparedTo(R)>0?Q>0?R:v:o,g=re,re=1/0,o=new y(J),u.c[0]=0;N=P(o,R,0,1),G=D.plus(N.times(K)),G.comparedTo(T)!=1;)D=K,K=G,v=u.plus(N.times(G=v)),u=G,R=o.minus(N.times(G=R)),o=G;return G=P(T.minus(D),K,0,1),u=u.plus(G.times(v)),D=D.plus(G.times(K)),u.s=v.s=ue.s,Q=Q*2,z=P(v,K,Q,F).minus(ue).abs().comparedTo(P(u,D,Q,F).minus(ue).abs())<1?[v,K]:[u,D],re=g,z},M.toNumber=function(){return+le(this)},M.toPrecision=function(T,R){return T!=null&&B(T,1,m),ce(this,T,R,2)},M.toString=function(T){var R,D=this,K=D.s,G=D.e;return G===null?K?(R="Infinity",K<0&&(R="-"+R)):R="NaN":(T==null?R=G<=q||G>=j?O(A(D.c),G):S(A(D.c),G,"0"):T===10&&X?(D=ae(new y(D),ee+G+1,F),R=S(A(D.c),D.e,"0")):(B(T,2,H.length,"Base"),R=$(S(A(D.c),G,"0"),10,T,K,!0)),K<0&&D.c[0]&&(R="-"+R)),R},M.valueOf=M.toJSON=function(){return le(this)},M._isBigNumber=!0,k!=null&&y.set(k),y}function E(k){var P=k|0;return k>0||k===P?P:P-1}function A(k){for(var P,$,ie=1,M=k.length,W=k[0]+"";ie<M;){for(P=k[ie++]+"",$=l-P.length;$--;P="0"+P);W+=P}for(M=W.length;W.charCodeAt(--M)===48;);return W.slice(0,M+1||1)}function U(k,P){var $,ie,M=k.c,W=P.c,ee=k.s,F=P.s,q=k.e,j=P.e;if(!ee||!F)return null;if($=M&&!M[0],ie=W&&!W[0],$||ie)return $?ie?0:-F:ee;if(ee!=F)return ee;if($=ee<0,ie=q==j,!M||!W)return ie?0:!M^$?1:-1;if(!ie)return q>j^$?1:-1;for(F=(q=M.length)<(j=W.length)?q:j,ee=0;ee<F;ee++)if(M[ee]!=W[ee])return M[ee]>W[ee]^$?1:-1;return q==j?0:q>j^$?1:-1}function B(k,P,$,ie){if(k<P||k>$||k!==s(k))throw Error(c+(ie||"Argument")+(typeof k=="number"?k<P||k>$?" out of range: ":" not an integer: ":" not a primitive number: ")+String(k))}function C(k){var P=k.c.length-1;return E(k.e/l)==P&&k.c[P]%2!=0}function O(k,P){return(k.length>1?k.charAt(0)+"."+k.slice(1):k)+(P<0?"e":"e+")+P}function S(k,P,$){var ie,M;if(P<0){for(M=$+".";++P;M+=$);k=M+k}else if(ie=k.length,++P>ie){for(M=$,P-=ie;--P;M+=$);k+=M}else P<ie&&(k=k.slice(0,P)+"."+k.slice(P));return k}r=d(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(ve)})(Pa);var An=Pa.exports,pf=function(e,r,n){var i=new e.Uint8Array(n),s=r.pushInt,c=r.pushInt32,a=r.pushInt32Neg,h=r.pushInt64,l=r.pushInt64Neg,p=r.pushFloat,w=r.pushFloatSingle,_=r.pushFloatDouble,m=r.pushTrue,d=r.pushFalse,E=r.pushUndefined,A=r.pushNull,U=r.pushInfinity,B=r.pushInfinityNeg,C=r.pushNaN,O=r.pushNaNNeg,S=r.pushArrayStart,k=r.pushArrayStartFixed,P=r.pushArrayStartFixed32,$=r.pushArrayStartFixed64,ie=r.pushObjectStart,M=r.pushObjectStartFixed,W=r.pushObjectStartFixed32,ee=r.pushObjectStartFixed64,F=r.pushByteString,q=r.pushByteStringStart,j=r.pushUtf8String,V=r.pushUtf8StringStart,re=r.pushSimpleUnassigned,se=r.pushTagStart,oe=r.pushTagStart4,de=r.pushTagStart8,Z=r.pushTagUnassigned,H=r.pushBreak,X=e.Math.pow,y=0,ce=0,fe=0;function pe(L){for(L=L|0,y=0,ce=L;(y|0)<(ce|0)&&(fe=V1[i[y]&255](i[y]|0)|0,!((fe|0)>0)););return fe|0}function ae(L){return L=L|0,((y|0)+(L|0)|0)<(ce|0)?0:1}function le(L){return L=L|0,i[L|0]<<8|i[L+1|0]|0}function T(L){return L=L|0,i[L|0]<<24|i[L+1|0]<<16|i[L+2|0]<<8|i[L+3|0]|0}function R(L){return L=L|0,s(L|0),y=y+1|0,0}function D(L){return L=L|0,ae(1)|0?1:(s(i[y+1|0]|0),y=y+2|0,0)}function K(L){return L=L|0,ae(2)|0?1:(s(le(y+1|0)|0),y=y+3|0,0)}function G(L){return L=L|0,ae(4)|0?1:(c(le(y+1|0)|0,le(y+3|0)|0),y=y+5|0,0)}function Q(L){return L=L|0,ae(8)|0?1:(h(le(y+1|0)|0,le(y+3|0)|0,le(y+5|0)|0,le(y+7|0)|0),y=y+9|0,0)}function g(L){return L=L|0,s(-1-(L-32|0)|0),y=y+1|0,0}function o(L){return L=L|0,ae(1)|0?1:(s(-1-(i[y+1|0]|0)|0),y=y+2|0,0)}function u(L){L=L|0;var Ne=0;return ae(2)|0?1:(Ne=le(y+1|0)|0,s(-1-(Ne|0)|0),y=y+3|0,0)}function v(L){return L=L|0,ae(4)|0?1:(a(le(y+1|0)|0,le(y+3|0)|0),y=y+5|0,0)}function N(L){return L=L|0,ae(8)|0?1:(l(le(y+1|0)|0,le(y+3|0)|0,le(y+5|0)|0,le(y+7|0)|0),y=y+9|0,0)}function z(L){L=L|0;var Ne=0,Re=0,Te=0;return Te=L-64|0,ae(Te|0)|0?1:(Ne=y+1|0,Re=(y+1|0)+(Te|0)|0,F(Ne|0,Re|0),y=Re|0,0)}function J(L){L=L|0;var Ne=0,Re=0,Te=0;return ae(1)|0||(Te=i[y+1|0]|0,Ne=y+2|0,Re=(y+2|0)+(Te|0)|0,ae(Te+1|0)|0)?1:(F(Ne|0,Re|0),y=Re|0,0)}function ue(L){L=L|0;var Ne=0,Re=0,Te=0;return ae(2)|0||(Te=le(y+1|0)|0,Ne=y+3|0,Re=(y+3|0)+(Te|0)|0,ae(Te+2|0)|0)?1:(F(Ne|0,Re|0),y=Re|0,0)}function he(L){L=L|0;var Ne=0,Re=0,Te=0;return ae(4)|0||(Te=T(y+1|0)|0,Ne=y+5|0,Re=(y+5|0)+(Te|0)|0,ae(Te+4|0)|0)?1:(F(Ne|0,Re|0),y=Re|0,0)}function xe(L){return L=L|0,1}function we(L){return L=L|0,q(),y=y+1|0,0}function b(L){L=L|0;var Ne=0,Re=0,Te=0;return Te=L-96|0,ae(Te|0)|0?1:(Ne=y+1|0,Re=(y+1|0)+(Te|0)|0,j(Ne|0,Re|0),y=Re|0,0)}function f(L){L=L|0;var Ne=0,Re=0,Te=0;return ae(1)|0||(Te=i[y+1|0]|0,Ne=y+2|0,Re=(y+2|0)+(Te|0)|0,ae(Te+1|0)|0)?1:(j(Ne|0,Re|0),y=Re|0,0)}function x(L){L=L|0;var Ne=0,Re=0,Te=0;return ae(2)|0||(Te=le(y+1|0)|0,Ne=y+3|0,Re=(y+3|0)+(Te|0)|0,ae(Te+2|0)|0)?1:(j(Ne|0,Re|0),y=Re|0,0)}function I(L){L=L|0;var Ne=0,Re=0,Te=0;return ae(4)|0||(Te=T(y+1|0)|0,Ne=y+5|0,Re=(y+5|0)+(Te|0)|0,ae(Te+4|0)|0)?1:(j(Ne|0,Re|0),y=Re|0,0)}function Y(L){return L=L|0,1}function te(L){return L=L|0,V(),y=y+1|0,0}function ne(L){return L=L|0,k(L-128|0),y=y+1|0,0}function be(L){return L=L|0,ae(1)|0?1:(k(i[y+1|0]|0),y=y+2|0,0)}function Ce(L){return L=L|0,ae(2)|0?1:(k(le(y+1|0)|0),y=y+3|0,0)}function _e(L){return L=L|0,ae(4)|0?1:(P(le(y+1|0)|0,le(y+3|0)|0),y=y+5|0,0)}function me(L){return L=L|0,ae(8)|0?1:($(le(y+1|0)|0,le(y+3|0)|0,le(y+5|0)|0,le(y+7|0)|0),y=y+9|0,0)}function Oe(L){return L=L|0,S(),y=y+1|0,0}function Pe(L){L=L|0;var Ne=0;return Ne=L-160|0,ae(Ne|0)|0?1:(M(Ne|0),y=y+1|0,0)}function S0(L){return L=L|0,ae(1)|0?1:(M(i[y+1|0]|0),y=y+2|0,0)}function Rs(L){return L=L|0,ae(2)|0?1:(M(le(y+1|0)|0),y=y+3|0,0)}function N0(L){return L=L|0,ae(4)|0?1:(W(le(y+1|0)|0,le(y+3|0)|0),y=y+5|0,0)}function Os(L){return L=L|0,ae(8)|0?1:(ee(le(y+1|0)|0,le(y+3|0)|0,le(y+5|0)|0,le(y+7|0)|0),y=y+9|0,0)}function Ms(L){return L=L|0,ie(),y=y+1|0,0}function yr(L){return L=L|0,se(L-192|0|0),y=y+1|0,0}function Us(L){return L=L|0,se(L|0),y=y+1|0,0}function Nu(L){return L=L|0,se(L|0),y=y+1|0,0}function Ru(L){return L=L|0,se(L|0),y=y+1|0,0}function Is(L){return L=L|0,se(L|0),y=y+1|0,0}function Ge(L){return L=L|0,se(L-192|0|0),y=y+1|0,0}function ks(L){return L=L|0,se(L|0),y=y+1|0,0}function ht(L){return L=L|0,se(L|0),y=y+1|0,0}function Wt(L){return L=L|0,se(L|0),y=y+1|0,0}function R0(L){return L=L|0,ae(1)|0?1:(se(i[y+1|0]|0),y=y+2|0,0)}function Ps(L){return L=L|0,ae(2)|0?1:(se(le(y+1|0)|0),y=y+3|0,0)}function M1(L){return L=L|0,ae(4)|0?1:(oe(le(y+1|0)|0,le(y+3|0)|0),y=y+5|0,0)}function U1(L){return L=L|0,ae(8)|0?1:(de(le(y+1|0)|0,le(y+3|0)|0,le(y+5|0)|0,le(y+7|0)|0),y=y+9|0,0)}function We(L){return L=L|0,re((L|0)-224|0),y=y+1|0,0}function I1(L){return L=L|0,d(),y=y+1|0,0}function k1(L){return L=L|0,m(),y=y+1|0,0}function P1(L){return L=L|0,A(),y=y+1|0,0}function D1(L){return L=L|0,E(),y=y+1|0,0}function z1(L){return L=L|0,ae(1)|0?1:(re(i[y+1|0]|0),y=y+2|0,0)}function j1(L){L=L|0;var Ne=0,Re=0,Te=1,O0=0,pn=0,ax=0;return ae(2)|0?1:(Ne=i[y+1|0]|0,Re=i[y+2|0]|0,(Ne|0)&128&&(Te=-1),O0=+(((Ne|0)&124)>>2),pn=+(((Ne|0)&3)<<8|Re),+O0==0?p(+(+Te*5960464477539063e-23*+pn)):+O0==31?+Te==1?+pn>0?C():U():+pn>0?O():B():p(+(+Te*X(2,+(+O0-25))*+(1024+pn))),y=y+3|0,0)}function q1(L){return L=L|0,ae(4)|0?1:(w(i[y+1|0]|0,i[y+2|0]|0,i[y+3|0]|0,i[y+4|0]|0),y=y+5|0,0)}function H1(L){return L=L|0,ae(8)|0?1:(_(i[y+1|0]|0,i[y+2|0]|0,i[y+3|0]|0,i[y+4|0]|0,i[y+5|0]|0,i[y+6|0]|0,i[y+7|0]|0,i[y+8|0]|0),y=y+9|0,0)}function ke(L){return L=L|0,1}function $1(L){return L=L|0,H(),y=y+1|0,0}var V1=[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,D,K,G,Q,ke,ke,ke,ke,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,o,u,v,N,ke,ke,ke,ke,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,J,ue,he,xe,ke,ke,ke,we,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,f,x,I,Y,ke,ke,ke,te,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,be,Ce,_e,me,ke,ke,ke,Oe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,S0,Rs,N0,Os,ke,ke,ke,Ms,yr,yr,yr,yr,yr,yr,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,Ge,R0,Ps,M1,U1,ke,ke,ke,ke,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,We,I1,k1,P1,D1,z1,j1,q1,H1,ke,ke,ke,$1];return{parse:pe}},Cn={},nt={};const L0=An.BigNumber;nt.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},nt.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},nt.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},nt.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},nt.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},nt.SHIFT32=Math.pow(2,32),nt.SHIFT16=Math.pow(2,16),nt.MAX_SAFE_HIGH=2097151,nt.NEG_ONE=new L0(-1),nt.TEN=new L0(10),nt.TWO=new L0(2),nt.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5},function(t){const{Buffer:e}=Xr,r=An.BigNumber,n=nt,i=n.SHIFT32,s=n.SHIFT16,c=2097151;t.parseHalf=function(l){var p,w,_;return _=l[0]&128?-1:1,p=(l[0]&124)>>2,w=(l[0]&3)<<8|l[1],p?p===31?_*(w?0/0:1/0):_*Math.pow(2,p-25)*(1024+w):_*5960464477539063e-23*w};function a(h){return h<16?"0"+h.toString(16):h.toString(16)}t.arrayBufferToBignumber=function(h){const l=h.byteLength;let p="";for(let w=0;w<l;w++)p+=a(h[w]);return new r(p,16)},t.buildMap=h=>{const l=new Map,p=Object.keys(h),w=p.length;for(let _=0;_<w;_++)l.set(p[_],h[p[_]]);return l},t.buildInt32=(h,l)=>h*s+l,t.buildInt64=(h,l,p,w)=>{const _=t.buildInt32(h,l),m=t.buildInt32(p,w);return _>c?new r(_).times(i).plus(m):_*i+m},t.writeHalf=function(l,p){const w=e.allocUnsafe(4);w.writeFloatBE(p,0);const _=w.readUInt32BE(0);if(_&8191)return!1;var m=_>>16&32768;const d=_>>23&255,E=_&8388607;if(d>=113&&d<=142)m+=(d-112<<10)+(E>>13);else if(d>=103&&d<113){if(E&(1<<126-d)-1)return!1;m+=E+8388608>>126-d}else return!1;return l.writeUInt16BE(m,0),!0},t.keySorter=function(h,l){var p=h[0].byteLength,w=l[0].byteLength;return p>w?1:w>p?-1:h[0].compare(l[0])},t.isNegativeZero=h=>h===0&&1/h<0,t.nextPowerOf2=h=>{let l=0;if(h&&!(h&h-1))return h;for(;h!==0;)h>>=1,l+=1;return 1<<l}}(Cn);const K0=nt,yf=K0.MT,Fn=K0.SIMPLE,Y0=K0.SYMS;var Da=class Ds{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,yf.SIMPLE_FLOAT)}static isSimple(e){return e instanceof Ds}static decode(e,r){switch(r==null&&(r=!0),e){case Fn.FALSE:return!1;case Fn.TRUE:return!0;case Fn.NULL:return r?null:Y0.NULL;case Fn.UNDEFINED:return r?void 0:Y0.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Y0.BREAK;default:return new Ds(e)}}},za=class zs{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=zs["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(zs,this.value)}catch(i){return r=i,this.err=r,this}}};const ja=self.location?self.location.protocol+"//"+self.location.host:"",Z0=self.URL;let gf=class{constructor(e="",r=ja){this.super=new Z0(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function wf(t){if(typeof t=="string")return new Z0(t).toString();if(!(t instanceof Z0)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",s=t.host||"",c=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),h=t.hash||"",l=t.pathname||"",p=t.path||l+a;return`${i}${e||r}${s||c+n}${p}${h}`}}var qa={URLWithLegacySupport:gf,URLSearchParams:self.URLSearchParams,defaultBase:ja,format:wf};const{URLWithLegacySupport:Ha,format:bf}=qa;var mf=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let s;try{s=new Ha(t)}catch{s={}}const c=Object.assign({},e,{protocol:i||s.protocol,host:e.host||s.host});return new Ha(t,bf(c)).toString()};const{URLWithLegacySupport:_f,format:Ef,URLSearchParams:vf,defaultBase:Bf}=qa;var $a={URL:_f,URLSearchParams:vf,format:Ef,relative:mf,defaultBase:Bf};const{Buffer:Ur}=Xr,Va=Yr,Af=An.BigNumber,Cf=pf,at=Cn,Ue=nt,Ff=Da,Tf=za,{URL:Sf}=$a;let Q0=class js{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=at.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Ur.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>at.arrayBufferToBignumber(r),3:r=>Ue.NEG_ONE.minus(at.arrayBufferToBignumber(r)),4:r=>Ue.TEN.pow(r[0]).times(r[1]),5:r=>Ue.TWO.pow(r[0]).times(r[1]),32:r=>new Sf(r),35:r=>new RegExp(r)},e.tags),this.parser=Cf(globalThis,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Ue.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Ue.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Ue.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Ue.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Ue.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Ue.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Ue.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case Ue.PARENT.ARRAY:case Ue.PARENT.BYTE_STRING:case Ue.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Ue.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Ue.PARENT.MAP,n.ref=at.buildMap(n.ref)));break;case Ue.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Ue.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Ue.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new Tf(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return Ur.concat(e)}createByteStringFromHeap(e,r){return e===r?Ur.alloc(0):Ur.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return at.buildInt32(e,r)}createInt64(e,r,n,i){return at.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return Va.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,s,c,a,h){return Va.read([e,r,n,i,s,c,a,h],0,!1,52,8)}createInt32Neg(e,r){return-1-at.buildInt32(e,r)}createInt64Neg(e,r,n,i){const s=at.buildInt32(e,r),c=at.buildInt32(n,i);return s>Ue.MAX_SAFE_HIGH?Ue.NEG_ONE.minus(new Af(s).times(Ue.SHIFT32).plus(c)):-1-(s*Ue.SHIFT32+c)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new Ff(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,s,c,a,h){this._push(this.createFloatDouble(e,r,n,i,s,c,a,h))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Ue.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=at.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const s=at.buildInt64(e,r,n,i);this._createArrayStartFixed(s)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=at.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const s=at.buildInt64(e,r,n,i);this._createObjectStartFixed(s)}pushByteStringStart(){this._parents[this._depth]={type:Ue.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Ue.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Ue.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(at.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(at.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Ue.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Ue.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=Ur.from(e,r||"hex")),new js({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=Ur.from(e,r||"hex")),new js({size:e.length}).decodeAll(e)}};Q0.decodeFirst=Q0.decode;var Ga=Q0;const{Buffer:X0}=Xr,Nf=Ga,Rf=Cn;class J0 extends Nf{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return Rf.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,s,c,a,h){return`${super.createFloatDouble(e,r,n,i,s,c,a,h)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${X0.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(Wa(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(Wa(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${X0.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=X0.from(e,r||"hex")),new J0().decodeFirst(e)}}var Of=J0;function Wa(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:Rt}=Xr,{URL:Mf}=$a,ei=An.BigNumber,ti=Cn,Ke=nt,mt=Ke.MT,Tn=Ke.NUMBYTES,La=Ke.SHIFT32,Ka=Ke.SYMS,Ir=Ke.TAG,Uf=Ke.MT.SIMPLE_FLOAT<<5|Ke.NUMBYTES.TWO,If=Ke.MT.SIMPLE_FLOAT<<5|Ke.NUMBYTES.FOUR,kf=Ke.MT.SIMPLE_FLOAT<<5|Ke.NUMBYTES.EIGHT,Pf=Ke.MT.SIMPLE_FLOAT<<5|Ke.SIMPLE.TRUE,Df=Ke.MT.SIMPLE_FLOAT<<5|Ke.SIMPLE.FALSE,zf=Ke.MT.SIMPLE_FLOAT<<5|Ke.SIMPLE.UNDEFINED,Ya=Ke.MT.SIMPLE_FLOAT<<5|Ke.SIMPLE.NULL,jf=new ei("0x20000000000000"),qf=Rt.from("f97e00","hex"),Hf=Rt.from("f9fc00","hex"),$f=Rt.from("f97c00","hex");function Vf(t){return{}.toString.call(t).slice(8,-1)}class Sn{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[Mf,this._pushUrl],[ei,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const c=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,c}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(qf)}_pushInfinity(e){const r=e<0?Hf:$f;return this.push(r)}_pushFloat(e){const r=Rt.allocUnsafe(2);if(ti.writeHalf(r,e)&&ti.parseHalf(r)===e)return this._pushUInt8(Uf)&&this.push(r);const n=Rt.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(If)&&this.push(n):this._pushUInt8(kf)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|Tn.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|Tn.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|Tn.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|Tn.EIGHT)&&this._pushUInt32BE(Math.floor(e/La))&&this._pushUInt32BE(e%La):r===mt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,mt.NEG_INT,e):this._pushInt(e,mt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=Rt.byteLength(e,"utf8");return this._pushInt(r,mt.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?Pf:Df)}_pushUndefined(e){return this._pushUInt8(zf)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,mt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,mt.TAG)}_pushDate(e,r){return e._pushTag(Ir.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,mt.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(Ir.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,mt.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(Ir.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=Ir.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=Ir.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=Rt.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(Ir.DECIMAL_FRAC)&&e._pushInt(2,mt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new ei(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(jf)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,mt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Ya);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var s=Object.keys(e),c=s.length;return this._pushInt(c,mt.MAP)?this._pushRawMap(c,s.map(a=>[a,e[a]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=Sn.encode(i[0]),i}).sort(ti.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=Vf(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Rt.isBuffer(e)?e:Rt.from(e));case"Null":return this._pushUInt8(Ya);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Ka.NULL:return this._pushObject(null);case Ka.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,s=0,c=0;c<i;c++)s+=r[c];var a=Rt.allocUnsafe(s),h=0,l=0;for(c=0;c<i;c++){switch(l=r[c],n[c]){case 0:e[c].copy(a,h);break;case 1:a.writeUInt8(e[c],h,!0);break;case 2:a.writeUInt16BE(e[c],h,!0);break;case 3:a.writeUInt32BE(e[c],h,!0);break;case 4:a.writeDoubleBE(e[c],h,!0);break;case 5:a.write(e[c],h,l,"utf8");break;default:throw new Error("unkown method")}h+=l}var p=a;return this._reset(),p}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new Sn;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var Gf=Sn;(function(t){t.Diagnose=Of,t.Decoder=Ga,t.Encoder=Gf,t.Simple=Da,t.Tagged=za,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(ka);const Za=qs(ka);function _t(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function tt(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const Wf=new RegExp(/^[0-9a-fA-F]+$/);function Pt(t){if(!Wf.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function Qa(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function Nn(t,e){return Qa(t,e)===0}function Jr(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function ri(t){return t instanceof Uint8Array?Jr(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Jr(new Uint8Array(t)):"buffer"in t?ri(t.buffer):Jr(new Uint8Array(t))}function Et(t){return Jr(z0.create().update(new Uint8Array(t)).digest())}function Rn(t){if(t instanceof Za.Tagged)return Rn(t.value);if(typeof t=="string")return Xa(t);if(typeof t=="number")return Et(ze(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return Et(t);if(Array.isArray(t)){const e=t.map(Rn);return Et(_t(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return Et(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return Rn(t.toHash());if(typeof t=="object")return On(t);if(typeof t=="bigint")return Et(ze(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const Xa=t=>{const e=new TextEncoder().encode(t);return Et(e)};function en(t){return On(t)}function On(t){const n=Object.entries(t).filter(([,c])=>c!==void 0).map(([c,a])=>{const h=Xa(c),l=Rn(a);return[h,l]}).sort(([c],[a])=>Qa(c,a)),i=_t(...n.map(c=>_t(...c)));return Et(i)}var Lf=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const Kf=new TextEncoder().encode(`
ic-request`);class ni{getPrincipal(){return this._principal||(this._principal=Ee.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(e){const{body:r}=e,n=Lf(e,["body"]),i=await en(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(_t(Kf,i))}})}}class kr{getPrincipal(){return Ee.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var ft={},Pr={},Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});const Yf=9007199254740992;function Dt(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((i,s)=>i+s.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const i of e)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function vt(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(t<<5)+e].concat(r.match(/../g).map(s=>parseInt(s,16)));return new Uint8Array(i).buffer}function Mn(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return vt(t,r,e.toString(16))}}function Ja(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Dt(new Uint8Array(Mn(3,t.length)),new Uint8Array(e))}function Zf(t,e){if(t==14277111)return Dt(new Uint8Array([217,217,247]),e);if(t<24)return Dt(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),i=t.toString(16).slice(-n*2).padStart(n*2,"0"),s=[192+r].concat(i.match(/../g).map(c=>parseInt(c,16)));return new Uint8Array(s).buffer}}Ie.tagged=Zf;function tn(t){return new Uint8Array(t).buffer}Ie.raw=tn;function ii(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}Ie.uSmall=ii;function eo(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),vt(0,24,t)}Ie.u8=eo;function to(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),vt(0,25,t)}Ie.u16=to;function ro(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),vt(0,26,t)}Ie.u32=ro;function si(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return vt(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),Yf),t=t.toString(16),vt(0,27,t)}Ie.u64=si;function no(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return ii(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}Ie.iSmall=no;function io(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),vt(1,24,t)}Ie.i8=io;function so(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),vt(1,25,t)}Ie.i16=so;function ao(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),vt(1,26,t)}Ie.i32=ao;function oo(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((i,s)=>{if(r)return s+i;let c=parseInt(s,16)-1;return c>=0?(r=!0,c.toString(16)+i):"f"+i},"");return r?vt(1,27,n):si(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),vt(1,27,t)}Ie.i64=oo;function Qf(t){return t>=0?t<24?ii(t):t<=255?eo(t):t<=65535?to(t):t<=4294967295?ro(t):si(t):t>=-24?no(t):t>=-255?io(t):t>=-65535?so(t):t>=-4294967295?ao(t):oo(t)}Ie.number=Qf;function Xf(t){return Dt(Mn(2,t.byteLength),t)}Ie.bytes=Xf;function Jf(t){return Ja(t)}Ie.string=Jf;function el(t){return Dt(Mn(4,t.length),...t)}Ie.array=el;function tl(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[i])=>n.localeCompare(i))),Dt(Mn(5,t.size),...r.map(([n,i])=>Dt(Ja(n),i)))}Ie.map=tl;function rl(t){const e=new Float32Array([t]);return Dt(new Uint8Array([224+26]),new Uint8Array(e.buffer))}Ie.singleFloat=rl;function nl(t){const e=new Float64Array([t]);return Dt(new Uint8Array([224+27]),new Uint8Array(e.buffer))}Ie.doubleFloat=nl;function il(t){return t?co():uo()}Ie.bool=il;function co(){return tn(new Uint8Array([224+21]))}Ie.true_=co;function uo(){return tn(new Uint8Array([224+20]))}Ie.false_=uo;function sl(){return tn(new Uint8Array([224+22]))}Ie.null_=sl;function al(){return tn(new Uint8Array([224+23]))}Ie.undefined_=al;var ol=ve&&ve.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Pr,"__esModule",{value:!0});const Bt=ol(Ie),cl=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class fo{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return Bt.undefined_();case"boolean":return Bt.bool(e);case"number":return Math.floor(e)===e?Bt.number(e):Bt.doubleFloat(e);case"string":return Bt.string(e);case"object":if(e===null)return Bt.null_();if(Array.isArray(e))return Bt.array(e.map(r=>this._serializer.serializeValue(r)));if(cl.find(r=>e instanceof r))return Bt.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,i]of e.entries())r.set(n,this._serializer.serializeValue(i));return Bt.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(e))r.set(n,this._serializer.serializeValue(i));return Bt.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Pr.JsonDefaultCborEncoder=fo;class lo{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}Pr.ToCborEncoder=lo;class ho{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new fo(r,e)),r.addEncoder(new lo),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}Pr.CborSerializer=ho;class ul extends ho{serialize(e){return Bt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}Pr.SelfDescribeCborSerializer=ul,function(t){function e(i){for(var s in i)t.hasOwnProperty(s)||(t[s]=i[s])}var r=ve&&ve.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var c in i)Object.hasOwnProperty.call(i,c)&&(s[c]=i[c]);return s.default=i,s};Object.defineProperty(t,"__esModule",{value:!0}),e(Pr);const n=r(Ie);t.value=n}(ft);class fl{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return ft.value.bytes(e.toUint8Array())}}class ll{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return ft.value.bytes(new Uint8Array(e))}}class dl{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?ft.value.tagged(2,ft.value.bytes(Pt(e.toString(16)))):ft.value.tagged(3,ft.value.bytes(Pt((BigInt("-1")*e).toString(16))))}}const Un=ft.SelfDescribeCborSerializer.withDefaultEncoders(!0);Un.addEncoder(new fl),Un.addEncoder(new ll),Un.addEncoder(new dl);var ai;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(ai||(ai={}));function oi(t){return Un.serialize(t)}function xo(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class hl extends Za.Decoder{createByteString(e){return _t(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function zt(t){const e=new Uint8Array(t),r=new hl({size:e.byteLength,tags:{2:n=>xo(n),3:n=>-xo(n),[ai.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${tt(e)}`)}}const In=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var ci;(function(t){t.Call="call"})(ci||(ci={}));function ui(){const t=new ArrayBuffer(16),e=new DataView(t),r=In(),n=In(),i=In(),s=In();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,s),t}const xl=BigInt(1e6),pl=60*1e3;class kn{constructor(e){const s=BigInt(Math.floor(Date.now()+e-pl))*xl/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=s}toCBOR(){return ft.value.u64(this._value.toString(16),16)}toHash(){return ze(this._value)}}function po(t=ui){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function Pn(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class yo extends ut{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const go=BigInt(0),fi=BigInt(1),yl=BigInt(2);function Dn(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function er(t){if(!Dn(t))throw new Error("Uint8Array expected")}function rn(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)}const gl=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _r(t){er(t);let e="";for(let r=0;r<t.length;r++)e+=gl[t[r]];return e}function wo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const jt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function bo(t){if(t>=jt._0&&t<=jt._9)return t-jt._0;if(t>=jt._A&&t<=jt._F)return t-(jt._A-10);if(t>=jt._a&&t<=jt._f)return t-(jt._a-10)}function mo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const c=bo(t.charCodeAt(s)),a=bo(t.charCodeAt(s+1));if(c===void 0||a===void 0){const h=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+s)}n[i]=c*16+a}return n}function At(t){return wo(_r(t))}function nn(t){return er(t),wo(_r(Uint8Array.from(t).reverse()))}function rt(t,e){return mo(t.toString(16).padStart(e*2,"0"))}function zn(t,e){return rt(t,e).reverse()}function lt(t,e,r){let n;if(typeof e=="string")try{n=mo(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Dn(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function Ve(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];er(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function li(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}const di=t=>typeof t=="bigint"&&go<=t;function _o(t,e,r){return di(t)&&di(e)&&di(r)&&e<=t&&t<r}function tr(t,e,r,n){if(!_o(e,r,n))throw new Error(`expected valid ${t}: ${r} <= n < ${n}, got ${typeof e} ${e}`)}function jn(t){let e;for(e=0;t>go;t>>=fi,e+=1);return e}function wl(t,e){return t>>BigInt(e)&fi}const qn=t=>(yl<<BigInt(t-1))-fi,bl={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Dn(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function sn(t,e,r={}){const n=(i,s,c)=>{const a=bl[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const h=t[i];if(!(c&&h===void 0)&&!a(h,t))throw new Error(`Invalid param ${String(i)}=${h} (${typeof h}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Eo=()=>{throw new Error("not implemented")};function an(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xe=BigInt(0),De=BigInt(1),rr=BigInt(2),ml=BigInt(3),hi=BigInt(4),vo=BigInt(5),Bo=BigInt(8);BigInt(9),BigInt(16);function je(t,e){const r=t%e;return r>=Xe?r:e+r}function _l(t,e,r){if(r<=Xe||e<Xe)throw new Error("Expected power/modulo > 0");if(r===De)return Xe;let n=De;for(;e>Xe;)e&De&&(n=n*t%r),t=t*t%r,e>>=De;return n}function Ot(t,e,r){let n=t;for(;e-- >Xe;)n*=n,n%=r;return n}function Ao(t,e){if(t===Xe||e<=Xe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=je(t,e),n=e,i=Xe,s=De;for(;r!==Xe;){const a=n/r,h=n%r,l=i-s*a;n=r,r=h,i=s,s=l}if(n!==De)throw new Error("invert: does not exist");return je(i,e)}function El(t){const e=(t-De)/rr;let r,n,i;for(r=t-De,n=0;r%rr===Xe;r/=rr,n++);for(i=rr;i<t&&_l(i,e,t)!==t-De;i++);if(n===1){const c=(t+De)/hi;return function(h,l){const p=h.pow(l,c);if(!h.eql(h.sqr(p),l))throw new Error("Cannot find square root");return p}}const s=(r+De)/rr;return function(a,h){if(a.pow(h,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,p=a.pow(a.mul(a.ONE,i),r),w=a.pow(h,s),_=a.pow(h,r);for(;!a.eql(_,a.ONE);){if(a.eql(_,a.ZERO))return a.ZERO;let m=1;for(let E=a.sqr(_);m<l&&!a.eql(E,a.ONE);m++)E=a.sqr(E);const d=a.pow(p,De<<BigInt(l-m-1));p=a.sqr(d),w=a.mul(w,d),_=a.mul(_,p),l=m}return w}}function vl(t){if(t%hi===ml){const e=(t+De)/hi;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Bo===vo){const e=(t-vo)/Bo;return function(n,i){const s=n.mul(i,rr),c=n.pow(s,e),a=n.mul(i,c),h=n.mul(n.mul(a,rr),c),l=n.mul(a,n.sub(h,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return El(t)}const Bl=(t,e)=>(je(t,e)&De)===De,Al=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Co(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Al.reduce((n,i)=>(n[i]="function",n),e);return sn(t,r)}function Hn(t,e,r){if(r<Xe)throw new Error("Expected power > 0");if(r===Xe)return t.ONE;if(r===De)return e;let n=t.ONE,i=e;for(;r>Xe;)r&De&&(n=t.mul(n,i)),i=t.sqr(i),r>>=De;return n}function $n(t,e){const r=new Array(e.length),n=e.reduce((s,c,a)=>t.is0(c)?s:(r[a]=s,t.mul(s,c)),t.ONE),i=t.inv(n);return e.reduceRight((s,c,a)=>t.is0(c)?s:(r[a]=t.mul(s,r[a]),t.mul(s,c)),i),r}function Cl(t){const e=(t-De)/rr;return(r,n)=>r.pow(n,e)}function Fo(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function xi(t,e,r=!1,n={}){if(t<=Xe)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Fo(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=vl(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:qn(i),ZERO:Xe,ONE:De,create:h=>je(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return Xe<=h&&h<t},is0:h=>h===Xe,isOdd:h=>(h&De)===De,neg:h=>je(-h,t),eql:(h,l)=>h===l,sqr:h=>je(h*h,t),add:(h,l)=>je(h+l,t),sub:(h,l)=>je(h-l,t),mul:(h,l)=>je(h*l,t),pow:(h,l)=>Hn(a,h,l),div:(h,l)=>je(h*Ao(l,t),t),sqrN:h=>h*h,addN:(h,l)=>h+l,subN:(h,l)=>h-l,mulN:(h,l)=>h*l,inv:h=>Ao(h,t),sqrt:n.sqrt||(h=>c(a,h)),invertBatch:h=>$n(a,h),cmov:(h,l,p)=>p?l:h,toBytes:h=>r?zn(h,s):rt(h,s),fromBytes:h=>{if(h.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${h.length}`);return r?nn(h):At(h)}});return Object.freeze(a)}function To(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function So(t){const e=To(t);return e+Math.ceil(e/2)}function Fl(t,e,r=!1){const n=t.length,i=To(e),s=So(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const c=r?At(t):nn(t),a=je(c,e-De)+De;return r?zn(a,i):rt(a,i)}const Tl=At;function nr(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function Sl(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function pi(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Nl(t,e,r,n){er(t),er(e),pi(r),e.length>255&&(e=n(Ve(li("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=n,c=Math.ceil(r/i);if(c>255)throw new Error("Invalid xmd length");const a=Ve(e,nr(e.length,1)),h=nr(0,s),l=nr(r,2),p=new Array(c),w=n(Ve(h,t,l,nr(0,1),a));p[0]=n(Ve(w,nr(1,1),a));for(let m=1;m<=c;m++){const d=[Sl(w,p[m-1]),nr(m+1,1),a];p[m]=n(Ve(...d))}return Ve(...p).slice(0,r)}function Rl(t,e,r,n,i){if(er(t),er(e),pi(r),e.length>255){const s=Math.ceil(2*n/8);e=i.create({dkLen:s}).update(li("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(nr(r,2)).update(e).update(nr(e.length,1)).digest()}function No(t,e,r){sn(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:c,expand:a,DST:h}=r;er(t),pi(e);const l=typeof h=="string"?li(h):h,p=n.toString(2).length,w=Math.ceil((p+i)/8),_=e*s*w;let m;if(a==="xmd")m=Nl(t,l,_,c);else if(a==="xof")m=Rl(t,l,_,i,c);else if(a==="_internal_pass")m=t;else throw new Error('expand must be "xmd" or "xof"');const d=new Array(e);for(let E=0;E<e;E++){const A=new Array(s);for(let U=0;U<s;U++){const B=w*(U+E*s),C=m.subarray(B,B+w);A[U]=je(Tl(C),n)}d[E]=A}return d}function Ro(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,c,a,h]=r.map(l=>l.reduce((p,w)=>t.add(t.mul(p,n),w)));return n=t.div(s,c),i=t.mul(i,t.div(a,h)),{x:n,y:i}}}function Oo(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=No(n,2,{...r,DST:r.DST,...i}),c=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),h=c.add(a).clearCofactor();return h.assertValidity(),h},encodeToCurve(n,i){const s=No(n,1,{...r,DST:r.encodeDST,...i}),c=t.fromAffine(e(s[0])).clearCofactor();return c.assertValidity(),c},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const s of n)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);const i=t.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ol=BigInt(0),yi=BigInt(1),gi=new WeakMap,Mo=new WeakMap;function Uo(t,e){const r=(s,c)=>{const a=c.negate();return s?a:c},n=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>{n(s);const c=Math.ceil(e/s)+1,a=2**(s-1);return{windows:c,windowSize:a}};return{constTimeNegate:r,unsafeLadder(s,c){let a=t.ZERO,h=s;for(;c>Ol;)c&yi&&(a=a.add(h)),h=h.double(),c>>=yi;return a},precomputeWindow(s,c){const{windows:a,windowSize:h}=i(c),l=[];let p=s,w=p;for(let _=0;_<a;_++){w=p,l.push(w);for(let m=1;m<h;m++)w=w.add(p),l.push(w);p=w.double()}return l},wNAF(s,c,a){const{windows:h,windowSize:l}=i(s);let p=t.ZERO,w=t.BASE;const _=BigInt(2**s-1),m=2**s,d=BigInt(s);for(let E=0;E<h;E++){const A=E*l;let U=Number(a&_);a>>=d,U>l&&(U-=m,a+=yi);const B=A,C=A+Math.abs(U)-1,O=E%2!==0,S=U<0;U===0?w=w.add(r(O,c[B])):p=p.add(r(S,c[C]))}return{p,f:w}},wNAFCached(s,c,a){const h=Mo.get(s)||1;let l=gi.get(s);return l||(l=this.precomputeWindow(s,h),h!==1&&gi.set(s,a(l))),this.wNAF(h,l,c)},setWindowSize(s,c){n(c),Mo.set(s,c),gi.delete(s)}}}function Io(t){return Co(t.Fp),sn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fo(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ml(t){const e=Io(t);sn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const Er=BigInt(0),$e=BigInt(1),ir=BigInt(2),Vn=BigInt(3),ko=BigInt(4);function Po(t){const e=Ml(t),{Fp:r}=e,n=e.toBytes||((d,E,A)=>{const U=E.toAffine();return Ve(Uint8Array.from([4]),r.toBytes(U.x),r.toBytes(U.y))}),i=e.fromBytes||(d=>{const E=d.subarray(1),A=r.fromBytes(E.subarray(0,r.BYTES)),U=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:A,y:U}});function s(d){const{a:E,b:A}=e,U=r.sqr(d),B=r.mul(U,d);return r.add(r.add(B,r.mul(d,E)),A)}if(!r.eql(r.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function c(d){return _o(d,$e,e.n)}function a(d){const{allowedPrivateKeyLengths:E,nByteLength:A,wrapPrivateKey:U,n:B}=e;if(E&&typeof d!="bigint"){if(Dn(d)&&(d=_r(d)),typeof d!="string"||!E.includes(d.length))throw new Error("Invalid key");d=d.padStart(A*2,"0")}let C;try{C=typeof d=="bigint"?d:At(lt("private key",d,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof d}`)}return U&&(C=je(C,B)),tr("private key",C,$e,B),C}function h(d){if(!(d instanceof w))throw new Error("ProjectivePoint expected")}const l=an((d,E)=>{const{px:A,py:U,pz:B}=d;if(r.eql(B,r.ONE))return{x:A,y:U};const C=d.is0();E==null&&(E=C?r.ONE:r.inv(B));const O=r.mul(A,E),S=r.mul(U,E),k=r.mul(B,E);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(k,r.ONE))throw new Error("invZ was invalid");return{x:O,y:S}}),p=an(d=>{if(d.is0()){if(e.allowInfinityPoint&&!r.is0(d.py))return;throw new Error("bad point: ZERO")}const{x:E,y:A}=d.toAffine();if(!r.isValid(E)||!r.isValid(A))throw new Error("bad point: x or y not FE");const U=r.sqr(A),B=s(E);if(!r.eql(U,B))throw new Error("bad point: equation left != right");if(!d.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class w{constructor(E,A,U){if(this.px=E,this.py=A,this.pz=U,E==null||!r.isValid(E))throw new Error("x required");if(A==null||!r.isValid(A))throw new Error("y required");if(U==null||!r.isValid(U))throw new Error("z required");Object.freeze(this)}static fromAffine(E){const{x:A,y:U}=E||{};if(!E||!r.isValid(A)||!r.isValid(U))throw new Error("invalid affine point");if(E instanceof w)throw new Error("projective point not allowed");const B=C=>r.eql(C,r.ZERO);return B(A)&&B(U)?w.ZERO:new w(A,U,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const A=r.invertBatch(E.map(U=>U.pz));return E.map((U,B)=>U.toAffine(A[B])).map(w.fromAffine)}static fromHex(E){const A=w.fromAffine(i(lt("pointHex",E)));return A.assertValidity(),A}static fromPrivateKey(E){return w.BASE.multiply(a(E))}_setWindowSize(E){m.setWindowSize(this,E)}assertValidity(){p(this)}hasEvenY(){const{y:E}=this.toAffine();if(r.isOdd)return!r.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);const{px:A,py:U,pz:B}=this,{px:C,py:O,pz:S}=E,k=r.eql(r.mul(A,S),r.mul(C,B)),P=r.eql(r.mul(U,S),r.mul(O,B));return k&&P}negate(){return new w(this.px,r.neg(this.py),this.pz)}double(){const{a:E,b:A}=e,U=r.mul(A,Vn),{px:B,py:C,pz:O}=this;let S=r.ZERO,k=r.ZERO,P=r.ZERO,$=r.mul(B,B),ie=r.mul(C,C),M=r.mul(O,O),W=r.mul(B,C);return W=r.add(W,W),P=r.mul(B,O),P=r.add(P,P),S=r.mul(E,P),k=r.mul(U,M),k=r.add(S,k),S=r.sub(ie,k),k=r.add(ie,k),k=r.mul(S,k),S=r.mul(W,S),P=r.mul(U,P),M=r.mul(E,M),W=r.sub($,M),W=r.mul(E,W),W=r.add(W,P),P=r.add($,$),$=r.add(P,$),$=r.add($,M),$=r.mul($,W),k=r.add(k,$),M=r.mul(C,O),M=r.add(M,M),$=r.mul(M,W),S=r.sub(S,$),P=r.mul(M,ie),P=r.add(P,P),P=r.add(P,P),new w(S,k,P)}add(E){h(E);const{px:A,py:U,pz:B}=this,{px:C,py:O,pz:S}=E;let k=r.ZERO,P=r.ZERO,$=r.ZERO;const ie=e.a,M=r.mul(e.b,Vn);let W=r.mul(A,C),ee=r.mul(U,O),F=r.mul(B,S),q=r.add(A,U),j=r.add(C,O);q=r.mul(q,j),j=r.add(W,ee),q=r.sub(q,j),j=r.add(A,B);let V=r.add(C,S);return j=r.mul(j,V),V=r.add(W,F),j=r.sub(j,V),V=r.add(U,B),k=r.add(O,S),V=r.mul(V,k),k=r.add(ee,F),V=r.sub(V,k),$=r.mul(ie,j),k=r.mul(M,F),$=r.add(k,$),k=r.sub(ee,$),$=r.add(ee,$),P=r.mul(k,$),ee=r.add(W,W),ee=r.add(ee,W),F=r.mul(ie,F),j=r.mul(M,j),ee=r.add(ee,F),F=r.sub(W,F),F=r.mul(ie,F),j=r.add(j,F),W=r.mul(ee,j),P=r.add(P,W),W=r.mul(V,j),k=r.mul(q,k),k=r.sub(k,W),W=r.mul(q,ee),$=r.mul(V,$),$=r.add($,W),new w(k,P,$)}subtract(E){return this.add(E.negate())}is0(){return this.equals(w.ZERO)}wNAF(E){return m.wNAFCached(this,E,w.normalizeZ)}multiplyUnsafe(E){tr("scalar",E,Er,e.n);const A=w.ZERO;if(E===Er)return A;if(E===$e)return this;const{endo:U}=e;if(!U)return m.unsafeLadder(this,E);let{k1neg:B,k1:C,k2neg:O,k2:S}=U.splitScalar(E),k=A,P=A,$=this;for(;C>Er||S>Er;)C&$e&&(k=k.add($)),S&$e&&(P=P.add($)),$=$.double(),C>>=$e,S>>=$e;return B&&(k=k.negate()),O&&(P=P.negate()),P=new w(r.mul(P.px,U.beta),P.py,P.pz),k.add(P)}multiply(E){const{endo:A,n:U}=e;tr("scalar",E,$e,U);let B,C;if(A){const{k1neg:O,k1:S,k2neg:k,k2:P}=A.splitScalar(E);let{p:$,f:ie}=this.wNAF(S),{p:M,f:W}=this.wNAF(P);$=m.constTimeNegate(O,$),M=m.constTimeNegate(k,M),M=new w(r.mul(M.px,A.beta),M.py,M.pz),B=$.add(M),C=ie.add(W)}else{const{p:O,f:S}=this.wNAF(E);B=O,C=S}return w.normalizeZ([B,C])[0]}multiplyAndAddUnsafe(E,A,U){const B=w.BASE,C=(S,k)=>k===Er||k===$e||!S.equals(B)?S.multiplyUnsafe(k):S.multiply(k),O=C(this,A).add(C(E,U));return O.is0()?void 0:O}toAffine(E){return l(this,E)}isTorsionFree(){const{h:E,isTorsionFree:A}=e;if(E===$e)return!0;if(A)return A(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:A}=e;return E===$e?this:A?A(w,this):this.multiplyUnsafe(e.h)}toRawBytes(E=!0){return rn("isCompressed",E),this.assertValidity(),n(w,this,E)}toHex(E=!0){return rn("isCompressed",E),_r(this.toRawBytes(E))}}w.BASE=new w(e.Gx,e.Gy,r.ONE),w.ZERO=new w(r.ZERO,r.ONE,r.ZERO);const _=e.nBitLength,m=Uo(w,e.endo?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:w,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:c}}function Ul(t,e){const r=t.ORDER;let n=Er;for(let d=r-$e;d%ir===Er;d/=ir)n+=$e;const i=n,s=ir<<i-$e-$e,c=s*ir,a=(r-$e)/c,h=(a-$e)/ir,l=c-$e,p=s,w=t.pow(e,a),_=t.pow(e,(a+$e)/ir);let m=(d,E)=>{let A=w,U=t.pow(E,l),B=t.sqr(U);B=t.mul(B,E);let C=t.mul(d,B);C=t.pow(C,h),C=t.mul(C,U),U=t.mul(C,E),B=t.mul(C,d);let O=t.mul(B,U);C=t.pow(O,p);let S=t.eql(C,t.ONE);U=t.mul(B,_),C=t.mul(O,A),B=t.cmov(U,B,S),O=t.cmov(C,O,S);for(let k=i;k>$e;k--){let P=k-ir;P=ir<<P-$e;let $=t.pow(O,P);const ie=t.eql($,t.ONE);U=t.mul(B,A),A=t.mul(A,A),$=t.mul(O,A),B=t.cmov(U,B,ie),O=t.cmov($,O,ie)}return{isValid:S,value:B}};if(t.ORDER%ko===Vn){const d=(t.ORDER-Vn)/ko,E=t.sqrt(t.neg(e));m=(A,U)=>{let B=t.sqr(U);const C=t.mul(A,U);B=t.mul(B,C);let O=t.pow(B,d);O=t.mul(O,C);const S=t.mul(O,E),k=t.mul(t.sqr(O),U),P=t.eql(k,A);let $=t.cmov(S,O,P);return{isValid:P,value:$}}}return m}function Do(t,e){if(Co(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=Ul(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,c,a,h,l,p,w;i=t.sqr(n),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),c=t.add(s,t.ONE),c=t.mul(c,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(c),l=t.sqr(a),h=t.mul(l,e.A),s=t.add(s,h),s=t.mul(s,c),l=t.mul(l,a),h=t.mul(l,e.B),s=t.add(s,h),p=t.mul(i,c);const{isValid:_,value:m}=r(s,l);w=t.mul(i,n),w=t.mul(w,m),p=t.cmov(p,c,_),w=t.cmov(w,m,_);const d=t.isOdd(n)===t.isOdd(w);return w=t.cmov(t.neg(w),w,d),p=t.div(p,a),{x:p,y:w}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Il=BigInt(0),Gn=BigInt(1),zo=BigInt(2),Dr=BigInt(3);function kl(t){const e=[];for(;t>Gn;t>>=Gn)(t&Gn)===Il?e.unshift(0):(t&Dr)===Dr?(e.unshift(-1),t+=Gn):e.unshift(1);return e}function Pl(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:s}=t.fields,c=t.params.xNegative,a=t.params.twistType,h=Po({n:r.ORDER,...t.G1}),l=Object.assign(h,Oo(h.ProjectivePoint,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),p=Po({n:r.ORDER,...t.G2}),w=Object.assign(p,Oo(p.ProjectivePoint,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let _;if(a==="multiplicative")_=(H,X,y,ce,fe,pe)=>s.mul014(ce,H,n.mul(X,fe),n.mul(y,pe));else if(a==="divisive")_=(H,X,y,ce,fe,pe)=>s.mul034(ce,n.mul(y,pe),n.mul(X,fe),H);else throw new Error("bls: unknown twist type");const m=n.div(n.ONE,n.mul(n.ONE,zo));function d(H,X,y,ce){const fe=n.sqr(y),pe=n.sqr(ce),ae=n.mulByB(n.mul(pe,Dr)),le=n.mul(ae,Dr),T=n.sub(n.sub(n.sqr(n.add(y,ce)),pe),fe),R=n.sub(ae,fe),D=n.mul(n.sqr(X),Dr),K=n.neg(T);return H.push([R,D,K]),X=n.mul(n.mul(n.mul(n.sub(fe,le),X),y),m),y=n.sub(n.sqr(n.mul(n.add(fe,le),m)),n.mul(n.sqr(ae),Dr)),ce=n.mul(fe,T),{Rx:X,Ry:y,Rz:ce}}function E(H,X,y,ce,fe,pe){const ae=n.sub(y,n.mul(pe,ce)),le=n.sub(X,n.mul(fe,ce)),T=n.sub(n.mul(ae,fe),n.mul(le,pe)),R=n.neg(ae),D=le;H.push([T,R,D]);const K=n.sqr(le),G=n.mul(K,le),Q=n.mul(K,X),g=n.add(n.sub(G,n.mul(Q,zo)),n.mul(n.sqr(ae),ce));return X=n.mul(le,g),y=n.sub(n.mul(n.sub(Q,g),ae),n.mul(G,y)),ce=n.mul(ce,G),{Rx:X,Ry:y,Rz:ce}}const A=kl(t.params.ateLoopSize),U=an(H=>{const X=H,{x:y,y:ce}=X.toAffine(),fe=y,pe=ce,ae=n.neg(ce);let le=fe,T=pe,R=n.ONE;const D=[];for(const K of A){const G=[];({Rx:le,Ry:T,Rz:R}=d(G,le,T,R)),K&&({Rx:le,Ry:T,Rz:R}=E(G,le,T,R,fe,K===-1?ae:pe)),D.push(G)}if(t.postPrecompute){const K=D[D.length-1];t.postPrecompute(le,T,R,fe,pe,E.bind(null,K))}return D});function B(H,X=!1){let y=s.ONE;if(H.length){const ce=H[0][0].length;for(let fe=0;fe<ce;fe++){y=s.sqr(y);for(const[pe,ae,le]of H)for(const[T,R,D]of pe[fe])y=_(T,R,D,y,ae,le)}}return c&&(y=s.conjugate(y)),X?s.finalExponentiate(y):y}function C(H,X=!0){const y=[];l.ProjectivePoint.normalizeZ(H.map(({g1:ce})=>ce)),w.ProjectivePoint.normalizeZ(H.map(({g2:ce})=>ce));for(const{g1:ce,g2:fe}of H){if(ce.equals(l.ProjectivePoint.ZERO)||fe.equals(w.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");ce.assertValidity(),fe.assertValidity();const pe=ce.toAffine();y.push([U(fe),pe.x,pe.y])}return B(y,X)}function O(H,X,y=!0){return C([{g1:H,g2:X}],y)}const S={randomPrivateKey:()=>{const H=So(r.ORDER);return Fl(t.randomBytes(H),r.ORDER)},calcPairingPrecomputes:U},{ShortSignature:k}=t.G1,{Signature:P}=t.G2;function $(H){return H instanceof l.ProjectivePoint?H:l.ProjectivePoint.fromHex(H)}function ie(H,X){return H instanceof l.ProjectivePoint?H:l.hashToCurve(lt("point",H),X)}function M(H){return H instanceof w.ProjectivePoint?H:P.fromHex(H)}function W(H,X){return H instanceof w.ProjectivePoint?H:w.hashToCurve(lt("point",H),X)}function ee(H){return l.ProjectivePoint.fromPrivateKey(H).toRawBytes(!0)}function F(H){return w.ProjectivePoint.fromPrivateKey(H).toRawBytes(!0)}function q(H,X,y){const ce=W(H,y);ce.assertValidity();const fe=ce.multiply(l.normPrivateKeyToScalar(X));return H instanceof w.ProjectivePoint?fe:P.toRawBytes(fe)}function j(H,X,y){const ce=ie(H,y);ce.assertValidity();const fe=ce.multiply(l.normPrivateKeyToScalar(X));return H instanceof l.ProjectivePoint?fe:k.toRawBytes(fe)}function V(H,X,y,ce){const fe=$(y),pe=W(X,ce),ae=l.ProjectivePoint.BASE,le=M(H),T=C([{g1:fe.negate(),g2:pe},{g1:ae,g2:le}]);return s.eql(T,s.ONE)}function re(H,X,y,ce){const fe=M(y),pe=ie(X,ce),ae=w.ProjectivePoint.BASE,le=$(H),T=C([{g1:pe,g2:fe},{g1:le,g2:ae.negate()}]);return s.eql(T,s.ONE)}function se(H){if(!H.length)throw new Error("Expected non-empty array");const y=H.map($).reduce((ce,fe)=>ce.add(fe),l.ProjectivePoint.ZERO);return H[0]instanceof l.ProjectivePoint?(y.assertValidity(),y):y.toRawBytes(!0)}function oe(H){if(!H.length)throw new Error("Expected non-empty array");const y=H.map(M).reduce((ce,fe)=>ce.add(fe),w.ProjectivePoint.ZERO);return H[0]instanceof w.ProjectivePoint?(y.assertValidity(),y):P.toRawBytes(y)}function de(H){if(!H.length)throw new Error("Expected non-empty array");const y=H.map($).reduce((ce,fe)=>ce.add(fe),l.ProjectivePoint.ZERO);return H[0]instanceof l.ProjectivePoint?(y.assertValidity(),y):k.toRawBytes(y)}function Z(H,X,y,ce){if(!X.length)throw new Error("Expected non-empty messages array");if(y.length!==X.length)throw new Error("Pubkey count should equal msg count");const fe=M(H),pe=X.map(R=>W(R,ce)),ae=y.map($),le=new Map;for(let R=0;R<ae.length;R++){const D=ae[R],K=pe[R];let G=le.get(K);G===void 0&&(G=[],le.set(K,G)),G.push(D)}const T=[];try{for(const[R,D]of le){const K=D.reduce((G,Q)=>G.add(Q));T.push({g1:K,g2:R})}return T.push({g1:l.ProjectivePoint.BASE.negate(),g2:fe}),s.eql(C(T),s.ONE)}catch{return!1}}return l.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:ee,getPublicKeyForShortSignatures:F,sign:q,signShortSignature:j,verify:V,verifyBatch:Z,verifyShortSignature:re,aggregatePublicKeys:se,aggregateSignatures:oe,aggregateShortSignatures:de,millerLoopBatch:B,pairing:O,pairingBatch:C,G1:l,G2:w,Signature:P,ShortSignature:k,fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:s},params:{ateLoopSize:t.params.ateLoopSize,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:S}}const Dl=BigInt(0),zr=BigInt(1),qt=BigInt(2),jo=BigInt(3);function wi(t,e,r,n,i=1,s){const c=BigInt(s===void 0?n:s),a=r**BigInt(n),h=[];for(let l=0;l<i;l++){const p=BigInt(l+1),w=[];for(let _=0,m=zr;_<n;_++){const d=(p*m-p)/c%a;w.push(t.pow(e,d)),m*=r}h.push(w)}return h}function zl(t,e,r){const n=e.pow(r,(t.ORDER-zr)/jo),i=e.pow(r,(t.ORDER-zr)/qt);function s(_,m){const d=e.mul(e.frobeniusMap(_,1),n),E=e.mul(e.frobeniusMap(m,1),i);return[d,E]}const c=e.pow(r,(t.ORDER**qt-zr)/jo),a=e.pow(r,(t.ORDER**qt-zr)/qt);if(!e.eql(a,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function h(_,m){return[e.mul(_,c),e.neg(m)]}const l=_=>(m,d)=>{const E=d.toAffine(),A=_(E.x,E.y);return m.fromAffine({x:A[0],y:A[1]})},p=l(s),w=l(h);return{psi:s,psi2:h,G2psi:p,G2psi2:w,PSI_X:n,PSI_Y:i,PSI2_X:c,PSI2_Y:a}}function jl(t){const{ORDER:e}=t,r=xi(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=Cl(e),s=r.div(r.ONE,qt),c=wi(r,n,r.ORDER,2)[0],a=({c0:F,c1:q},{c0:j,c1:V})=>({c0:r.add(F,j),c1:r.add(q,V)}),h=({c0:F,c1:q},{c0:j,c1:V})=>({c0:r.sub(F,j),c1:r.sub(q,V)}),l=({c0:F,c1:q},j)=>{if(typeof j=="bigint")return{c0:r.mul(F,j),c1:r.mul(q,j)};const{c0:V,c1:re}=j;let se=r.mul(F,V),oe=r.mul(q,re);const de=r.sub(se,oe),Z=r.sub(r.mul(r.add(F,q),r.add(V,re)),r.add(se,oe));return{c0:de,c1:Z}},p=({c0:F,c1:q})=>{const j=r.add(F,q),V=r.sub(F,q),re=r.add(F,F);return{c0:r.mul(j,V),c1:r.mul(re,q)}},w=F=>{if(F.length!==2)throw new Error("Invalid tuple");const q=F.map(j=>r.create(j));return{c0:q[0],c1:q[1]}},_=e*e,m=w(t.FP2_NONRESIDUE),d={ORDER:_,NONRESIDUE:m,BITS:jn(_),BYTES:Math.ceil(jn(_)/8),MASK:qn(jn(_)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:F=>F,isValid:({c0:F,c1:q})=>typeof F=="bigint"&&typeof q=="bigint",is0:({c0:F,c1:q})=>r.is0(F)&&r.is0(q),eql:({c0:F,c1:q},{c0:j,c1:V})=>r.eql(F,j)&&r.eql(q,V),neg:({c0:F,c1:q})=>({c0:r.neg(F),c1:r.neg(q)}),pow:(F,q)=>Hn(d,F,q),invertBatch:F=>$n(d,F),add:a,sub:h,mul:l,sqr:p,addN:a,subN:h,mulN:l,sqrN:p,div:(F,q)=>d.mul(F,typeof q=="bigint"?r.inv(r.create(q)):d.inv(q)),inv:({c0:F,c1:q})=>{const j=r.inv(r.create(F*F+q*q));return{c0:r.mul(j,r.create(F)),c1:r.mul(j,r.create(-q))}},sqrt:F=>{if(t.Fp2sqrt)return t.Fp2sqrt(F);const{c0:q,c1:j}=F;if(r.is0(j))return r.eql(i(r,q),r.ONE)?d.create({c0:r.sqrt(q),c1:r.ZERO}):d.create({c0:r.ZERO,c1:r.sqrt(r.div(q,n))});const V=r.sqrt(r.sub(r.sqr(q),r.mul(r.sqr(j),n)));let re=r.mul(r.add(V,q),s);const se=i(r,re);!r.is0(se)&&!r.eql(se,r.ONE)&&(re=r.sub(re,V));const oe=r.sqrt(re),de=d.create({c0:oe,c1:r.div(r.mul(j,s),oe)});if(!d.eql(d.sqr(de),F))throw new Error("Cannot find square root");const Z=de,H=d.neg(Z),{re:X,im:y}=d.reim(Z),{re:ce,im:fe}=d.reim(H);return y>fe||y===fe&&X>ce?Z:H},isOdd:F=>{const{re:q,im:j}=d.reim(F),V=q%qt,re=q===Dl,se=j%qt;return BigInt(V||re&&se)==zr},fromBytes(F){if(F.length!==d.BYTES)throw new Error(`fromBytes wrong length=${F.length}`);return{c0:r.fromBytes(F.subarray(0,r.BYTES)),c1:r.fromBytes(F.subarray(r.BYTES))}},toBytes:({c0:F,c1:q})=>Ve(r.toBytes(F),r.toBytes(q)),cmov:({c0:F,c1:q},{c0:j,c1:V},re)=>({c0:r.cmov(F,j,re),c1:r.cmov(q,V,re)}),reim:({c0:F,c1:q})=>({re:F,im:q}),mulByNonresidue:({c0:F,c1:q})=>d.mul({c0:F,c1:q},m),mulByB:t.Fp2mulByB,fromBigTuple:w,frobeniusMap:({c0:F,c1:q},j)=>({c0:F,c1:r.mul(q,c[j%2])})},E=({c0:F,c1:q,c2:j},{c0:V,c1:re,c2:se})=>({c0:d.add(F,V),c1:d.add(q,re),c2:d.add(j,se)}),A=({c0:F,c1:q,c2:j},{c0:V,c1:re,c2:se})=>({c0:d.sub(F,V),c1:d.sub(q,re),c2:d.sub(j,se)}),U=({c0:F,c1:q,c2:j},V)=>{if(typeof V=="bigint")return{c0:d.mul(F,V),c1:d.mul(q,V),c2:d.mul(j,V)};const{c0:re,c1:se,c2:oe}=V,de=d.mul(F,re),Z=d.mul(q,se),H=d.mul(j,oe);return{c0:d.add(de,d.mulByNonresidue(d.sub(d.mul(d.add(q,j),d.add(se,oe)),d.add(Z,H)))),c1:d.add(d.sub(d.mul(d.add(F,q),d.add(re,se)),d.add(de,Z)),d.mulByNonresidue(H)),c2:d.sub(d.add(Z,d.mul(d.add(F,j),d.add(re,oe))),d.add(de,H))}},B=({c0:F,c1:q,c2:j})=>{let V=d.sqr(F),re=d.mul(d.mul(F,q),qt),se=d.mul(d.mul(q,j),qt),oe=d.sqr(j);return{c0:d.add(d.mulByNonresidue(se),V),c1:d.add(d.mulByNonresidue(oe),re),c2:d.sub(d.sub(d.add(d.add(re,d.sqr(d.add(d.sub(F,q),j))),se),V),oe)}},[C,O]=wi(d,m,r.ORDER,6,2,3),S={ORDER:d.ORDER,BITS:3*d.BITS,BYTES:3*d.BYTES,MASK:qn(3*d.BITS),ZERO:{c0:d.ZERO,c1:d.ZERO,c2:d.ZERO},ONE:{c0:d.ONE,c1:d.ZERO,c2:d.ZERO},create:F=>F,isValid:({c0:F,c1:q,c2:j})=>d.isValid(F)&&d.isValid(q)&&d.isValid(j),is0:({c0:F,c1:q,c2:j})=>d.is0(F)&&d.is0(q)&&d.is0(j),neg:({c0:F,c1:q,c2:j})=>({c0:d.neg(F),c1:d.neg(q),c2:d.neg(j)}),eql:({c0:F,c1:q,c2:j},{c0:V,c1:re,c2:se})=>d.eql(F,V)&&d.eql(q,re)&&d.eql(j,se),sqrt:Eo,div:(F,q)=>S.mul(F,typeof q=="bigint"?r.inv(r.create(q)):S.inv(q)),pow:(F,q)=>Hn(S,F,q),invertBatch:F=>$n(S,F),add:E,sub:A,mul:U,sqr:B,addN:E,subN:A,mulN:U,sqrN:B,inv:({c0:F,c1:q,c2:j})=>{let V=d.sub(d.sqr(F),d.mulByNonresidue(d.mul(j,q))),re=d.sub(d.mulByNonresidue(d.sqr(j)),d.mul(F,q)),se=d.sub(d.sqr(q),d.mul(F,j)),oe=d.inv(d.add(d.mulByNonresidue(d.add(d.mul(j,re),d.mul(q,se))),d.mul(F,V)));return{c0:d.mul(oe,V),c1:d.mul(oe,re),c2:d.mul(oe,se)}},fromBytes:F=>{if(F.length!==S.BYTES)throw new Error(`fromBytes wrong length=${F.length}`);return{c0:d.fromBytes(F.subarray(0,d.BYTES)),c1:d.fromBytes(F.subarray(d.BYTES,2*d.BYTES)),c2:d.fromBytes(F.subarray(2*d.BYTES))}},toBytes:({c0:F,c1:q,c2:j})=>Ve(d.toBytes(F),d.toBytes(q),d.toBytes(j)),cmov:({c0:F,c1:q,c2:j},{c0:V,c1:re,c2:se},oe)=>({c0:d.cmov(F,V,oe),c1:d.cmov(q,re,oe),c2:d.cmov(j,se,oe)}),fromBigSix:F=>{if(!Array.isArray(F)||F.length!==6)throw new Error("Invalid Fp6 usage");return{c0:d.fromBigTuple(F.slice(0,2)),c1:d.fromBigTuple(F.slice(2,4)),c2:d.fromBigTuple(F.slice(4,6))}},frobeniusMap:({c0:F,c1:q,c2:j},V)=>({c0:d.frobeniusMap(F,V),c1:d.mul(d.frobeniusMap(q,V),C[V%6]),c2:d.mul(d.frobeniusMap(j,V),O[V%6])}),mulByFp2:({c0:F,c1:q,c2:j},V)=>({c0:d.mul(F,V),c1:d.mul(q,V),c2:d.mul(j,V)}),mulByNonresidue:({c0:F,c1:q,c2:j})=>({c0:d.mulByNonresidue(j),c1:F,c2:q}),mul1:({c0:F,c1:q,c2:j},V)=>({c0:d.mulByNonresidue(d.mul(j,V)),c1:d.mul(F,V),c2:d.mul(q,V)}),mul01({c0:F,c1:q,c2:j},V,re){let se=d.mul(F,V),oe=d.mul(q,re);return{c0:d.add(d.mulByNonresidue(d.sub(d.mul(d.add(q,j),re),oe)),se),c1:d.sub(d.sub(d.mul(d.add(V,re),d.add(F,q)),se),oe),c2:d.add(d.sub(d.mul(d.add(F,j),V),se),oe)}}},k=wi(d,m,r.ORDER,12,1,6)[0],P=({c0:F,c1:q},{c0:j,c1:V})=>({c0:S.add(F,j),c1:S.add(q,V)}),$=({c0:F,c1:q},{c0:j,c1:V})=>({c0:S.sub(F,j),c1:S.sub(q,V)}),ie=({c0:F,c1:q},j)=>{if(typeof j=="bigint")return{c0:S.mul(F,j),c1:S.mul(q,j)};let{c0:V,c1:re}=j,se=S.mul(F,V),oe=S.mul(q,re);return{c0:S.add(se,S.mulByNonresidue(oe)),c1:S.sub(S.mul(S.add(F,q),S.add(V,re)),S.add(se,oe))}},M=({c0:F,c1:q})=>{let j=S.mul(F,q);return{c0:S.sub(S.sub(S.mul(S.add(S.mulByNonresidue(q),F),S.add(F,q)),j),S.mulByNonresidue(j)),c1:S.add(j,j)}};function W(F,q){const j=d.sqr(F),V=d.sqr(q);return{first:d.add(d.mulByNonresidue(V),j),second:d.sub(d.sub(d.sqr(d.add(F,q)),j),V)}}const ee={ORDER:d.ORDER,BITS:2*d.BITS,BYTES:2*d.BYTES,MASK:qn(2*d.BITS),ZERO:{c0:S.ZERO,c1:S.ZERO},ONE:{c0:S.ONE,c1:S.ZERO},create:F=>F,isValid:({c0:F,c1:q})=>S.isValid(F)&&S.isValid(q),is0:({c0:F,c1:q})=>S.is0(F)&&S.is0(q),neg:({c0:F,c1:q})=>({c0:S.neg(F),c1:S.neg(q)}),eql:({c0:F,c1:q},{c0:j,c1:V})=>S.eql(F,j)&&S.eql(q,V),sqrt:Eo,inv:({c0:F,c1:q})=>{let j=S.inv(S.sub(S.sqr(F),S.mulByNonresidue(S.sqr(q))));return{c0:S.mul(F,j),c1:S.neg(S.mul(q,j))}},div:(F,q)=>ee.mul(F,typeof q=="bigint"?r.inv(r.create(q)):ee.inv(q)),pow:(F,q)=>Hn(ee,F,q),invertBatch:F=>$n(ee,F),add:P,sub:$,mul:ie,sqr:M,addN:P,subN:$,mulN:ie,sqrN:M,fromBytes:F=>{if(F.length!==ee.BYTES)throw new Error(`fromBytes wrong length=${F.length}`);return{c0:S.fromBytes(F.subarray(0,S.BYTES)),c1:S.fromBytes(F.subarray(S.BYTES))}},toBytes:({c0:F,c1:q})=>Ve(S.toBytes(F),S.toBytes(q)),cmov:({c0:F,c1:q},{c0:j,c1:V},re)=>({c0:S.cmov(F,j,re),c1:S.cmov(q,V,re)}),fromBigTwelve:F=>({c0:S.fromBigSix(F.slice(0,6)),c1:S.fromBigSix(F.slice(6,12))}),frobeniusMap(F,q){const{c0:j,c1:V,c2:re}=S.frobeniusMap(F.c1,q),se=k[q%12];return{c0:S.frobeniusMap(F.c0,q),c1:S.create({c0:d.mul(j,se),c1:d.mul(V,se),c2:d.mul(re,se)})}},mulByFp2:({c0:F,c1:q},j)=>({c0:S.mulByFp2(F,j),c1:S.mulByFp2(q,j)}),conjugate:({c0:F,c1:q})=>({c0:F,c1:S.neg(q)}),mul014:({c0:F,c1:q},j,V,re)=>{let se=S.mul01(F,j,V),oe=S.mul1(q,re);return{c0:S.add(S.mulByNonresidue(oe),se),c1:S.sub(S.sub(S.mul01(S.add(q,F),j,d.add(V,re)),se),oe)}},mul034:({c0:F,c1:q},j,V,re)=>{const se=S.create({c0:d.mul(F.c0,j),c1:d.mul(F.c1,j),c2:d.mul(F.c2,j)}),oe=S.mul01(q,V,re),de=S.mul01(S.add(F,q),d.add(j,V),re);return{c0:S.add(S.mulByNonresidue(oe),se),c1:S.sub(de,S.add(se,oe))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:d,Fp6:S,Fp4Square:W,Fp12:ee}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ot=BigInt(0),Wn=BigInt(1),Je=BigInt(2),Ln=BigInt(3),on=BigInt(4),sr=BigInt("0xd201000000010000"),ql=jn(sr),{Fp:ye,Fp2:ge,Fp6:bi,Fp4Square:mi,Fp12:Fe}=jl({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[Wn,Wn],Fp2mulByB:({c0:t,c1:e})=>{const r=ye.mul(t,on),n=ye.mul(e,on);return{c0:ye.sub(r,n),c1:ye.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:s,c1:c,c2:a}=e,{first:h,second:l}=mi(r,c),{first:p,second:w}=mi(s,i),{first:_,second:m}=mi(n,a),d=ge.mulByNonresidue(m);return{c0:bi.create({c0:ge.add(ge.mul(ge.sub(h,r),Je),h),c1:ge.add(ge.mul(ge.sub(p,n),Je),p),c2:ge.add(ge.mul(ge.sub(_,i),Je),_)}),c1:bi.create({c0:ge.add(ge.mul(ge.add(d,s),Je),d),c1:ge.add(ge.mul(ge.add(l,c),Je),l),c2:ge.add(ge.mul(ge.add(w,a),Je),w)})}},Fp12cyclotomicExp(t,e){let r=Fe.ONE;for(let n=ql-1;n>=0;n--)r=Fe._cyclotomicSquare(r),wl(e,n)&&(r=Fe.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=sr,r=Fe.div(Fe.frobeniusMap(t,6),t),n=Fe.mul(Fe.frobeniusMap(r,2),r),i=Fe.conjugate(Fe._cyclotomicExp(n,e)),s=Fe.mul(Fe.conjugate(Fe._cyclotomicSquare(n)),i),c=Fe.conjugate(Fe._cyclotomicExp(s,e)),a=Fe.conjugate(Fe._cyclotomicExp(c,e)),h=Fe.mul(Fe.conjugate(Fe._cyclotomicExp(a,e)),Fe._cyclotomicSquare(i)),l=Fe.conjugate(Fe._cyclotomicExp(h,e)),p=Fe.frobeniusMap(Fe.mul(i,a),2),w=Fe.frobeniusMap(Fe.mul(c,n),3),_=Fe.frobeniusMap(Fe.mul(h,Fe.conjugate(n)),1),m=Fe.mul(Fe.mul(l,Fe.conjugate(s)),n);return Fe.mul(Fe.mul(Fe.mul(p,w),_),m)}}),qo=xi(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),Hl=Ro(ge,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>ge.fromBigTuple(e.map(BigInt))))),$l=Ro(ye,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Vl=Do(ge,{A:ge.create({c0:ye.create(ot),c1:ye.create(BigInt(240))}),B:ge.create({c0:ye.create(BigInt(1012)),c1:ye.create(BigInt(1012))}),Z:ge.create({c0:ye.create(BigInt(-2)),c1:ye.create(BigInt(-1))})}),Gl=Do(ye,{A:ye.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:ye.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:ye.create(BigInt(11))}),{G2psi:Ho,G2psi2:Wl}=zl(ye,ge,ge.div(ge.ONE,ge.NONRESIDUE)),_i=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:ye.ORDER,m:2,k:128,expand:"xmd",hash:z0}),Kn=cn(ye.toBytes(ot),{infinity:!0,compressed:!0});function Yn(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function cn(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function $o(t){t.assertValidity();const e=t.equals(wt.G1.ProjectivePoint.ZERO),{x:r,y:n}=t.toAffine();if(e)return Kn.slice();const i=ye.ORDER,s=!!(n*Je/i);return cn(rt(r,ye.BYTES),{compressed:!0,sort:s})}function Vo(t){t.assertValidity();const e=ye.BYTES;if(t.equals(wt.G2.ProjectivePoint.ZERO))return Ve(Kn,rt(ot,e));const{x:r,y:n}=t.toAffine(),{re:i,im:s}=ge.reim(r),{re:c,im:a}=ge.reim(n),l=!!((a>ot?a*Je:c*Je)/ye.ORDER&Wn),p=i;return Ve(cn(rt(s,e),{sort:l,compressed:!0}),rt(p,e))}const wt=Pl({fields:{Fp:ye,Fp2:ge,Fp6:bi,Fp12:Fe,Fr:qo},G1:{Fp:ye,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:ye.ZERO,b:on,htfDefaults:{..._i,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(ye.mul(e.px,r),e.py,e.pz);return e.multiplyUnsafe(sr).negate().multiplyUnsafe(sr).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(sr).add(e),mapToCurve:t=>{const{x:e,y:r}=Gl(ye.create(t[0]));return $l(e,r)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=Yn(t);if(i.length===48&&e){const s=ye.ORDER,c=At(i),a=ye.create(c&ye.MASK);if(r){if(a!==ot)throw new Error("G1: non-empty compressed point at infinity");return{x:ot,y:ot}}const h=ye.add(ye.pow(a,Ln),ye.create(wt.params.G1b));let l=ye.sqrt(h);if(!l)throw new Error("Invalid compressed G1 point");return l*Je/s!==BigInt(n)&&(l=ye.neg(l)),{x:ye.create(a),y:ye.create(l)}}else if(i.length===96&&!e){const s=At(i.subarray(0,ye.BYTES)),c=At(i.subarray(ye.BYTES));if(r){if(s!==ot||c!==ot)throw new Error("G1: non-empty point at infinity");return wt.G1.ProjectivePoint.ZERO.toAffine()}return{x:ye.create(s),y:ye.create(c)}}else throw new Error("Invalid point G1, expected 48/96 bytes")},toBytes:(t,e,r)=>{const n=e.equals(t.ZERO),{x:i,y:s}=e.toAffine();if(r){if(n)return Kn.slice();const c=ye.ORDER,a=!!(s*Je/c);return cn(rt(i,ye.BYTES),{compressed:!0,sort:a})}else return n?Ve(new Uint8Array([64]),new Uint8Array(2*ye.BYTES-1)):Ve(rt(i,ye.BYTES),rt(s,ye.BYTES))},ShortSignature:{fromHex(t){const{infinity:e,sort:r,value:n}=Yn(lt("signatureHex",t,48)),i=ye.ORDER,s=At(n);if(e)return wt.G1.ProjectivePoint.ZERO;const c=ye.create(s&ye.MASK),a=ye.add(ye.pow(c,Ln),ye.create(wt.params.G1b));let h=ye.sqrt(a);if(!h)throw new Error("Invalid compressed G1 point");const l=BigInt(r);h*Je/i!==l&&(h=ye.neg(h));const p=wt.G1.ProjectivePoint.fromAffine({x:c,y:h});return p.assertValidity(),p},toRawBytes(t){return $o(t)},toHex(t){return _r($o(t))}}},G2:{Fp:ge,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:ge.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:ge.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:ge.ZERO,b:ge.fromBigTuple([on,on]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{..._i},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:t=>{const{x:e,y:r}=Vl(ge.fromBigTuple(t));return Hl(e,r)},isTorsionFree:(t,e)=>e.multiplyUnsafe(sr).negate().equals(Ho(t,e)),clearCofactor:(t,e)=>{const r=sr;let n=e.multiplyUnsafe(r).negate(),i=Ho(t,e),s=e.double();return s=Wl(t,s),s=s.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),s=s.add(i),s=s.subtract(n),s.subtract(e)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=Yn(t);if(!e&&!r&&n||!e&&r&&n||n&&r&&e)throw new Error("Invalid encoding flag: "+(t[0]&224));const s=ye.BYTES,c=(a,h,l)=>At(a.slice(h,l));if(i.length===96&&e){const a=wt.params.G2b,h=ye.ORDER;if(r){if(i.reduce((E,A)=>E!==0?A+1:A,0)>0)throw new Error("Invalid compressed G2 point");return{x:ge.ZERO,y:ge.ZERO}}const l=c(i,0,s),p=c(i,s,2*s),w=ge.create({c0:ye.create(p),c1:ye.create(l)}),_=ge.add(ge.pow(w,Ln),a);let m=ge.sqrt(_);const d=m.c1===ot?m.c0*Je/h:m.c1*Je/h?Wn:ot;return m=n&&d>0?m:ge.neg(m),{x:w,y:m}}else if(i.length===192&&!e){if(r){if(i.reduce((w,_)=>w!==0?_+1:_,0)>0)throw new Error("Invalid uncompressed G2 point");return{x:ge.ZERO,y:ge.ZERO}}const a=c(i,0,s),h=c(i,s,2*s),l=c(i,2*s,3*s),p=c(i,3*s,4*s);return{x:ge.fromBigTuple([h,a]),y:ge.fromBigTuple([p,l])}}else throw new Error("Invalid point G2, expected 96/192 bytes")},toBytes:(t,e,r)=>{const{BYTES:n,ORDER:i}=ye,s=e.equals(t.ZERO),{x:c,y:a}=e.toAffine();if(r){if(s)return Ve(Kn,rt(ot,n));const h=!!(a.c1===ot?a.c0*Je/i:a.c1*Je/i);return Ve(cn(rt(c.c1,n),{compressed:!0,sort:h}),rt(c.c0,n))}else{if(s)return Ve(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:h,im:l}=ge.reim(c),{re:p,im:w}=ge.reim(a);return Ve(rt(l,n),rt(h,n),rt(w,n),rt(p,n))}},Signature:{fromHex(t){const{infinity:e,sort:r,value:n}=Yn(lt("signatureHex",t)),i=ye.ORDER,s=n.length/2;if(s!==48&&s!==96)throw new Error("Invalid compressed signature length, must be 96 or 192");const c=At(n.slice(0,s)),a=At(n.slice(s));if(e)return wt.G2.ProjectivePoint.ZERO;const h=ye.create(c&ye.MASK),l=ye.create(a),p=ge.create({c0:l,c1:h}),w=ge.add(ge.pow(p,Ln),wt.params.G2b);let _=ge.sqrt(w);if(!_)throw new Error("Failed to find a square root");const{re:m,im:d}=ge.reim(_),E=BigInt(r),A=d>ot&&d*Je/i!==E,U=d===ot&&m*Je/i!==E;(A||U)&&(_=ge.neg(_));const B=wt.G2.ProjectivePoint.fromAffine({x:p,y:_});return B.assertValidity(),B},toRawBytes(t){return Vo(t)},toHex(t){return _r(Vo(t))}}},params:{ateLoopSize:sr,r:qo.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:_i,hash:z0,randomBytes:Ws});function Ll(t,e,r){const n=typeof t=="string"?t:tt(t),i=typeof e=="string"?e:tt(e),s=typeof r=="string"?r:tt(r);return wt.verifyShortSignature(i,s,n)}const Go=t=>Qe(new Or(t)),Ei=t=>{const e=Go(t);return new Date(Number(e)/1e6)};class Mt extends ut{constructor(e){super(`Invalid certificate: ${e}`)}}var pt;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(pt||(pt={}));function Kl(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class jr{constructor(e,r,n,i,s=5){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=s,this.cert=zt(new Uint8Array(e))}static async create(e){const r=jr.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=Ll),new jr(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes)}lookup(e){return qr(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await Zn(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=Zl(r),s=_t(fn("ic-state-root"),e);let c=!1;const a=vr(this.lookup(["time"]));if(!a)throw new Mt("Certificate does not contain a time");const h=5*60*1e3,l=this._maxAgeInMinutes*60*1e3,p=Date.now(),w=p-l,_=p+h,m=Ei(a);if(m.getTime()<w)throw new Mt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+m.toISOString()+" Current time: "+new Date(p).toISOString());if(m.getTime()>_)throw new Mt("Certificate is signed more than 5 minutes in the future. Certificate time: "+m.toISOString()+" Current time: "+new Date(p).toISOString());try{c=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(s))}catch{c=!1}if(!c)throw new Mt("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await jr.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Mt("Delegation certificates cannot be nested");if(await r.verify(),!Wo({canisterId:this._canisterId,subnetId:Ee.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new Mt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${tt(e.subnet_id)}`);const i=vr(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!i)throw new Error(`Could not find subnet key for subnet 0x${tt(e.subnet_id)}`);return i}}const un=Pt("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),Yl=96;function Zl(t){const e=un.byteLength+Yl;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,un.byteLength);if(!Nn(r,un))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${un}, but get ${r}`);return t.slice(un.byteLength)}function vr(t){if(t.status===Ye.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function Zn(t){switch(t[0]){case pt.Empty:return Et(fn("ic-hashtree-empty"));case pt.Pruned:return t[1];case pt.Leaf:return Et(_t(fn("ic-hashtree-leaf"),t[1]));case pt.Labeled:return Et(_t(fn("ic-hashtree-labeled"),t[1],await Zn(t[2])));case pt.Fork:return Et(_t(fn("ic-hashtree-fork"),await Zn(t[1]),await Zn(t[2])));default:throw new Error("unreachable")}}function fn(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return _t(e,r)}var Ye;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(Ye||(Ye={}));var Ht;(function(t){t.Less="less",t.Greater="greater"})(Ht||(Ht={}));function qr(t,e){if(t.length===0)switch(e[0]){case pt.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:Ye.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:Ye.Found,value:e[1].buffer}:{status:Ye.Found,value:e[1]}}default:return{status:Ye.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=Qn(r,e);switch(n.status){case Ye.Found:return qr(t.slice(1),n.value);case Ht.Greater:case Ht.Less:return{status:Ye.Absent};default:return n}}function vi(t){switch(t[0]){case pt.Empty:return[];case pt.Fork:return vi(t[1]).concat(vi(t[2]));default:return[t]}}function Qn(t,e){switch(e[0]){case pt.Labeled:return Kl(t,e[1])?{status:Ht.Greater}:Nn(t,e[1])?{status:Ye.Found,value:e[2]}:{status:Ht.Less};case pt.Fork:const r=Qn(t,e[1]);switch(r.status){case Ht.Greater:{const n=Qn(t,e[2]);return n.status===Ht.Less?{status:Ye.Absent}:n}case Ye.Unknown:{let n=Qn(t,e[2]);return n.status===Ht.Less?{status:Ye.Unknown}:n}default:return r}case pt.Pruned:return{status:Ye.Unknown};default:return{status:Ye.Absent}}}function Wo(t){const{canisterId:e,subnetId:r,tree:n}=t,i=qr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==Ye.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return zt(i.value).map(h=>[Ee.fromUint8Array(h[0]),Ee.fromUint8Array(h[1])]).some(h=>h[0].ltEq(e)&&h[1].gtEq(e))}class Ql{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const Lo=async t=>{const{agent:e,paths:r}=t,n=Ee.from(t.canisterId),i=[...new Set(r)],s=i.map(h=>Bi(h,n)),c=new Map,a=i.map((h,l)=>(async()=>{var p;try{const w=await e.readState(n,{paths:[s[l]]}),_=await jr.create({certificate:w.certificate,rootKey:e.rootKey,canisterId:n}),m=(A,U)=>{if(U==="subnet"){const B=Ko(w.certificate,n,e.rootKey);return{path:U,data:B}}else return{path:U,data:vr(A.lookup(Bi(U,n)))}},{path:d,data:E}=m(_,i[l]);if(!E)console.warn(`Expected to find result for path ${d}, but instead found nothing.`),typeof d=="string"?c.set(d,null):c.set(d.key,null);else switch(d){case"time":{c.set(d,Ei(E));break}case"controllers":{c.set(d,Jl(E));break}case"module_hash":{c.set(d,Yo(E));break}case"subnet":{c.set(d,E);break}case"candid":{c.set(d,new TextDecoder().decode(E));break}default:if(typeof d!="string"&&"key"in d&&"path"in d)switch(d.decodeStrategy){case"raw":c.set(d.key,E);break;case"leb128":{c.set(d.key,Go(E));break}case"cbor":{c.set(d.key,Zo(E));break}case"hex":{c.set(d.key,Yo(E));break}case"utf-8":c.set(d.key,Xl(E))}}}catch(w){if(!((p=w==null?void 0:w.message)===null||p===void 0)&&p.includes("Invalid certificate"))throw new ut(w.message);typeof h!="string"&&"key"in h&&"path"in h?c.set(h.key,null):c.set(h,null),console.group(),console.warn(`Expected to find result for path ${h}, but instead found nothing.`),console.warn(w),console.groupEnd()}})());return await Promise.all(a),c},Ko=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=zt(new Uint8Array(t)),i=n.tree;let s=n.delegation,c;if(s&&s.subnet_id?c=Ee.fromUint8Array(new Uint8Array(s.subnet_id)):!s&&typeof r<"u"?(c=Ee.selfAuthenticating(new Uint8Array(r)),s={subnet_id:c.toUint8Array(),certificate:new ArrayBuffer(0)}):(c=Ee.selfAuthenticating(Ee.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),s={subnet_id:c.toUint8Array(),certificate:new ArrayBuffer(0)}),!Wo({canisterId:e,subnetId:c,tree:i}))throw new Error("Canister not in range");const h=qr(["subnet",s.subnet_id,"node"],i);if(h.status!==Ye.Found)throw new Error("Node not found");if(h.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const l=vi(h.value),p=new Map;return l.forEach(w=>{const _=Ee.from(new Uint8Array(w[1])).toText(),m=qr(["public_key"],w[2]);if(m.status!==Ye.Found)throw new Error("Public key not found");const d=m.value;if(d.byteLength!==44)throw new Error("Invalid public key length");p.set(_,d)}),{subnetId:Ee.fromUint8Array(new Uint8Array(s.subnet_id)).toText(),nodeKeys:p}},Bi=(t,e)=>{const r=new TextEncoder,n=s=>new DataView(r.encode(s).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const s=t.path,c=typeof s=="string"?n(s):s;return[n("canister"),i,n("metadata"),c]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},Yo=t=>tt(t),Zo=t=>zt(t),Xl=t=>new TextDecoder().decode(t),Jl=t=>Zo(t).map(r=>Ee.fromUint8Array(new Uint8Array(r))),ed=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:Ql,encodePath:Bi,fetchNodeKeys:Ko,request:Lo},Symbol.toStringTag,{value:"Module"})),Xn=BigInt(2**32-1),Ai=BigInt(32);function Qo(t,e=!1){return e?{h:Number(t&Xn),l:Number(t>>Ai&Xn)}:{h:Number(t>>Ai&Xn)|0,l:Number(t&Xn)|0}}function td(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:c}=Qo(t[i],e);[r[i],n[i]]=[s,c]}return[r,n]}const rd=(t,e)=>BigInt(t>>>0)<<Ai|BigInt(e>>>0),nd=(t,e,r)=>t>>>r,id=(t,e,r)=>t<<32-r|e>>>r,sd=(t,e,r)=>t>>>r|e<<32-r,ad=(t,e,r)=>t<<32-r|e>>>r,od=(t,e,r)=>t<<64-r|e>>>r-32,cd=(t,e,r)=>t>>>r-32|e<<64-r,ud=(t,e)=>e,fd=(t,e)=>t,ld=(t,e,r)=>t<<r|e>>>32-r,dd=(t,e,r)=>e<<r|t>>>32-r,hd=(t,e,r)=>e<<r-32|t>>>64-r,xd=(t,e,r)=>t<<r-32|e>>>64-r;function pd(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const Be={fromBig:Qo,split:td,toBig:rd,shrSH:nd,shrSL:id,rotrSH:sd,rotrSL:ad,rotrBH:od,rotrBL:cd,rotr32H:ud,rotr32L:fd,rotlSH:ld,rotlSL:dd,rotlBH:hd,rotlBL:xd,add:pd,add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,add5H:(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,add5L:(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},[yd,gd]=(()=>Be.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),ar=new Uint32Array(80),or=new Uint32Array(80);class wd extends Ls{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:c,Dh:a,Dl:h,Eh:l,El:p,Fh:w,Fl:_,Gh:m,Gl:d,Hh:E,Hl:A}=this;return[e,r,n,i,s,c,a,h,l,p,w,_,m,d,E,A]}set(e,r,n,i,s,c,a,h,l,p,w,_,m,d,E,A){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=c|0,this.Dh=a|0,this.Dl=h|0,this.Eh=l|0,this.El=p|0,this.Fh=w|0,this.Fl=_|0,this.Gh=m|0,this.Gl=d|0,this.Hh=E|0,this.Hl=A|0}process(e,r){for(let C=0;C<16;C++,r+=4)ar[C]=e.getUint32(r),or[C]=e.getUint32(r+=4);for(let C=16;C<80;C++){const O=ar[C-15]|0,S=or[C-15]|0,k=Be.rotrSH(O,S,1)^Be.rotrSH(O,S,8)^Be.shrSH(O,S,7),P=Be.rotrSL(O,S,1)^Be.rotrSL(O,S,8)^Be.shrSL(O,S,7),$=ar[C-2]|0,ie=or[C-2]|0,M=Be.rotrSH($,ie,19)^Be.rotrBH($,ie,61)^Be.shrSH($,ie,6),W=Be.rotrSL($,ie,19)^Be.rotrBL($,ie,61)^Be.shrSL($,ie,6),ee=Be.add4L(P,W,or[C-7],or[C-16]),F=Be.add4H(ee,k,M,ar[C-7],ar[C-16]);ar[C]=F|0,or[C]=ee|0}let{Ah:n,Al:i,Bh:s,Bl:c,Ch:a,Cl:h,Dh:l,Dl:p,Eh:w,El:_,Fh:m,Fl:d,Gh:E,Gl:A,Hh:U,Hl:B}=this;for(let C=0;C<80;C++){const O=Be.rotrSH(w,_,14)^Be.rotrSH(w,_,18)^Be.rotrBH(w,_,41),S=Be.rotrSL(w,_,14)^Be.rotrSL(w,_,18)^Be.rotrBL(w,_,41),k=w&m^~w&E,P=_&d^~_&A,$=Be.add5L(B,S,P,gd[C],or[C]),ie=Be.add5H($,U,O,k,yd[C],ar[C]),M=$|0,W=Be.rotrSH(n,i,28)^Be.rotrBH(n,i,34)^Be.rotrBH(n,i,39),ee=Be.rotrSL(n,i,28)^Be.rotrBL(n,i,34)^Be.rotrBL(n,i,39),F=n&s^n&a^s&a,q=i&c^i&h^c&h;U=E|0,B=A|0,E=m|0,A=d|0,m=w|0,d=_|0,{h:w,l:_}=Be.add(l|0,p|0,ie|0,M|0),l=a|0,p=h|0,a=s|0,h=c|0,s=n|0,c=i|0;const j=Be.add3L(M,ee,q);n=Be.add3H(j,ie,W,F),i=j|0}({h:n,l:i}=Be.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:c}=Be.add(this.Bh|0,this.Bl|0,s|0,c|0),{h:a,l:h}=Be.add(this.Ch|0,this.Cl|0,a|0,h|0),{h:l,l:p}=Be.add(this.Dh|0,this.Dl|0,l|0,p|0),{h:w,l:_}=Be.add(this.Eh|0,this.El|0,w|0,_|0),{h:m,l:d}=Be.add(this.Fh|0,this.Fl|0,m|0,d|0),{h:E,l:A}=Be.add(this.Gh|0,this.Gl|0,E|0,A|0),{h:U,l:B}=Be.add(this.Hh|0,this.Hl|0,U|0,B|0),this.set(n,i,s,c,a,h,l,p,w,_,m,d,E,A,U,B)}roundClean(){ar.fill(0),or.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const bd=D0(()=>new wd);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ct=BigInt(0),dt=BigInt(1),Jn=BigInt(2),md=BigInt(8),_d={zip215:!0};function Ed(t){const e=Io(t);return sn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function vd(t){const e=Ed(t),{Fp:r,n,prehash:i,hash:s,randomBytes:c,nByteLength:a,h}=e,l=Jn<<BigInt(a*8)-dt,p=r.create,w=e.uvRatio||((j,V)=>{try{return{isValid:!0,value:r.sqrt(j*r.inv(V))}}catch{return{isValid:!1,value:Ct}}}),_=e.adjustScalarBytes||(j=>j),m=e.domain||((j,V,re)=>{if(rn("phflag",re),V.length||re)throw new Error("Contexts/pre-hash are not supported");return j});function d(j,V){tr("coordinate "+j,V,Ct,l)}function E(j){if(!(j instanceof B))throw new Error("ExtendedPoint expected")}const A=an((j,V)=>{const{ex:re,ey:se,ez:oe}=j,de=j.is0();V==null&&(V=de?md:r.inv(oe));const Z=p(re*V),H=p(se*V),X=p(oe*V);if(de)return{x:Ct,y:dt};if(X!==dt)throw new Error("invZ was invalid");return{x:Z,y:H}}),U=an(j=>{const{a:V,d:re}=e;if(j.is0())throw new Error("bad point: ZERO");const{ex:se,ey:oe,ez:de,et:Z}=j,H=p(se*se),X=p(oe*oe),y=p(de*de),ce=p(y*y),fe=p(H*V),pe=p(y*p(fe+X)),ae=p(ce+p(re*p(H*X)));if(pe!==ae)throw new Error("bad point: equation left != right (1)");const le=p(se*oe),T=p(de*Z);if(le!==T)throw new Error("bad point: equation left != right (2)");return!0});class B{constructor(V,re,se,oe){this.ex=V,this.ey=re,this.ez=se,this.et=oe,d("x",V),d("y",re),d("z",se),d("t",oe),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(V){if(V instanceof B)throw new Error("extended point not allowed");const{x:re,y:se}=V||{};return d("x",re),d("y",se),new B(re,se,dt,p(re*se))}static normalizeZ(V){const re=r.invertBatch(V.map(se=>se.ez));return V.map((se,oe)=>se.toAffine(re[oe])).map(B.fromAffine)}_setWindowSize(V){S.setWindowSize(this,V)}assertValidity(){U(this)}equals(V){E(V);const{ex:re,ey:se,ez:oe}=this,{ex:de,ey:Z,ez:H}=V,X=p(re*H),y=p(de*oe),ce=p(se*H),fe=p(Z*oe);return X===y&&ce===fe}is0(){return this.equals(B.ZERO)}negate(){return new B(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:V}=e,{ex:re,ey:se,ez:oe}=this,de=p(re*re),Z=p(se*se),H=p(Jn*p(oe*oe)),X=p(V*de),y=re+se,ce=p(p(y*y)-de-Z),fe=X+Z,pe=fe-H,ae=X-Z,le=p(ce*pe),T=p(fe*ae),R=p(ce*ae),D=p(pe*fe);return new B(le,T,D,R)}add(V){E(V);const{a:re,d:se}=e,{ex:oe,ey:de,ez:Z,et:H}=this,{ex:X,ey:y,ez:ce,et:fe}=V;if(re===BigInt(-1)){const v=p((de-oe)*(y+X)),N=p((de+oe)*(y-X)),z=p(N-v);if(z===Ct)return this.double();const J=p(Z*Jn*fe),ue=p(H*Jn*ce),he=ue+J,xe=N+v,we=ue-J,b=p(he*z),f=p(xe*we),x=p(he*we),I=p(z*xe);return new B(b,f,I,x)}const pe=p(oe*X),ae=p(de*y),le=p(H*se*fe),T=p(Z*ce),R=p((oe+de)*(X+y)-pe-ae),D=T-le,K=T+le,G=p(ae-re*pe),Q=p(R*D),g=p(K*G),o=p(R*G),u=p(D*K);return new B(Q,g,u,o)}subtract(V){return this.add(V.negate())}wNAF(V){return S.wNAFCached(this,V,B.normalizeZ)}multiply(V){const re=V;tr("scalar",re,dt,n);const{p:se,f:oe}=this.wNAF(re);return B.normalizeZ([se,oe])[0]}multiplyUnsafe(V){const re=V;return tr("scalar",re,Ct,n),re===Ct?O:this.equals(O)||re===dt?this:this.equals(C)?this.wNAF(re).p:S.unsafeLadder(this,re)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return S.unsafeLadder(this,n).is0()}toAffine(V){return A(this,V)}clearCofactor(){const{h:V}=e;return V===dt?this:this.multiplyUnsafe(V)}static fromHex(V,re=!1){const{d:se,a:oe}=e,de=r.BYTES;V=lt("pointHex",V,de),rn("zip215",re);const Z=V.slice(),H=V[de-1];Z[de-1]=H&-129;const X=nn(Z),y=re?l:r.ORDER;tr("pointHex.y",X,Ct,y);const ce=p(X*X),fe=p(ce-dt),pe=p(se*ce-oe);let{isValid:ae,value:le}=w(fe,pe);if(!ae)throw new Error("Point.fromHex: invalid y coordinate");const T=(le&dt)===dt,R=(H&128)!==0;if(!re&&le===Ct&&R)throw new Error("Point.fromHex: x=0 and x_0=1");return R!==T&&(le=p(-le)),B.fromAffine({x:le,y:X})}static fromPrivateKey(V){return $(V).point}toRawBytes(){const{x:V,y:re}=this.toAffine(),se=zn(re,r.BYTES);return se[se.length-1]|=V&dt?128:0,se}toHex(){return _r(this.toRawBytes())}}B.BASE=new B(e.Gx,e.Gy,dt,p(e.Gx*e.Gy)),B.ZERO=new B(Ct,dt,dt,Ct);const{BASE:C,ZERO:O}=B,S=Uo(B,a*8);function k(j){return je(j,n)}function P(j){return k(nn(j))}function $(j){const V=a;j=lt("private key",j,V);const re=lt("hashed private key",s(j),2*V),se=_(re.slice(0,V)),oe=re.slice(V,2*V),de=P(se),Z=C.multiply(de),H=Z.toRawBytes();return{head:se,prefix:oe,scalar:de,point:Z,pointBytes:H}}function ie(j){return $(j).pointBytes}function M(j=new Uint8Array,...V){const re=Ve(...V);return P(s(m(re,lt("context",j),!!i)))}function W(j,V,re={}){j=lt("message",j),i&&(j=i(j));const{prefix:se,scalar:oe,pointBytes:de}=$(V),Z=M(re.context,se,j),H=C.multiply(Z).toRawBytes(),X=M(re.context,H,de,j),y=k(Z+X*oe);tr("signature.s",y,Ct,n);const ce=Ve(H,zn(y,r.BYTES));return lt("result",ce,a*2)}const ee=_d;function F(j,V,re,se=ee){const{context:oe,zip215:de}=se,Z=r.BYTES;j=lt("signature",j,2*Z),V=lt("message",V),de!==void 0&&rn("zip215",de),i&&(V=i(V));const H=nn(j.slice(Z,2*Z));let X,y,ce;try{X=B.fromHex(re,de),y=B.fromHex(j.slice(0,Z),de),ce=C.multiplyUnsafe(H)}catch{return!1}if(!de&&X.isSmallOrder())return!1;const fe=M(oe,y.toRawBytes(),X.toRawBytes(),V);return y.add(X.multiplyUnsafe(fe)).subtract(ce).clearCofactor().equals(B.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:ie,sign:W,verify:F,ExtendedPoint:B,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>c(r.BYTES),precompute(j=8,V=B.BASE){return V._setWindowSize(j),V.multiply(BigInt(3)),V}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ci=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Xo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Bd=BigInt(1),Jo=BigInt(2);BigInt(3);const Ad=BigInt(5),Cd=BigInt(8);function Fd(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Ci,a=t*t%s*t%s,h=Ot(a,Jo,s)*a%s,l=Ot(h,Bd,s)*t%s,p=Ot(l,Ad,s)*l%s,w=Ot(p,e,s)*p%s,_=Ot(w,r,s)*w%s,m=Ot(_,n,s)*_%s,d=Ot(m,i,s)*m%s,E=Ot(d,i,s)*m%s,A=Ot(E,e,s)*p%s;return{pow_p_5_8:Ot(A,Jo,s)*t%s,b2:a}}function Td(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Sd(t,e){const r=Ci,n=je(e*e*e,r),i=je(n*n*e,r),s=Fd(t*i).pow_p_5_8;let c=je(t*n*s,r);const a=je(e*c*c,r),h=c,l=je(c*Xo,r),p=a===t,w=a===je(-t,r),_=a===je(-t*Xo,r);return p&&(c=h),(w||_)&&(c=l),Bl(c,r)&&(c=je(-c,r)),{isValid:p||w,value:c}}const Nd=(()=>xi(Ci,void 0,!0))(),Rd=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Nd,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Cd,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:bd,randomBytes:Ws,adjustScalarBytes:Td,uvRatio:Sd}))(),Hr=(()=>vd(Rd))();var ec=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ct=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},it,ln,tc,rc;class Od{constructor(e={}){it.set(this,void 0),ln.set(this,void 0),this[tc]=this.entries.bind(this),this[rc]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,i=Date.now();ec(this,it,new Map([...r].map(([s,c])=>[s,{value:c,timestamp:i}])),"f"),ec(this,ln,n,"f")}prune(){const e=Date.now();for(const[r,n]of ct(this,it,"f").entries())e-n.timestamp>ct(this,ln,"f")&&ct(this,it,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return ct(this,it,"f").set(e,n),this}get(e){const r=ct(this,it,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>ct(this,ln,"f")){ct(this,it,"f").delete(e);return}return r.value}}clear(){ct(this,it,"f").clear()}entries(){const e=ct(this,it,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=ct(this,it,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return ct(this,it,"f").keys()}forEach(e,r){for(const[n,i]of ct(this,it,"f").entries())e.call(r,i.value,n,this)}has(e){return ct(this,it,"f").has(e)}delete(e){return ct(this,it,"f").delete(e)}get size(){return ct(this,it,"f").size}}it=new WeakMap,ln=new WeakMap,tc=Symbol.iterator,rc=Symbol.toStringTag;const nc=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},ic=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},Fi=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},Md=(t,e)=>{const r=Fi(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const e0=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function sc(t,e){const r=2+nc(t.byteLength+1),n=e.byteLength+r+t.byteLength;let i=0;const s=new Uint8Array(1+nc(n)+n);return s[i++]=48,i+=ic(s,i,n),s.set(e,i),i+=e.byteLength,s[i++]=3,i+=ic(s,i,t.byteLength+1),s[i++]=0,s.set(new Uint8Array(t),i),s}const ac=(t,e)=>{let r=0;const n=(a,h)=>{if(i[r++]!==a)throw new Error("Expected: "+h)},i=new Uint8Array(t);if(n(48,"sequence"),r+=Fi(i,r),!Nn(i.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const s=Md(i,r)-1;r+=Fi(i,r),n(0,"0 padding");const c=i.slice(r);if(s!==c.length)throw new Error(`DER payload mismatch: Expected length ${s} actual length ${c.length}`);return c};var oc=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},cc=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},t0,r0;let uc=class yn{constructor(e){if(t0.set(this,void 0),r0.set(this,void 0),e.byteLength!==yn.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");oc(this,t0,e,"f"),oc(this,r0,yn.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new yn(e)}static fromDer(e){return new yn(this.derDecode(e))}static derEncode(e){return sc(e,e0).buffer}static derDecode(e){const r=ac(e,e0);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return cc(this,t0,"f")}get derKey(){return cc(this,r0,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}};t0=new WeakMap,r0=new WeakMap,uc.RAW_KEY_LENGTH=32;class Ud{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class Id extends Ud{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var Ut=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},st=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},It,n0,i0,s0,a0,o0,c0,u0,$r;const fc=.5,lc=1.5,dc=500,hc=6e4,xc=9e5,pc=10;class f0{constructor(e=f0.default){It.set(this,void 0),n0.set(this,void 0),i0.set(this,void 0),s0.set(this,void 0),a0.set(this,void 0),o0.set(this,void 0),c0.set(this,void 0),u0.set(this,void 0),$r.set(this,0);const{initialInterval:r=dc,randomizationFactor:n=fc,multiplier:i=lc,maxInterval:s=hc,maxElapsedTime:c=xc,maxIterations:a=pc,date:h=Date}=e;Ut(this,It,r,"f"),Ut(this,n0,n,"f"),Ut(this,i0,i,"f"),Ut(this,s0,s,"f"),Ut(this,u0,h,"f"),Ut(this,a0,h.now(),"f"),Ut(this,o0,c,"f"),Ut(this,c0,a,"f")}get ellapsedTimeInMsec(){return st(this,u0,"f").now()-st(this,a0,"f")}get currentInterval(){return st(this,It,"f")}get count(){return st(this,$r,"f")}get randomValueFromInterval(){const e=st(this,n0,"f")*st(this,It,"f"),r=st(this,It,"f")-e,n=st(this,It,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return Ut(this,It,Math.min(st(this,It,"f")*st(this,i0,"f"),st(this,s0,"f")),"f"),Ut(this,$r,(e=st(this,$r,"f"),e++,e),"f"),st(this,It,"f")}next(){return this.ellapsedTimeInMsec>=st(this,o0,"f")||st(this,$r,"f")>=st(this,c0,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}It=new WeakMap,n0=new WeakMap,i0=new WeakMap,s0=new WeakMap,a0=new WeakMap,o0=new WeakMap,c0=new WeakMap,u0=new WeakMap,$r=new WeakMap,f0.default={initialInterval:dc,randomizationFactor:fc,multiplier:lc,maxInterval:hc,maxElapsedTime:xc,maxIterations:pc,date:Date};var l0=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Ae=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},kt,Ft,Br,d0,Vr,Gr,Ar,Cr,yc,h0,x0,$t;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})($t||($t={}));const p0=5*60*1e3,kd="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Pd="ic0.app",Dd=".ic0.app",zd="icp0.io",jd=".icp0.io",qd="icp-api.io",Hd=".icp-api.io";class Ti extends ut{constructor(e){super(e),this.message=e}}class y0 extends ut{constructor(e){super(e),this.message=e}}function $d(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new Ti("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof globalThis<"u")if(globalThis.fetch)t=globalThis.fetch.bind(globalThis);else throw new Ti("Fetch implementation was not available. You appear to be in a Node.js context, but globalThis.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new Ti("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or globalThis context.")}class Vt{constructor(e={}){var r;if(kt.add(this),this.rootKey=Pt(kd),this._timeDiffMsecs=0,this._rootKeyFetched=!1,Ft.set(this,void 0),Br.set(this,void 0),this._isAgent=!0,d0.set(this,0),this.log=new Id,Vr.set(this,[]),Gr.set(this,[]),Ar.set(this,new Od({expirationTime:5*60*1e3})),Cr.set(this,!0),x0.set(this,(i,s)=>{if(Ae(this,Cr,"f")===!1)return i;if(!s)throw new Mt("Invalid signature from replica signed query: no matching node key found.");const{status:c,signatures:a=[],requestId:h}=i,l=new TextEncoder().encode("\vic-response");for(const p of a){const{timestamp:w,identity:_}=p,m=Ee.fromUint8Array(_).toText();let d;if(c==="replied"){const{reply:C}=i;d=On({status:c,reply:C,timestamp:BigInt(w),request_id:h})}else if(c==="rejected"){const{reject_code:C,reject_message:O,error_code:S}=i;d=On({status:c,reject_code:C,reject_message:O,error_code:S,timestamp:BigInt(w),request_id:h})}else throw new Error(`Unknown status: ${c}`);const E=_t(l,new Uint8Array(d)),A=s==null?void 0:s.nodeKeys.get(m);if(!A)throw new Mt("Invalid signature from replica signed query: no matching node key found.");const U=uc.fromDer(A).rawKey;if(Hr.verify(p.signature,new Uint8Array(E),new Uint8Array(U)))return i;throw new Mt(`Invalid signature from replica ${m} signed query.`)}return i}),e.source){if(!(e.source instanceof Vt))throw new Error("An Agent's source can only be another HttpAgent");this._identity=e.source._identity,this._fetch=e.source._fetch,this._host=e.source._host,this._credentials=e.source._credentials}else this._fetch=e.fetch||$d()||fetch.bind(globalThis),this._fetchOptions=e.fetchOptions,this._callOptions=e.callOptions;if(e.host!==void 0)!e.host.match(/^[a-z]+:/)&&typeof window<"u"?this._host=new URL(window.location.protocol+"//"+e.host):this._host=new URL(e.host);else if(e.source!==void 0)this._host=e.source._host;else{const i=typeof window<"u"?window.location:void 0;i||(this._host=new URL("https://icp-api.io"),this.log.warn("Could not infer host from window.location, defaulting to mainnet gateway of https://icp-api.io. Please provide a host to the HttpAgent constructor to avoid this warning."));const s=["ic0.app","icp0.io","127.0.0.1","localhost"],c=[".github.dev",".gitpod.io"],a=i==null?void 0:i.hostname;let h;a&&typeof a=="string"&&(c.some(l=>a.endsWith(l))?h=a:h=s.find(l=>a.endsWith(l))),i&&h?this._host=new URL(`${i.protocol}//${h}${i.port?":"+i.port:""}`):(this._host=new URL("https://icp-api.io"),this.log.warn("Could not infer host from window.location, defaulting to mainnet gateway of https://icp-api.io. Please provide a host to the HttpAgent constructor to avoid this warning."))}e.verifyQuerySignatures!==void 0&&l0(this,Cr,e.verifyQuerySignatures,"f"),l0(this,Ft,(r=e.retryTimes)!==null&&r!==void 0?r:3,"f");const n=()=>new f0({maxIterations:Ae(this,Ft,"f")});if(l0(this,Br,e.backoffStrategy||n,"f"),this._host.hostname.endsWith(Dd)?this._host.hostname=Pd:this._host.hostname.endsWith(jd)?this._host.hostname=zd:this._host.hostname.endsWith(Hd)&&(this._host.hostname=qd),e.credentials){const{name:i,password:s}=e.credentials;this._credentials=`${i}${s?":"+s:""}`}this._identity=Promise.resolve(e.identity||new kr),this.addTransform("update",po(ui)),e.useQueryNonces&&this.addTransform("query",po(ui)),e.logToConsole&&this.log.subscribe(i=>{i.level==="error"?console.error(i.message):i.level==="warn"?console.warn(i.message):console.log(i.message)})}get waterMark(){return Ae(this,d0,"f")}isLocal(){const e=this._host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const i=Ae(this,Gr,"f").findIndex(s=>(s.priority||0)<n);Ae(this,Gr,"f").splice(i>=0?i:Ae(this,Gr,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const i=Ae(this,Vr,"f").findIndex(s=>(s.priority||0)<n);Ae(this,Vr,"f").splice(i>=0?i:Ae(this,Vr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!this._identity)throw new y0("This identity has expired due this application's security policy. Please refresh your authentication.");return(await this._identity).getPrincipal()}async call(e,r,n){const i=await(n!==void 0?await n:await this._identity);if(!i)throw new y0("This identity has expired due this application's security policy. Please refresh your authentication.");const s=Ee.from(e),c=r.effectiveCanisterId?Ee.from(r.effectiveCanisterId):s,a=i.getPrincipal()||Ee.anonymous();let h=new kn(p0);Math.abs(this._timeDiffMsecs)>1e3*30&&(h=new kn(p0+this._timeDiffMsecs));const l={request_type:ci.Call,canister_id:s,method_name:r.methodName,arg:r.arg,sender:a,ingress_expiry:h};let p=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{})},endpoint:"call",body:l});p=await i.transformRequest(p);const w=oi(p.body);this.log.print(`fetching "/api/v2/canister/${c.toText()}/call" with request:`,p);const _=Ae(this,Br,"f").call(this),m=Ae(this,kt,"m",h0).call(this,{request:()=>this._fetch(""+new URL(`/api/v2/canister/${c.toText()}/call`,this._host),Object.assign(Object.assign(Object.assign({},this._callOptions),p.request),{body:w})),backoff:_,tries:0}),[d,E]=await Promise.all([m,en(l)]),A=await d.arrayBuffer(),U=d.status===200&&A.byteLength>0?zt(A):null;return{requestId:E,response:{ok:d.ok,status:d.status,statusText:d.statusText,body:U,headers:Pn(d.headers)}}}async query(e,r,n){const i=Ae(this,Br,"f").call(this),s=r.effectiveCanisterId?Ee.from(r.effectiveCanisterId):Ee.from(e);this.log.print(`ecid ${s.toString()}`),this.log.print(`canisterId ${e.toString()}`);const c=async()=>{const p=await(n!==void 0?await n:await this._identity);if(!p)throw new y0("This identity has expired due this application's security policy. Please refresh your authentication.");const w=Ee.from(e),_=(p==null?void 0:p.getPrincipal())||Ee.anonymous(),m={request_type:"query",canister_id:w,method_name:r.methodName,arg:r.arg,sender:_,ingress_expiry:new kn(p0)},d=await en(m);let E=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{})},endpoint:"read",body:m});E=await(p==null?void 0:p.transformRequest(E));const A=oi(E.body),U={canister:w.toText(),ecid:s,transformedRequest:E,body:A,requestId:d,backoff:i,tries:0};return await Ae(this,kt,"m",yc).call(this,U)},a=async()=>{if(!Ae(this,Cr,"f"))return;const p=Ae(this,Ar,"f").get(s.toString());return p||(await this.fetchSubnetKeys(s.toString()),Ae(this,Ar,"f").get(s.toString()))},[h,l]=await Promise.all([c(),a()]);if(this.log.print("Query response:",h),!Ae(this,Cr,"f"))return h;try{return Ae(this,x0,"f").call(this,h,l)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),Ae(this,Ar,"f").delete(e.toString()),await this.fetchSubnetKeys(s.toString());const w=Ae(this,Ar,"f").get(e.toString());if(!w)throw new Mt("Invalid signature from replica signed query: no matching node key found.");return Ae(this,x0,"f").call(this,h,w)}}async createReadStateRequest(e,r){const n=await(r!==void 0?await r:await this._identity);if(!n)throw new y0("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||Ee.anonymous(),s=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new kn(p0)}});return n==null?void 0:n.transformRequest(s)}async readState(e,r,n,i){const s=typeof e=="string"?Ee.fromText(e):e,c=i??await this.createReadStateRequest(r,n),a=oi(c.body);this.log.print(`fetching "/api/v2/canister/${s}/read_state" with request:`,c);const h=Ae(this,Br,"f").call(this),l=await Ae(this,kt,"m",h0).call(this,{request:()=>this._fetch(""+new URL(`/api/v2/canister/${s.toString()}/read_state`,this._host),Object.assign(Object.assign(Object.assign({},this._fetchOptions),c.request),{body:a})),backoff:h,tries:0});if(!l.ok)throw new Error(`Server returned an error:
  Code: ${l.status} (${l.statusText})
  Body: ${await l.text()}
`);const p=zt(await l.arrayBuffer());this.log.print("Read state response:",p);const w=await this.parseTimeFromResponse(p);return w>0&&(this.log.print("Read state response time:",w),l0(this,d0,w,"f")),p}async parseTimeFromResponse(e){let r;if(e.certificate){const n=zt(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=qr(["time"],r);if(i.status!==Ye.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const s=Ei(ri(i.value));return this.log.print("Time from response:",s),this.log.print("Time from response in milliseconds:",Number(s)),Number(s)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){const r=await Promise.resolve().then(()=>ed),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const s=(await r.request({canisterId:e??Ee.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:this,paths:["time"]})).get("time");s&&(this._timeDiffMsecs=Number(s)-Number(n))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{};this.log.print('fetching "/api/v2/status"');const r=Ae(this,Br,"f").call(this),n=await Ae(this,kt,"m",h0).call(this,{backoff:r,request:()=>this._fetch(""+new URL("/api/v2/status",this._host),Object.assign({headers:e},this._fetchOptions)),tries:0});return zt(await n.arrayBuffer())}async fetchRootKey(){return this._rootKeyFetched||(this.rootKey=(await this.status()).root_key,this._rootKeyFetched=!0),this.rootKey}invalidateIdentity(){this._identity=null}replaceIdentity(e){this._identity=Promise.resolve(e)}async fetchSubnetKeys(e){const r=Ee.from(e),i=(await Lo({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return Ae(this,Ar,"f").set(r.toText(),i),i}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of Ae(this,Gr,"f"))r=r.then(i=>n(i).then(s=>s||i));else for(const n of Ae(this,Vr,"f"))r=r.then(i=>n(i).then(s=>s||i));return r}}Ft=new WeakMap,Br=new WeakMap,d0=new WeakMap,Vr=new WeakMap,Gr=new WeakMap,Ar=new WeakMap,Cr=new WeakMap,x0=new WeakMap,kt=new WeakSet,yc=async function t(e){var r,n;const{ecid:i,transformedRequest:s,body:c,requestId:a,backoff:h,tries:l}=e,p=l===0?0:h.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:l,backoff:h,delay:p}),p===null)throw new ut(`Timestamp failed to pass the watermark after retrying the configured ${Ae(this,Ft,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);p>0&&await new Promise(d=>setTimeout(d,p));let w;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,s);const d=await this._fetch(""+new URL(`/api/v2/canister/${i.toString()}/query`,this._host),Object.assign(Object.assign(Object.assign({},this._fetchOptions),s.request),{body:c}));if(d.status===200){const E=zt(await d.arrayBuffer());w=Object.assign(Object.assign({},E),{httpDetails:{ok:d.ok,status:d.status,statusText:d.statusText,headers:Pn(d.headers)},requestId:a})}else throw new yo(`Gateway returned an error:
  Code: ${d.status} (${d.statusText})
  Body: ${await d.text()}
`,{ok:d.ok,status:d.status,statusText:d.statusText,headers:Pn(d.headers)})}catch(d){if(l<Ae(this,Ft,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${d}
  Retrying query.`),await Ae(this,kt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:l+1}));throw d}const _=(n=(r=w.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!Ae(this,Cr,"f"))return w;if(!_)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const m=Number(BigInt(_)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:m}),Number(this.waterMark)>m){const d=new ut("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",d,{timestamp:_,waterMark:this.waterMark}),l<Ae(this,Ft,"f"))return await Ae(this,kt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:l+1}));throw new ut(`Timestamp failed to pass the watermark after retrying the configured ${Ae(this,Ft,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return w},h0=async function t(e){const{request:r,backoff:n,tries:i}=e,s=i===0?0:n.next();if(s===null)throw new ut(`Timestamp failed to pass the watermark after retrying the configured ${Ae(this,Ft,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);s>0&&await new Promise(l=>setTimeout(l,s));let c;try{c=await r()}catch(l){if(Ae(this,Ft,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${l}
  Retrying request.`),await Ae(this,kt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw l}if(c.ok)return c;const a=await c.clone().text(),h=`Server returned an error:
  Code: ${c.status} (${c.statusText})
  Body: ${a}
`;if(i<Ae(this,Ft,"f"))return await Ae(this,kt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw new yo(h,{ok:c.ok,status:c.status,statusText:c.statusText,headers:Pn(c.headers)})};var gc;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(gc||(gc={}));function wc(){const t=typeof window>"u"?typeof globalThis>"u"?typeof self>"u"?void 0:self.ic.agent:globalThis.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const Vd=5*60*1e3;function Gd(){return Zd(Ld(Wd(),1e3),Yd(1e3,1.2),Kd(Vd))}function Wd(){let t=!0;return async()=>t?(t=!1,!0):!1}function Ld(t,e){return async(r,n,i)=>{if(await t(r,n,i))return new Promise(s=>setTimeout(s,e))}}function Kd(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${tt(n)}
  Request status: ${i}
`)}}function Yd(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function Zd(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}async function bc(t,e,r,n,i,s){var c;const a=[new TextEncoder().encode("request_status"),r],h=i??await((c=t.createReadStateRequest)===null||c===void 0?void 0:c.call(t,{paths:[a]})),l=await t.readState(e,{paths:[a]},void 0,h);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const p=await jr.create({certificate:l.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:s}),w=vr(p.lookup([...a,new TextEncoder().encode("status")]));let _;switch(typeof w>"u"?_=$t.Unknown:_=new TextDecoder().decode(w),_){case $t.Replied:return vr(p.lookup([...a,"reply"]));case $t.Received:case $t.Unknown:case $t.Processing:return await n(e,r,_),bc(t,e,r,n,h);case $t.Rejected:{const m=new Uint8Array(vr(p.lookup([...a,"reject_code"])))[0],d=new TextDecoder().decode(vr(p.lookup([...a,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${tt(r)}
  Reject code: ${m}
  Reject text: ${d}
`)}case $t.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${tt(r)}
`)}throw new Error("unreachable")}const Qd=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,s=i,c=t.Record({network:e}),a=t.Nat64,h=t.Vec(a),l=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),p=t.Vec(t.Nat8),w=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),_=t.Record({height:t.Nat32,value:i,outpoint:w}),m=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:t.Nat32,tip_block_hash:p,utxos:t.Vec(_)}),d=t.Record({transaction:t.Vec(t.Nat8),network:e}),E=t.Principal,A=t.Record({canister_id:E,num_requested_changes:t.Opt(t.Nat64)}),U=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),B=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),C=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:U,details:B}),O=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(C),total_num_changes:t.Nat64}),S=t.Record({canister_id:E}),k=t.Variant({controllers:t.Null,public:t.Null}),P=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:k,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),$=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:P,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),ie=t.Record({canister_id:E}),M=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(k),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),W=t.Record({settings:t.Opt(M),sender_canister_version:t.Opt(t.Nat64)}),ee=t.Record({canister_id:E}),F=t.Record({canister_id:E}),q=t.Record({canister_id:E}),j=t.Variant({secp256k1:t.Null}),V=t.Record({key_id:t.Record({name:t.Text,curve:j}),canister_id:t.Opt(E),derivation_path:t.Vec(t.Vec(t.Nat8))}),re=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),se=t.Record({canister_id:E}),oe=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),de=t.Record({canister_log_records:t.Vec(oe)}),Z=t.Record({value:t.Text,name:t.Text}),H=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(Z)}),X=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:H})],[H],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(Z)}),y=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),ce=t.Record({hash:t.Vec(t.Nat8)}),fe=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:y,chunk_hashes_list:t.Vec(ce),target_canister:E,store_canister:t.Opt(E),sender_canister_version:t.Opt(t.Nat64)}),pe=t.Vec(t.Nat8),ae=t.Record({arg:t.Vec(t.Nat8),wasm_module:pe,mode:y,canister_id:E,sender_canister_version:t.Opt(t.Nat64)}),le=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),T=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),R=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(T)})),D=t.Record({settings:t.Opt(M),specified_id:t.Opt(E),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),K=t.Record({canister_id:E}),G=t.Record({canister_id:E,amount:t.Nat}),Q=t.Vec(t.Nat8),g=t.Record({key_id:t.Record({name:t.Text,curve:j}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),o=t.Record({signature:t.Vec(t.Nat8)}),u=t.Record({canister_id:E}),v=t.Record({canister_id:E}),N=t.Record({canister_id:E}),z=t.Vec(ce),J=t.Record({canister_id:E,sender_canister_version:t.Opt(t.Nat64)}),ue=t.Record({canister_id:t.Principal,settings:M,sender_canister_version:t.Opt(t.Nat64)}),he=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),xe=ce;return t.Service({bitcoin_get_balance:t.Func([n],[s],[]),bitcoin_get_current_fee_percentiles:t.Func([c],[h],[]),bitcoin_get_utxos:t.Func([l],[m],[]),bitcoin_send_transaction:t.Func([d],[],[]),canister_info:t.Func([A],[O],[]),canister_status:t.Func([S],[$],[]),clear_chunk_store:t.Func([ie],[],[]),create_canister:t.Func([W],[ee],[]),delete_canister:t.Func([F],[],[]),deposit_cycles:t.Func([q],[],[]),ecdsa_public_key:t.Func([V],[re],[]),fetch_canister_logs:t.Func([se],[de],["query"]),http_request:t.Func([X],[H],[]),install_chunked_code:t.Func([fe],[],[]),install_code:t.Func([ae],[],[]),node_metrics_history:t.Func([le],[R],[]),provisional_create_canister_with_cycles:t.Func([D],[K],[]),provisional_top_up_canister:t.Func([G],[],[]),raw_rand:t.Func([],[Q],[]),sign_with_ecdsa:t.Func([g],[o],[]),start_canister:t.Func([u],[],[]),stop_canister:t.Func([v],[],[]),stored_chunks:t.Func([N],[z],[]),uninstall_code:t.Func([J],[],[]),update_settings:t.Func([ue],[],[]),upload_chunk:t.Func([he],[xe],[])})};class mc extends ut{constructor(e,r,n,i){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(s=>`  "${s}": ${JSON.stringify(i[s])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=i}}class Xd extends mc{constructor(e,r,n){var i;super(e,r,"query",{Status:n.status,Code:(i=I0[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class Jd extends mc{constructor(e,r,n,i){super(e,r,"update",Object.assign({"Request ID":tt(n)},i.body?Object.assign(Object.assign({},i.body.error_code?{"Error code":i.body.error_code}:{}),{"Reject code":String(i.body.reject_code),"Reject message":i.body.reject_message}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i}}const bt=Symbol.for("ic-agent-metadata");class cr{constructor(e){this[bt]=Object.freeze(e)}static agentOf(e){return e[bt].config.agent}static interfaceOf(e){return e[bt].service}static canisterIdOf(e){return Ee.from(e[bt].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,i=e.arg?[...new Uint8Array(e.arg)]:[],s=[...new Uint8Array(e.module)],c=typeof r.canisterId=="string"?Ee.fromText(r.canisterId):r.canisterId;await Ec(r).install_code({mode:n,arg:i,wasm_module:s,canister_id:c,sender_canister_version:[]})}static async createCanister(e,r){function n(s){return[{controllers:s.controllers?[s.controllers]:[],compute_allocation:s.compute_allocation?[s.compute_allocation]:[],freezing_threshold:s.freezing_threshold?[s.freezing_threshold]:[],memory_allocation:s.memory_allocation?[s.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await Ec(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(e,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(e,r){const n=e({IDL:xf});class i extends cr{constructor(c){if(!c.canisterId)throw new ut(`Canister ID is required, but received ${typeof c.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const a=typeof c.canisterId=="string"?Ee.fromText(c.canisterId):c.canisterId;super({config:Object.assign(Object.assign(Object.assign({},_c),c),{canisterId:a}),service:n});for(const[h,l]of n._fields)r!=null&&r.httpDetails&&l.annotations.push(Si),this[h]=eh(this,h,l,c.blsVerify)}}return i}static createActor(e,r){if(!r.canisterId)throw new ut(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}}function g0(t,e){const r=ua(t,Lt.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const _c={pollingStrategyFactory:Gd},Si="http-details";function eh(t,e,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(c,...a)=>{var h,l;c=Object.assign(Object.assign({},c),(l=(h=t[bt].config).queryTransform)===null||l===void 0?void 0:l.call(h,e,a,Object.assign(Object.assign({},t[bt].config),c)));const p=c.agent||t[bt].config.agent||wc(),w=Ee.from(c.canisterId||t[bt].config.canisterId),_=W0(r.argTypes,a),m=await p.query(w,{methodName:e,arg:_,effectiveCanisterId:c.effectiveCanisterId});switch(m.status){case"rejected":throw new Xd(w,e,m);case"replied":return r.annotations.includes(Si)?{httpDetails:m.httpDetails,result:g0(r.retTypes,m.reply.arg)}:g0(r.retTypes,m.reply.arg)}}:i=async(c,...a)=>{var h,l;c=Object.assign(Object.assign({},c),(l=(h=t[bt].config).callTransform)===null||l===void 0?void 0:l.call(h,e,a,Object.assign(Object.assign({},t[bt].config),c)));const p=c.agent||t[bt].config.agent||wc(),{canisterId:w,effectiveCanisterId:_,pollingStrategyFactory:m}=Object.assign(Object.assign(Object.assign({},_c),t[bt].config),c),d=Ee.from(w),E=_!==void 0?Ee.from(_):d,A=W0(r.argTypes,a),{requestId:U,response:B}=await p.call(d,{methodName:e,arg:A,effectiveCanisterId:E});if(!B.ok||B.body)throw new Jd(d,e,U,B);const C=m(),O=await bc(p,E,U,C,n),S=r.annotations.includes(Si);if(O!==void 0)return S?{httpDetails:B,result:g0(r.retTypes,O)}:g0(r.retTypes,O);if(r.retTypes.length===0)return S?{httpDetails:B,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const s=(...c)=>i({},...c);return s.withOptions=c=>(...a)=>i(c,...a),s}function Ec(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:Ee.from(t.effectiveCanisterId)};const i=n[0];let s=Ee.fromHex("");return i&&typeof i=="object"&&i.canister_id&&(s=Ee.from(i.canister_id)),{effectiveCanisterId:s}}return cr.createActor(Qd,Object.assign(Object.assign(Object.assign({},t),{canisterId:Ee.fromHex("")}),{callTransform:e,queryTransform:e}))}var w0=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ur=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},b0,m0,Wr,Lr;function vc(t){return t!==null&&typeof t=="object"}class Gt{constructor(e){if(b0.set(this,void 0),m0.set(this,void 0),e.byteLength!==Gt.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");w0(this,b0,e,"f"),w0(this,m0,Gt.derEncode(e),"f")}static from(e){if(typeof e=="string"){const r=Pt(e);return this.fromRaw(r)}else if(vc(e)){const r=e;if(vc(r)&&Object.hasOwnProperty.call(r,"__derEncodedPublicKey__"))return this.fromDer(r);if(ArrayBuffer.isView(r)){const n=r;return this.fromRaw(ri(n.buffer))}else{if(r instanceof ArrayBuffer)return this.fromRaw(r);if("rawKey"in r)return this.fromRaw(r.rawKey);if("derKey"in r)return this.fromDer(r.derKey);if("toDer"in r)return this.fromDer(r.toDer())}}throw new Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(e){return new Gt(e)}static fromDer(e){return new Gt(this.derDecode(e))}static derEncode(e){const r=sc(e,e0).buffer;return r.__derEncodedPublicKey__=void 0,r}static derDecode(e){const r=ac(e,e0);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return ur(this,b0,"f")}get derKey(){return ur(this,m0,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}b0=new WeakMap,m0=new WeakMap,Gt.RAW_KEY_LENGTH=32;class fr extends ni{constructor(e,r){super(),Wr.set(this,void 0),Lr.set(this,void 0),w0(this,Wr,Gt.from(e),"f"),w0(this,Lr,new Uint8Array(r),"f")}static generate(e){if(e&&e.length!==32)throw new Error("Ed25519 Seed needs to be 32 bytes long.");e||(e=Hr.utils.randomPrivateKey()),Nn(e,new Uint8Array(new Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");const r=new Uint8Array(32);for(let i=0;i<32;i++)r[i]=new Uint8Array(e)[i];const n=Hr.getPublicKey(r);return fr.fromKeyPair(n,r)}static fromParsedJson(e){const[r,n]=e;return new fr(Gt.fromDer(Pt(r)),Pt(n))}static fromJSON(e){const r=JSON.parse(e);if(Array.isArray(r)){if(typeof r[0]=="string"&&typeof r[1]=="string")return this.fromParsedJson([r[0],r[1]]);throw new Error("Deserialization error: JSON must have at least 2 items.")}throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(e)}`)}static fromKeyPair(e,r){return new fr(Gt.fromRaw(e),r)}static fromSecretKey(e){const r=Hr.getPublicKey(new Uint8Array(e));return fr.fromKeyPair(r,e)}toJSON(){return[tt(ur(this,Wr,"f").toDer()),tt(ur(this,Lr,"f"))]}getKeyPair(){return{secretKey:ur(this,Lr,"f"),publicKey:ur(this,Wr,"f")}}getPublicKey(){return ur(this,Wr,"f")}async sign(e){const r=new Uint8Array(e),n=Jr(Hr.sign(r,ur(this,Lr,"f").slice(0,32)));return Object.defineProperty(n,"__signature__",{enumerable:!1,value:void 0}),n}static verify(e,r,n){const[i,s,c]=[e,r,n].map(a=>(typeof a=="string"&&(a=Pt(a)),a instanceof Uint8Array&&(a=a.buffer),new Uint8Array(a)));return Hr.verify(s,i,c)}}Wr=new WeakMap,Lr=new WeakMap;class Ni extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,Ni.prototype)}}function Bc(t){if(typeof globalThis<"u"&&globalThis.crypto&&globalThis.crypto.subtle)return globalThis.crypto.subtle;if(t)return t;if(typeof crypto<"u"&&crypto.subtle)return crypto.subtle;throw new Ni("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class _0 extends ni{constructor(e,r,n){super(),this._keyPair=e,this._derKey=r,this._subtleCrypto=n}static async generate(e){const{extractable:r=!1,keyUsages:n=["sign","verify"],subtleCrypto:i}=e??{},s=Bc(i),c=await s.generateKey({name:"ECDSA",namedCurve:"P-256"},r,n),a=await s.exportKey("spki",c.publicKey);return new this(c,a,s)}static async fromKeyPair(e,r){const n=Bc(r),i=await n.exportKey("spki",e.publicKey);return new _0(e,i,n)}getKeyPair(){return this._keyPair}getPublicKey(){const e=this._derKey,r=Object.create(this._keyPair.publicKey);return r.toDer=function(){return e},r}async sign(e){const r={name:"ECDSA",hash:{name:"SHA-256"}};return this._keyPair.privateKey,await this._subtleCrypto.sign(r,this._keyPair.privateKey,e)}}var th=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},dn=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},lr;class rh{constructor(e){lr.set(this,void 0),th(this,lr,e,"f")}get rawKey(){return dn(this,lr,"f").rawKey}get derKey(){return dn(this,lr,"f").derKey}toDer(){return dn(this,lr,"f").toDer()}getPublicKey(){return dn(this,lr,"f")}getPrincipal(){return Ee.from(dn(this,lr,"f").rawKey)}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}lr=new WeakMap;var nh=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ih=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},sh=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},E0;const ah=new TextEncoder().encode("ic-request-auth-delegation"),oh=new TextEncoder().encode(`
ic-request`);function Ri(t){if(typeof t!="string"||t.length<64)throw new Error("Invalid public key.");return Pt(t)}class Oi{constructor(e,r,n){this.pubkey=e,this.expiration=r,this.targets=n}toCBOR(){return ft.value.map(Object.assign({pubkey:ft.value.bytes(this.pubkey),expiration:ft.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:ft.value.array(this.targets.map(e=>ft.value.bytes(e.toUint8Array())))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:tt(this.pubkey)},this.targets&&{targets:this.targets.map(e=>e.toHex())})}}async function ch(t,e,r,n){const i=new Oi(e.toDer(),BigInt(+r)*BigInt(1e6),n),s=new Uint8Array([...ah,...new Uint8Array(en(i))]),c=await t.sign(s);return{delegation:i,signature:c}}class v0{constructor(e,r){this.delegations=e,this.publicKey=r}static async create(e,r,n=new Date(Date.now()+15*60*1e3),i={}){var s,c;const a=await ch(e,r,n,i.targets);return new v0([...((s=i.previous)===null||s===void 0?void 0:s.delegations)||[],a],((c=i.previous)===null||c===void 0?void 0:c.publicKey)||e.getPublicKey().toDer())}static fromJSON(e){const{publicKey:r,delegations:n}=typeof e=="string"?JSON.parse(e):e;if(!Array.isArray(n))throw new Error("Invalid delegations.");const i=n.map(s=>{const{delegation:c,signature:a}=s,{pubkey:h,expiration:l,targets:p}=c;if(p!==void 0&&!Array.isArray(p))throw new Error("Invalid targets.");return{delegation:new Oi(Ri(h),BigInt("0x"+l),p&&p.map(w=>{if(typeof w!="string")throw new Error("Invalid target.");return Ee.fromHex(w)})),signature:Ri(a)}});return new this(i,Ri(r))}static fromDelegations(e,r){return new this(e,r)}toJSON(){return{delegations:this.delegations.map(e=>{const{delegation:r,signature:n}=e,{targets:i}=r;return{delegation:Object.assign({expiration:r.expiration.toString(16),pubkey:tt(r.pubkey)},i&&{targets:i.map(s=>s.toHex())}),signature:tt(n)}}),publicKey:tt(this.publicKey)}}}class Ac extends ni{constructor(e,r){super(),this._inner=e,this._delegation=r}static fromDelegation(e,r){return new this(e,r)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(e){return this._inner.sign(e)}async transformRequest(e){const{body:r}=e,n=sh(e,["body"]),i=await en(r);return Object.assign(Object.assign({},n),{body:{content:r,sender_sig:await this.sign(new Uint8Array([...oh,...new Uint8Array(i)])),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class B0 extends rh{constructor(e,r){super(e),E0.set(this,void 0),nh(this,E0,r,"f")}get delegation(){return ih(this,E0,"f")}static fromDelegation(e,r){return new B0(e,r)}}E0=new WeakMap;function uh(t,e){for(const{delegation:i}of t.delegations)if(+new Date(Number(i.expiration/BigInt(1e6)))<=+Date.now())return!1;const r=[],n=e==null?void 0:e.scope;n&&(Array.isArray(n)?r.push(...n.map(i=>typeof i=="string"?Ee.fromText(i):i)):r.push(typeof n=="string"?Ee.fromText(n):n));for(const i of r){const s=i.toText();for(const{delegation:c}of t.delegations){if(c.targets===void 0)continue;let a=!0;for(const h of c.targets)if(h.toText()===s){a=!1;break}if(a)return!1}}return!0}var Cc;(function(t){t[t.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"})(Cc||(Cc={}));const Fc=["mousedown","mousemove","keydown","touchstart","wheel"];class Tc{constructor(e={}){var r;this.callbacks=[],this.idleTimeout=10*60*1e3,this.timeoutID=void 0;const{onIdle:n,idleTimeout:i=10*60*1e3}=e||{};this.callbacks=n?[n]:[],this.idleTimeout=i;const s=this._resetTimer.bind(this);window.addEventListener("load",s,!0),Fc.forEach(function(a){document.addEventListener(a,s,!0)});const c=(a,h)=>{let l;return(...p)=>{const w=this,_=function(){l=void 0,a.apply(w,p)};clearTimeout(l),l=window.setTimeout(_,h)}};if(e!=null&&e.captureScroll){const a=c(s,(r=e==null?void 0:e.scrollDebounce)!==null&&r!==void 0?r:100);window.addEventListener("scroll",a,!0)}s()}static create(e={}){return new this(e)}registerCallback(e){this.callbacks.push(e)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);const e=this._resetTimer.bind(this);Fc.forEach(function(r){document.removeEventListener(r,e,!0)}),this.callbacks.forEach(r=>r())}_resetTimer(){const e=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(e,this.idleTimeout)}}const fh=(t,e)=>e.some(r=>t instanceof r);let Sc,Nc;function lh(){return Sc||(Sc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dh(){return Nc||(Nc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rc=new WeakMap,Mi=new WeakMap,Oc=new WeakMap,Ui=new WeakMap,Ii=new WeakMap;function hh(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",c)},s=()=>{r(dr(t.result)),i()},c=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",c)});return e.then(r=>{r instanceof IDBCursor&&Rc.set(r,t)}).catch(()=>{}),Ii.set(e,t),e}function xh(t){if(Mi.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",c),t.removeEventListener("abort",c)},s=()=>{r(),i()},c=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",c),t.addEventListener("abort",c)});Mi.set(t,e)}let ki={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Mi.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oc.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return dr(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ph(t){ki=t(ki)}function yh(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Pi(this),e,...r);return Oc.set(n,e.sort?e.sort():[e]),dr(n)}:dh().includes(t)?function(...e){return t.apply(Pi(this),e),dr(Rc.get(this))}:function(...e){return dr(t.apply(Pi(this),e))}}function gh(t){return typeof t=="function"?yh(t):(t instanceof IDBTransaction&&xh(t),fh(t,lh())?new Proxy(t,ki):t)}function dr(t){if(t instanceof IDBRequest)return hh(t);if(Ui.has(t))return Ui.get(t);const e=gh(t);return e!==t&&(Ui.set(t,e),Ii.set(e,t)),e}const Pi=t=>Ii.get(t);function wh(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const c=indexedDB.open(t,e),a=dr(c);return n&&c.addEventListener("upgradeneeded",h=>{n(dr(c.result),h.oldVersion,h.newVersion,dr(c.transaction),h)}),r&&c.addEventListener("blocked",h=>r(h.oldVersion,h.newVersion,h)),a.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const bh=["get","getKey","getAll","getAllKeys","count"],mh=["put","add","delete","clear"],Di=new Map;function Mc(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Di.get(e))return Di.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=mh.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||bh.includes(r)))return;const s=async function(c,...a){const h=this.transaction(c,i?"readwrite":"readonly");let l=h.store;return n&&(l=l.index(a.shift())),(await Promise.all([l[r](...a),i&&h.done]))[0]};return Di.set(e,s),s}ph(t=>({...t,get:(e,r,n)=>Mc(e,r)||t.get(e,r,n),has:(e,r)=>!!Mc(e,r)||t.has(e,r)}));const Uc="auth-client-db",Ic="ic-keyval",_h=async(t=Uc,e=Ic,r)=>(kc&&(localStorage!=null&&localStorage.getItem(xr))&&(localStorage.removeItem(xr),localStorage.removeItem(hr)),await wh(t,r,{upgrade:n=>{n.objectStoreNames,n.objectStoreNames.contains(e)&&n.clear(e),n.createObjectStore(e)}}));async function Eh(t,e,r){return await t.get(e,r)}async function vh(t,e,r,n){return await t.put(e,n,r)}async function Bh(t,e,r){return await t.delete(e,r)}class zi{constructor(e,r){this._db=e,this._storeName=r}static async create(e){const{dbName:r=Uc,storeName:n=Ic,version:i=Th}=e??{},s=await _h(r,n,i);return new zi(s,n)}async set(e,r){return await vh(this._db,this._storeName,e,r)}async get(e){var r;return(r=await Eh(this._db,this._storeName,e))!==null&&r!==void 0?r:null}async remove(e){return await Bh(this._db,this._storeName,e)}}var Ah=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Ch=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},A0;const hr="identity",xr="delegation",Fh="iv",Th=1,kc=typeof window<"u";class Sh{constructor(e="ic-",r){this.prefix=e,this._localStorage=r}get(e){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+e))}set(e,r){return this._getLocalStorage().setItem(this.prefix+e,r),Promise.resolve()}remove(e){return this._getLocalStorage().removeItem(this.prefix+e),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;const e=typeof window>"u"?typeof globalThis>"u"?typeof self>"u"?void 0:self.localStorage:globalThis.localStorage:window.localStorage;if(!e)throw new Error("Could not find local storage.");return e}}class Nh{constructor(e){A0.set(this,void 0),Ah(this,A0,e??{},"f")}get _db(){return new Promise(e=>{if(this.initializedDb){e(this.initializedDb);return}zi.create(Ch(this,A0,"f")).then(r=>{this.initializedDb=r,e(r)})})}async get(e){return await(await this._db).get(e)}async set(e,r){await(await this._db).set(e,r)}async remove(e){await(await this._db).remove(e)}}A0=new WeakMap;const Rh="https://identity.ic0.app",Oh="#authorize",ji="ECDSA",qi="Ed25519",Mh=500,Uh="UserInterrupt";class Pc{constructor(e,r,n,i,s,c,a,h){this._identity=e,this._key=r,this._chain=n,this._storage=i,this.idleManager=s,this._createOptions=c,this._idpWindow=a,this._eventHandler=h,this._registerDefaultIdleCallback()}static async create(e={}){var r,n,i;const s=(r=e.storage)!==null&&r!==void 0?r:new Nh,c=(n=e.keyType)!==null&&n!==void 0?n:ji;let a=null;if(e.identity)a=e.identity;else{let w=await s.get(hr);if(!w&&kc)try{const _=new Sh,m=await _.get(xr),d=await _.get(hr);m&&d&&c===ji&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await s.set(xr,m),await s.set(hr,d),w=m,await _.remove(xr),await _.remove(hr))}catch(_){console.error("error while attempting to recover localstorage: "+_)}if(w)try{typeof w=="object"?c===qi&&typeof w=="string"?a=await fr.fromJSON(w):a=await _0.fromKeyPair(w):typeof w=="string"&&(a=fr.fromJSON(w))}catch{}}let h=new kr,l=null;if(a)try{const w=await s.get(xr);if(typeof w=="object"&&w!==null)throw new Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");e.identity?h=e.identity:w&&(l=v0.fromJSON(w),uh(l)?"toDer"in a?h=B0.fromDelegation(a,l):h=Ac.fromDelegation(a,l):(await Hi(s),a=null))}catch(w){console.error(w),await Hi(s),a=null}let p;return!((i=e.idleOptions)===null||i===void 0)&&i.disableIdle?p=void 0:(l||e.identity)&&(p=Tc.create(e.idleOptions)),a||(c===qi?(a=await fr.generate(),await s.set(hr,JSON.stringify(a.toJSON()))):(e.storage&&c===ji&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${qi}' as the key type, as it can serialize to a string`),a=await _0.generate(),await s.set(hr,a.getKeyPair()))),new this(h,a,l,s,p,e)}_registerDefaultIdleCallback(){var e,r;const n=(e=this._createOptions)===null||e===void 0?void 0:e.idleOptions;!(n!=null&&n.onIdle)&&!(n!=null&&n.disableDefaultIdleCallback)&&((r=this.idleManager)===null||r===void 0||r.registerCallback(()=>{this.logout(),location.reload()}))}async _handleSuccess(e,r){var n,i;const s=e.delegations.map(l=>({delegation:new Oi(l.delegation.pubkey,l.delegation.expiration,l.delegation.targets),signature:l.signature.buffer})),c=v0.fromDelegations(s,e.userPublicKey.buffer),a=this._key;if(!a)return;this._chain=c,"toDer"in a?this._identity=B0.fromDelegation(a,this._chain):this._identity=Ac.fromDelegation(a,this._chain),(n=this._idpWindow)===null||n===void 0||n.close();const h=(i=this._createOptions)===null||i===void 0?void 0:i.idleOptions;!this.idleManager&&!(h!=null&&h.disableIdle)&&(this.idleManager=Tc.create(h),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(xr,JSON.stringify(this._chain.toJSON())),r==null||r(e)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&this._chain!==null}async login(e){var r,n,i,s;const c=BigInt(8)*BigInt(36e11),a=new URL(((r=e==null?void 0:e.identityProvider)===null||r===void 0?void 0:r.toString())||Rh);a.hash=Oh,(n=this._idpWindow)===null||n===void 0||n.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(a,Object.assign({maxTimeToLive:(i=e==null?void 0:e.maxTimeToLive)!==null&&i!==void 0?i:c},e)),window.addEventListener("message",this._eventHandler),this._idpWindow=(s=window.open(a.toString(),"idpWindow",e==null?void 0:e.windowOpenerFeatures))!==null&&s!==void 0?s:void 0;const h=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure(Uh,e==null?void 0:e.onError):setTimeout(h,Mh))};h()}_getEventHandler(e,r){return async n=>{var i,s,c;if(n.origin!==e.origin){console.warn(`WARNING: expected origin '${e.origin}', got '${n.origin}' (ignoring)`);return}const a=n.data;switch(a.kind){case"authorize-ready":{const h=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array((i=this._key)===null||i===void 0?void 0:i.getPublicKey().toDer()),maxTimeToLive:r==null?void 0:r.maxTimeToLive,allowPinAuthentication:r==null?void 0:r.allowPinAuthentication,derivationOrigin:(s=r==null?void 0:r.derivationOrigin)===null||s===void 0?void 0:s.toString()},r==null?void 0:r.customValues);(c=this._idpWindow)===null||c===void 0||c.postMessage(h,e.origin);break}case"authorize-client-success":try{await this._handleSuccess(a,r==null?void 0:r.onSuccess)}catch(h){this._handleFailure(h.message,r==null?void 0:r.onError)}break;case"authorize-client-failure":this._handleFailure(a.text,r==null?void 0:r.onError);break}}}_handleFailure(e,r){var n;(n=this._idpWindow)===null||n===void 0||n.close(),r==null||r(e),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(e={}){if(await Hi(this._storage),this._identity=new kr,this._chain=null,e.returnTo)try{window.history.pushState({},"",e.returnTo)}catch{window.location.href=e.returnTo}}}async function Hi(t){await t.remove(hr),await t.remove(xr),await t.remove(Fh)}const Ih=({IDL:t})=>{const e=t.Record({owner:t.Principal,subaccount:t.Opt(t.Vec(t.Nat8))}),r=t.Record({icrc2:t.Bool}),n=t.Record({maximum_number_of_accounts:t.Opt(t.Nat64),icrc1_minting_account:t.Opt(e),feature_flags:t.Opt(r)}),i=t.Record({e8s:t.Nat64}),s=t.Record({secs:t.Nat64,nanos:t.Nat32}),c=t.Record({num_blocks_to_archive:t.Nat64,max_transactions_per_response:t.Opt(t.Nat64),trigger_threshold:t.Nat64,max_message_size_bytes:t.Opt(t.Nat64),cycles_for_archive_creation:t.Opt(t.Nat64),node_max_memory_size_bytes:t.Opt(t.Nat64),controller_id:t.Principal}),a=t.Record({send_whitelist:t.Vec(t.Principal),token_symbol:t.Opt(t.Text),transfer_fee:t.Opt(i),minting_account:t.Text,maximum_number_of_accounts:t.Opt(t.Nat64),accounts_overflow_trim_quantity:t.Opt(t.Nat64),transaction_window:t.Opt(s),max_message_size_bytes:t.Opt(t.Nat64),icrc1_minting_account:t.Opt(e),archive_options:t.Opt(c),initial_values:t.Vec(t.Tuple(t.Text,i)),token_name:t.Opt(t.Text),feature_flags:t.Opt(r)});t.Variant({Upgrade:t.Opt(n),Init:a});const h=t.Record({account:t.Vec(t.Nat8)}),l=t.Record({account:t.Text}),p=t.Record({canister_id:t.Principal}),w=t.Record({archives:t.Vec(p)}),_=t.Record({decimals:t.Nat32}),m=t.Variant({Int:t.Int,Nat:t.Nat,Blob:t.Vec(t.Nat8),Text:t.Text}),d=t.Record({url:t.Text,name:t.Text}),E=t.Record({to:e,fee:t.Opt(t.Nat),memo:t.Opt(t.Vec(t.Nat8)),from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(t.Nat64),amount:t.Nat}),A=t.Variant({GenericError:t.Record({message:t.Text,error_code:t.Nat}),TemporarilyUnavailable:t.Null,BadBurn:t.Record({min_burn_amount:t.Nat}),Duplicate:t.Record({duplicate_of:t.Nat}),BadFee:t.Record({expected_fee:t.Nat}),CreatedInFuture:t.Record({ledger_time:t.Nat64}),TooOld:t.Null,InsufficientFunds:t.Record({balance:t.Nat})}),U=t.Variant({Ok:t.Nat,Err:A}),B=t.Record({account:e,spender:e}),C=t.Record({allowance:t.Nat,expires_at:t.Opt(t.Nat64)}),O=t.Record({fee:t.Opt(t.Nat),memo:t.Opt(t.Vec(t.Nat8)),from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(t.Nat64),amount:t.Nat,expected_allowance:t.Opt(t.Nat),expires_at:t.Opt(t.Nat64),spender:e}),S=t.Variant({GenericError:t.Record({message:t.Text,error_code:t.Nat}),TemporarilyUnavailable:t.Null,Duplicate:t.Record({duplicate_of:t.Nat}),BadFee:t.Record({expected_fee:t.Nat}),AllowanceChanged:t.Record({current_allowance:t.Nat}),CreatedInFuture:t.Record({ledger_time:t.Nat64}),TooOld:t.Null,Expired:t.Record({ledger_time:t.Nat64}),InsufficientFunds:t.Record({balance:t.Nat})}),k=t.Variant({Ok:t.Nat,Err:S}),P=t.Record({to:e,fee:t.Opt(t.Nat),spender_subaccount:t.Opt(t.Vec(t.Nat8)),from:e,memo:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(t.Nat64),amount:t.Nat}),$=t.Variant({GenericError:t.Record({message:t.Text,error_code:t.Nat}),TemporarilyUnavailable:t.Null,InsufficientAllowance:t.Record({allowance:t.Nat}),BadBurn:t.Record({min_burn_amount:t.Nat}),Duplicate:t.Record({duplicate_of:t.Nat}),BadFee:t.Record({expected_fee:t.Nat}),CreatedInFuture:t.Record({ledger_time:t.Nat64}),TooOld:t.Null,InsufficientFunds:t.Record({balance:t.Nat})}),ie=t.Variant({Ok:t.Nat,Err:$}),M=t.Record({name:t.Text}),W=t.Record({start:t.Nat64,length:t.Nat64}),ee=t.Record({timestamp_nanos:t.Nat64}),F=t.Variant({Approve:t.Record({fee:i,from:t.Vec(t.Nat8),allowance_e8s:t.Int,allowance:i,expected_allowance:t.Opt(i),expires_at:t.Opt(ee),spender:t.Vec(t.Nat8)}),Burn:t.Record({from:t.Vec(t.Nat8),amount:i,spender:t.Opt(t.Vec(t.Nat8))}),Mint:t.Record({to:t.Vec(t.Nat8),amount:i}),Transfer:t.Record({to:t.Vec(t.Nat8),fee:i,from:t.Vec(t.Nat8),amount:i,spender:t.Opt(t.Vec(t.Nat8))})}),q=t.Record({memo:t.Nat64,icrc1_memo:t.Opt(t.Vec(t.Nat8)),operation:t.Opt(F),created_at_time:ee}),j=t.Record({transaction:q,timestamp:ee,parent_hash:t.Opt(t.Vec(t.Nat8))}),V=t.Record({blocks:t.Vec(j)}),re=t.Variant({BadFirstBlockIndex:t.Record({requested_index:t.Nat64,first_valid_index:t.Nat64}),Other:t.Record({error_message:t.Text,error_code:t.Nat64})}),se=t.Variant({Ok:V,Err:re}),oe=t.Record({callback:t.Func([W],[se],["query"]),start:t.Nat64,length:t.Nat64}),de=t.Record({certificate:t.Opt(t.Vec(t.Nat8)),blocks:t.Vec(j),chain_length:t.Nat64,first_block_index:t.Nat64,archived_blocks:t.Vec(oe)}),Z=t.Variant({Ok:t.Vec(t.Vec(t.Nat8)),Err:re}),H=t.Record({callback:t.Func([W],[Z],["query"]),start:t.Nat64,length:t.Nat64}),X=t.Record({certificate:t.Opt(t.Vec(t.Nat8)),blocks:t.Vec(t.Vec(t.Nat8)),chain_length:t.Nat64,first_block_index:t.Nat64,archived_blocks:t.Vec(H)}),y=t.Record({to:t.Text,fee:i,memo:t.Nat64,from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(ee),amount:i}),ce=t.Record({symbol:t.Text}),fe=t.Record({to:t.Vec(t.Nat8),fee:i,memo:t.Nat64,from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(ee),amount:i}),pe=t.Variant({TxTooOld:t.Record({allowed_window_nanos:t.Nat64}),BadFee:t.Record({expected_fee:i}),TxDuplicate:t.Record({duplicate_of:t.Nat64}),TxCreatedInFuture:t.Null,InsufficientFunds:t.Record({balance:i})}),ae=t.Variant({Ok:t.Nat64,Err:pe}),le=t.Record({transfer_fee:i});return t.Service({account_balance:t.Func([h],[i],["query"]),account_balance_dfx:t.Func([l],[i],["query"]),account_identifier:t.Func([e],[t.Vec(t.Nat8)],["query"]),archives:t.Func([],[w],["query"]),decimals:t.Func([],[_],["query"]),icrc1_balance_of:t.Func([e],[t.Nat],["query"]),icrc1_decimals:t.Func([],[t.Nat8],["query"]),icrc1_fee:t.Func([],[t.Nat],["query"]),icrc1_metadata:t.Func([],[t.Vec(t.Tuple(t.Text,m))],["query"]),icrc1_minting_account:t.Func([],[t.Opt(e)],["query"]),icrc1_name:t.Func([],[t.Text],["query"]),icrc1_supported_standards:t.Func([],[t.Vec(d)],["query"]),icrc1_symbol:t.Func([],[t.Text],["query"]),icrc1_total_supply:t.Func([],[t.Nat],["query"]),icrc1_transfer:t.Func([E],[U],[]),icrc2_allowance:t.Func([B],[C],["query"]),icrc2_approve:t.Func([O],[k],[]),icrc2_transfer_from:t.Func([P],[ie],[]),name:t.Func([],[M],["query"]),query_blocks:t.Func([W],[de],["query"]),query_encoded_blocks:t.Func([W],[X],["query"]),send_dfx:t.Func([y],[t.Nat64],[]),symbol:t.Func([],[ce],["query"]),transfer:t.Func([fe],[ae],[]),transfer_fee:t.Func([t.Record({})],[le],["query"])})};window.onload=function(){window.ic.bitfinityWallet&&(kh.readyState="Installed")};const kh=window.ic?window.ic.bitfinityWallet?{readyState:"Installed",connectWallet:async function(t={whitelist:[],host:""}){var e=await window.ic.bitfinityWallet.isConnected();e||await window.ic.bitfinityWallet.requestConnect(t),window.ic.bitfinityWallet.agent||await window.ic.bitfinityWallet.requestConnect(t),this.agent=window.ic.bitfinityWallet.agent,this.getPrincipal=async function(){return window.ic.bitfinityWallet.getPrincipal()},this.createActor=async function(i){return window.ic.bitfinityWallet.createActor(i)},this.batchTransactions=async function(i){return window.ic.bitfinityWallet.batchTransactions(i)};var r=await this.getPrincipal(),n=await window.ic.bitfinityWallet.getAccountID();return{accountId:n,principalId:r.toString()}},disConnectWallet:async function(){await window.ic.bitfinityWallet.disconnect()}}:{readyState:"NotDetected",url:"https://wallet.infinityswap.one/"}:{readyState:"NotDetected",url:"https://wallet.infinityswap.one/"};function Ph(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const Dh=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Dc(t){if(Buffer.isBuffer(t))return t;if(typeof t=="number")return Buffer.alloc(t);if(typeof t=="string")return Buffer.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function zh(t){const e=Dc(4);return e.writeInt32BE(t,0),e}function $i(t,e){t=Dc(t),Buffer.isBuffer(e)&&(e=e.readUInt32BE(0));let r=~~e^-1;for(var n=0;n<t.length;n++)r=Dh[(r^t[n])&255]^r>>>8;return r^-1}function Vi(){return zh($i.apply(null,arguments))}Vi.signed=function(){return $i.apply(null,arguments)},Vi.unsigned=function(){return $i.apply(null,arguments)>>>0};var jh=Vi;const qh=Ph(jh);var zc={exports:{}};function Hh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Gi={exports:{}};const $h=Mu(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var jc;function Se(){return jc||(jc=1,function(t,e){(function(r,n){t.exports=n()})(ve,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof Hh=="function")try{s=$h}catch{}var c=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function B(){}return function(C){var O;return B.prototype=C,O=new B,B.prototype=null,O}}(),h={},l=h.lib={},p=l.Base=function(){return{extend:function(B){var C=a(this);return B&&C.mixIn(B),(!C.hasOwnProperty("init")||this.init===C.init)&&(C.init=function(){C.$super.init.apply(this,arguments)}),C.init.prototype=C,C.$super=this,C},create:function(){var B=this.extend();return B.init.apply(B,arguments),B},init:function(){},mixIn:function(B){for(var C in B)B.hasOwnProperty(C)&&(this[C]=B[C]);B.hasOwnProperty("toString")&&(this.toString=B.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),w=l.WordArray=p.extend({init:function(B,C){B=this.words=B||[],C!=i?this.sigBytes=C:this.sigBytes=B.length*4},toString:function(B){return(B||m).stringify(this)},concat:function(B){var C=this.words,O=B.words,S=this.sigBytes,k=B.sigBytes;if(this.clamp(),S%4)for(var P=0;P<k;P++){var $=O[P>>>2]>>>24-P%4*8&255;C[S+P>>>2]|=$<<24-(S+P)%4*8}else for(var ie=0;ie<k;ie+=4)C[S+ie>>>2]=O[ie>>>2];return this.sigBytes+=k,this},clamp:function(){var B=this.words,C=this.sigBytes;B[C>>>2]&=4294967295<<32-C%4*8,B.length=n.ceil(C/4)},clone:function(){var B=p.clone.call(this);return B.words=this.words.slice(0),B},random:function(B){for(var C=[],O=0;O<B;O+=4)C.push(c());return new w.init(C,B)}}),_=h.enc={},m=_.Hex={stringify:function(B){for(var C=B.words,O=B.sigBytes,S=[],k=0;k<O;k++){var P=C[k>>>2]>>>24-k%4*8&255;S.push((P>>>4).toString(16)),S.push((P&15).toString(16))}return S.join("")},parse:function(B){for(var C=B.length,O=[],S=0;S<C;S+=2)O[S>>>3]|=parseInt(B.substr(S,2),16)<<24-S%8*4;return new w.init(O,C/2)}},d=_.Latin1={stringify:function(B){for(var C=B.words,O=B.sigBytes,S=[],k=0;k<O;k++){var P=C[k>>>2]>>>24-k%4*8&255;S.push(String.fromCharCode(P))}return S.join("")},parse:function(B){for(var C=B.length,O=[],S=0;S<C;S++)O[S>>>2]|=(B.charCodeAt(S)&255)<<24-S%4*8;return new w.init(O,C)}},E=_.Utf8={stringify:function(B){try{return decodeURIComponent(escape(d.stringify(B)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(B){return d.parse(unescape(encodeURIComponent(B)))}},A=l.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(B){typeof B=="string"&&(B=E.parse(B)),this._data.concat(B),this._nDataBytes+=B.sigBytes},_process:function(B){var C,O=this._data,S=O.words,k=O.sigBytes,P=this.blockSize,$=P*4,ie=k/$;B?ie=n.ceil(ie):ie=n.max((ie|0)-this._minBufferSize,0);var M=ie*P,W=n.min(M*4,k);if(M){for(var ee=0;ee<M;ee+=P)this._doProcessBlock(S,ee);C=S.splice(0,M),O.sigBytes-=W}return new w.init(C,W)},clone:function(){var B=p.clone.call(this);return B._data=this._data.clone(),B},_minBufferSize:0});l.Hasher=A.extend({cfg:p.extend(),init:function(B){this.cfg=this.cfg.extend(B),this.reset()},reset:function(){A.reset.call(this),this._doReset()},update:function(B){return this._append(B),this._process(),this},finalize:function(B){B&&this._append(B);var C=this._doFinalize();return C},blockSize:16,_createHelper:function(B){return function(C,O){return new B.init(O).finalize(C)}},_createHmacHelper:function(B){return function(C,O){return new U.HMAC.init(B,O).finalize(C)}}});var U=h.algo={};return h}(Math);return r})}(Gi)),Gi.exports}var Wi={exports:{}},qc;function C0(){return qc||(qc=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){return function(n){var i=r,s=i.lib,c=s.Base,a=s.WordArray,h=i.x64={};h.Word=c.extend({init:function(l,p){this.high=l,this.low=p}}),h.WordArray=c.extend({init:function(l,p){l=this.words=l||[],p!=n?this.sigBytes=p:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,p=l.length,w=[],_=0;_<p;_++){var m=l[_];w.push(m.high),w.push(m.low)}return a.create(w,this.sigBytes)},clone:function(){for(var l=c.clone.call(this),p=l.words=this.words.slice(0),w=p.length,_=0;_<w;_++)p[_]=p[_].clone();return l}})}(),r})}(Wi)),Wi.exports}var Li={exports:{}},Hc;function Vh(){return Hc||(Hc=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,s=i.WordArray,c=s.init,a=s.init=function(h){if(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),(h instanceof Int8Array||typeof Uint8ClampedArray<"u"&&h instanceof Uint8ClampedArray||h instanceof Int16Array||h instanceof Uint16Array||h instanceof Int32Array||h instanceof Uint32Array||h instanceof Float32Array||h instanceof Float64Array)&&(h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength)),h instanceof Uint8Array){for(var l=h.byteLength,p=[],w=0;w<l;w++)p[w>>>2]|=h[w]<<24-w%4*8;c.call(this,p,l)}else c.apply(this,arguments)};a.prototype=s}}(),r.lib.WordArray})}(Li)),Li.exports}var Ki={exports:{}},$c;function Gh(){return $c||($c=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,c=n.enc;c.Utf16=c.Utf16BE={stringify:function(h){for(var l=h.words,p=h.sigBytes,w=[],_=0;_<p;_+=2){var m=l[_>>>2]>>>16-_%4*8&65535;w.push(String.fromCharCode(m))}return w.join("")},parse:function(h){for(var l=h.length,p=[],w=0;w<l;w++)p[w>>>1]|=h.charCodeAt(w)<<16-w%2*16;return s.create(p,l*2)}},c.Utf16LE={stringify:function(h){for(var l=h.words,p=h.sigBytes,w=[],_=0;_<p;_+=2){var m=a(l[_>>>2]>>>16-_%4*8&65535);w.push(String.fromCharCode(m))}return w.join("")},parse:function(h){for(var l=h.length,p=[],w=0;w<l;w++)p[w>>>1]|=a(h.charCodeAt(w)<<16-w%2*16);return s.create(p,l*2)}};function a(h){return h<<8&4278255360|h>>>8&16711935}}(),r.enc.Utf16})}(Ki)),Ki.exports}var Yi={exports:{}},Vc;function Fr(){return Vc||(Vc=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,c=n.enc;c.Base64={stringify:function(h){var l=h.words,p=h.sigBytes,w=this._map;h.clamp();for(var _=[],m=0;m<p;m+=3)for(var d=l[m>>>2]>>>24-m%4*8&255,E=l[m+1>>>2]>>>24-(m+1)%4*8&255,A=l[m+2>>>2]>>>24-(m+2)%4*8&255,U=d<<16|E<<8|A,B=0;B<4&&m+B*.75<p;B++)_.push(w.charAt(U>>>6*(3-B)&63));var C=w.charAt(64);if(C)for(;_.length%4;)_.push(C);return _.join("")},parse:function(h){var l=h.length,p=this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var _=0;_<p.length;_++)w[p.charCodeAt(_)]=_}var m=p.charAt(64);if(m){var d=h.indexOf(m);d!==-1&&(l=d)}return a(h,l,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(h,l,p){for(var w=[],_=0,m=0;m<l;m++)if(m%4){var d=p[h.charCodeAt(m-1)]<<m%4*2,E=p[h.charCodeAt(m)]>>>6-m%4*2,A=d|E;w[_>>>2]|=A<<24-_%4*8,_++}return s.create(w,_)}}(),r.enc.Base64})}(Yi)),Yi.exports}var Zi={exports:{}},Gc;function Wh(){return Gc||(Gc=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,c=n.enc;c.Base64url={stringify:function(h,l){l===void 0&&(l=!0);var p=h.words,w=h.sigBytes,_=l?this._safe_map:this._map;h.clamp();for(var m=[],d=0;d<w;d+=3)for(var E=p[d>>>2]>>>24-d%4*8&255,A=p[d+1>>>2]>>>24-(d+1)%4*8&255,U=p[d+2>>>2]>>>24-(d+2)%4*8&255,B=E<<16|A<<8|U,C=0;C<4&&d+C*.75<w;C++)m.push(_.charAt(B>>>6*(3-C)&63));var O=_.charAt(64);if(O)for(;m.length%4;)m.push(O);return m.join("")},parse:function(h,l){l===void 0&&(l=!0);var p=h.length,w=l?this._safe_map:this._map,_=this._reverseMap;if(!_){_=this._reverseMap=[];for(var m=0;m<w.length;m++)_[w.charCodeAt(m)]=m}var d=w.charAt(64);if(d){var E=h.indexOf(d);E!==-1&&(p=E)}return a(h,p,_)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(h,l,p){for(var w=[],_=0,m=0;m<l;m++)if(m%4){var d=p[h.charCodeAt(m-1)]<<m%4*2,E=p[h.charCodeAt(m)]>>>6-m%4*2,A=d|E;w[_>>>2]|=A<<24-_%4*8,_++}return s.create(w,_)}}(),r.enc.Base64url})}(Zi)),Zi.exports}var Qi={exports:{}},Wc;function Tr(){return Wc||(Wc=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){return function(n){var i=r,s=i.lib,c=s.WordArray,a=s.Hasher,h=i.algo,l=[];(function(){for(var E=0;E<64;E++)l[E]=n.abs(n.sin(E+1))*4294967296|0})();var p=h.MD5=a.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(E,A){for(var U=0;U<16;U++){var B=A+U,C=E[B];E[B]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}var O=this._hash.words,S=E[A+0],k=E[A+1],P=E[A+2],$=E[A+3],ie=E[A+4],M=E[A+5],W=E[A+6],ee=E[A+7],F=E[A+8],q=E[A+9],j=E[A+10],V=E[A+11],re=E[A+12],se=E[A+13],oe=E[A+14],de=E[A+15],Z=O[0],H=O[1],X=O[2],y=O[3];Z=w(Z,H,X,y,S,7,l[0]),y=w(y,Z,H,X,k,12,l[1]),X=w(X,y,Z,H,P,17,l[2]),H=w(H,X,y,Z,$,22,l[3]),Z=w(Z,H,X,y,ie,7,l[4]),y=w(y,Z,H,X,M,12,l[5]),X=w(X,y,Z,H,W,17,l[6]),H=w(H,X,y,Z,ee,22,l[7]),Z=w(Z,H,X,y,F,7,l[8]),y=w(y,Z,H,X,q,12,l[9]),X=w(X,y,Z,H,j,17,l[10]),H=w(H,X,y,Z,V,22,l[11]),Z=w(Z,H,X,y,re,7,l[12]),y=w(y,Z,H,X,se,12,l[13]),X=w(X,y,Z,H,oe,17,l[14]),H=w(H,X,y,Z,de,22,l[15]),Z=_(Z,H,X,y,k,5,l[16]),y=_(y,Z,H,X,W,9,l[17]),X=_(X,y,Z,H,V,14,l[18]),H=_(H,X,y,Z,S,20,l[19]),Z=_(Z,H,X,y,M,5,l[20]),y=_(y,Z,H,X,j,9,l[21]),X=_(X,y,Z,H,de,14,l[22]),H=_(H,X,y,Z,ie,20,l[23]),Z=_(Z,H,X,y,q,5,l[24]),y=_(y,Z,H,X,oe,9,l[25]),X=_(X,y,Z,H,$,14,l[26]),H=_(H,X,y,Z,F,20,l[27]),Z=_(Z,H,X,y,se,5,l[28]),y=_(y,Z,H,X,P,9,l[29]),X=_(X,y,Z,H,ee,14,l[30]),H=_(H,X,y,Z,re,20,l[31]),Z=m(Z,H,X,y,M,4,l[32]),y=m(y,Z,H,X,F,11,l[33]),X=m(X,y,Z,H,V,16,l[34]),H=m(H,X,y,Z,oe,23,l[35]),Z=m(Z,H,X,y,k,4,l[36]),y=m(y,Z,H,X,ie,11,l[37]),X=m(X,y,Z,H,ee,16,l[38]),H=m(H,X,y,Z,j,23,l[39]),Z=m(Z,H,X,y,se,4,l[40]),y=m(y,Z,H,X,S,11,l[41]),X=m(X,y,Z,H,$,16,l[42]),H=m(H,X,y,Z,W,23,l[43]),Z=m(Z,H,X,y,q,4,l[44]),y=m(y,Z,H,X,re,11,l[45]),X=m(X,y,Z,H,de,16,l[46]),H=m(H,X,y,Z,P,23,l[47]),Z=d(Z,H,X,y,S,6,l[48]),y=d(y,Z,H,X,ee,10,l[49]),X=d(X,y,Z,H,oe,15,l[50]),H=d(H,X,y,Z,M,21,l[51]),Z=d(Z,H,X,y,re,6,l[52]),y=d(y,Z,H,X,$,10,l[53]),X=d(X,y,Z,H,j,15,l[54]),H=d(H,X,y,Z,k,21,l[55]),Z=d(Z,H,X,y,F,6,l[56]),y=d(y,Z,H,X,de,10,l[57]),X=d(X,y,Z,H,W,15,l[58]),H=d(H,X,y,Z,se,21,l[59]),Z=d(Z,H,X,y,ie,6,l[60]),y=d(y,Z,H,X,V,10,l[61]),X=d(X,y,Z,H,P,15,l[62]),H=d(H,X,y,Z,q,21,l[63]),O[0]=O[0]+Z|0,O[1]=O[1]+H|0,O[2]=O[2]+X|0,O[3]=O[3]+y|0},_doFinalize:function(){var E=this._data,A=E.words,U=this._nDataBytes*8,B=E.sigBytes*8;A[B>>>5]|=128<<24-B%32;var C=n.floor(U/4294967296),O=U;A[(B+64>>>9<<4)+15]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,A[(B+64>>>9<<4)+14]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,E.sigBytes=(A.length+1)*4,this._process();for(var S=this._hash,k=S.words,P=0;P<4;P++){var $=k[P];k[P]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return S},clone:function(){var E=a.clone.call(this);return E._hash=this._hash.clone(),E}});function w(E,A,U,B,C,O,S){var k=E+(A&U|~A&B)+C+S;return(k<<O|k>>>32-O)+A}function _(E,A,U,B,C,O,S){var k=E+(A&B|U&~B)+C+S;return(k<<O|k>>>32-O)+A}function m(E,A,U,B,C,O,S){var k=E+(A^U^B)+C+S;return(k<<O|k>>>32-O)+A}function d(E,A,U,B,C,O,S){var k=E+(U^(A|~B))+C+S;return(k<<O|k>>>32-O)+A}i.MD5=a._createHelper(p),i.HmacMD5=a._createHmacHelper(p)}(Math),r.MD5})}(Qi)),Qi.exports}var Xi={exports:{}},Lc;function Kc(){return Lc||(Lc=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,c=i.Hasher,a=n.algo,h=[],l=a.SHA1=c.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,w){for(var _=this._hash.words,m=_[0],d=_[1],E=_[2],A=_[3],U=_[4],B=0;B<80;B++){if(B<16)h[B]=p[w+B]|0;else{var C=h[B-3]^h[B-8]^h[B-14]^h[B-16];h[B]=C<<1|C>>>31}var O=(m<<5|m>>>27)+U+h[B];B<20?O+=(d&E|~d&A)+1518500249:B<40?O+=(d^E^A)+1859775393:B<60?O+=(d&E|d&A|E&A)-1894007588:O+=(d^E^A)-899497514,U=A,A=E,E=d<<30|d>>>2,d=m,m=O}_[0]=_[0]+m|0,_[1]=_[1]+d|0,_[2]=_[2]+E|0,_[3]=_[3]+A|0,_[4]=_[4]+U|0},_doFinalize:function(){var p=this._data,w=p.words,_=this._nDataBytes*8,m=p.sigBytes*8;return w[m>>>5]|=128<<24-m%32,w[(m+64>>>9<<4)+14]=Math.floor(_/4294967296),w[(m+64>>>9<<4)+15]=_,p.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var p=c.clone.call(this);return p._hash=this._hash.clone(),p}});n.SHA1=c._createHelper(l),n.HmacSHA1=c._createHmacHelper(l)}(),r.SHA1})}(Xi)),Xi.exports}var Ji={exports:{}},Yc;function es(){return Yc||(Yc=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){return function(n){var i=r,s=i.lib,c=s.WordArray,a=s.Hasher,h=i.algo,l=[],p=[];(function(){function m(U){for(var B=n.sqrt(U),C=2;C<=B;C++)if(!(U%C))return!1;return!0}function d(U){return(U-(U|0))*4294967296|0}for(var E=2,A=0;A<64;)m(E)&&(A<8&&(l[A]=d(n.pow(E,1/2))),p[A]=d(n.pow(E,1/3)),A++),E++})();var w=[],_=h.SHA256=a.extend({_doReset:function(){this._hash=new c.init(l.slice(0))},_doProcessBlock:function(m,d){for(var E=this._hash.words,A=E[0],U=E[1],B=E[2],C=E[3],O=E[4],S=E[5],k=E[6],P=E[7],$=0;$<64;$++){if($<16)w[$]=m[d+$]|0;else{var ie=w[$-15],M=(ie<<25|ie>>>7)^(ie<<14|ie>>>18)^ie>>>3,W=w[$-2],ee=(W<<15|W>>>17)^(W<<13|W>>>19)^W>>>10;w[$]=M+w[$-7]+ee+w[$-16]}var F=O&S^~O&k,q=A&U^A&B^U&B,j=(A<<30|A>>>2)^(A<<19|A>>>13)^(A<<10|A>>>22),V=(O<<26|O>>>6)^(O<<21|O>>>11)^(O<<7|O>>>25),re=P+V+F+p[$]+w[$],se=j+q;P=k,k=S,S=O,O=C+re|0,C=B,B=U,U=A,A=re+se|0}E[0]=E[0]+A|0,E[1]=E[1]+U|0,E[2]=E[2]+B|0,E[3]=E[3]+C|0,E[4]=E[4]+O|0,E[5]=E[5]+S|0,E[6]=E[6]+k|0,E[7]=E[7]+P|0},_doFinalize:function(){var m=this._data,d=m.words,E=this._nDataBytes*8,A=m.sigBytes*8;return d[A>>>5]|=128<<24-A%32,d[(A+64>>>9<<4)+14]=n.floor(E/4294967296),d[(A+64>>>9<<4)+15]=E,m.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});i.SHA256=a._createHelper(_),i.HmacSHA256=a._createHmacHelper(_)}(Math),r.SHA256})}(Ji)),Ji.exports}var ts={exports:{}},Zc;function Lh(){return Zc||(Zc=1,function(t,e){(function(r,n,i){t.exports=n(Se(),es())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,c=n.algo,a=c.SHA256,h=c.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});n.SHA224=a._createHelper(h),n.HmacSHA224=a._createHmacHelper(h)}(),r.SHA224})}(ts)),ts.exports}var rs={exports:{}},Qc;function Xc(){return Qc||(Qc=1,function(t,e){(function(r,n,i){t.exports=n(Se(),C0())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.Hasher,c=n.x64,a=c.Word,h=c.WordArray,l=n.algo;function p(){return a.create.apply(a,arguments)}var w=[p(1116352408,3609767458),p(1899447441,602891725),p(3049323471,3964484399),p(3921009573,2173295548),p(961987163,4081628472),p(1508970993,3053834265),p(2453635748,2937671579),p(2870763221,3664609560),p(3624381080,2734883394),p(310598401,1164996542),p(607225278,1323610764),p(1426881987,3590304994),p(1925078388,4068182383),p(2162078206,991336113),p(2614888103,633803317),p(3248222580,3479774868),p(3835390401,2666613458),p(4022224774,944711139),p(264347078,2341262773),p(604807628,2007800933),p(770255983,1495990901),p(1249150122,1856431235),p(1555081692,3175218132),p(1996064986,2198950837),p(2554220882,3999719339),p(2821834349,766784016),p(2952996808,2566594879),p(3210313671,3203337956),p(3336571891,1034457026),p(3584528711,2466948901),p(113926993,3758326383),p(338241895,168717936),p(666307205,1188179964),p(773529912,1546045734),p(1294757372,1522805485),p(1396182291,2643833823),p(1695183700,2343527390),p(1986661051,1014477480),p(2177026350,1206759142),p(2456956037,344077627),p(2730485921,1290863460),p(2820302411,3158454273),p(3259730800,3505952657),p(3345764771,106217008),p(3516065817,3606008344),p(3600352804,1432725776),p(4094571909,1467031594),p(275423344,851169720),p(430227734,3100823752),p(506948616,1363258195),p(659060556,3750685593),p(883997877,3785050280),p(958139571,3318307427),p(1322822218,3812723403),p(1537002063,2003034995),p(1747873779,3602036899),p(1955562222,1575990012),p(2024104815,1125592928),p(2227730452,2716904306),p(2361852424,442776044),p(2428436474,593698344),p(2756734187,3733110249),p(3204031479,2999351573),p(3329325298,3815920427),p(3391569614,3928383900),p(3515267271,566280711),p(3940187606,3454069534),p(4118630271,4000239992),p(116418474,1914138554),p(174292421,2731055270),p(289380356,3203993006),p(460393269,320620315),p(685471733,587496836),p(852142971,1086792851),p(1017036298,365543100),p(1126000580,2618297676),p(1288033470,3409855158),p(1501505948,4234509866),p(1607167915,987167468),p(1816402316,1246189591)],_=[];(function(){for(var d=0;d<80;d++)_[d]=p()})();var m=l.SHA512=s.extend({_doReset:function(){this._hash=new h.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(d,E){for(var A=this._hash.words,U=A[0],B=A[1],C=A[2],O=A[3],S=A[4],k=A[5],P=A[6],$=A[7],ie=U.high,M=U.low,W=B.high,ee=B.low,F=C.high,q=C.low,j=O.high,V=O.low,re=S.high,se=S.low,oe=k.high,de=k.low,Z=P.high,H=P.low,X=$.high,y=$.low,ce=ie,fe=M,pe=W,ae=ee,le=F,T=q,R=j,D=V,K=re,G=se,Q=oe,g=de,o=Z,u=H,v=X,N=y,z=0;z<80;z++){var J,ue,he=_[z];if(z<16)ue=he.high=d[E+z*2]|0,J=he.low=d[E+z*2+1]|0;else{var xe=_[z-15],we=xe.high,b=xe.low,f=(we>>>1|b<<31)^(we>>>8|b<<24)^we>>>7,x=(b>>>1|we<<31)^(b>>>8|we<<24)^(b>>>7|we<<25),I=_[z-2],Y=I.high,te=I.low,ne=(Y>>>19|te<<13)^(Y<<3|te>>>29)^Y>>>6,be=(te>>>19|Y<<13)^(te<<3|Y>>>29)^(te>>>6|Y<<26),Ce=_[z-7],_e=Ce.high,me=Ce.low,Oe=_[z-16],Pe=Oe.high,S0=Oe.low;J=x+me,ue=f+_e+(J>>>0<x>>>0?1:0),J=J+be,ue=ue+ne+(J>>>0<be>>>0?1:0),J=J+S0,ue=ue+Pe+(J>>>0<S0>>>0?1:0),he.high=ue,he.low=J}var Rs=K&Q^~K&o,N0=G&g^~G&u,Os=ce&pe^ce&le^pe&le,Ms=fe&ae^fe&T^ae&T,yr=(ce>>>28|fe<<4)^(ce<<30|fe>>>2)^(ce<<25|fe>>>7),Us=(fe>>>28|ce<<4)^(fe<<30|ce>>>2)^(fe<<25|ce>>>7),Nu=(K>>>14|G<<18)^(K>>>18|G<<14)^(K<<23|G>>>9),Ru=(G>>>14|K<<18)^(G>>>18|K<<14)^(G<<23|K>>>9),Is=w[z],Ge=Is.high,ks=Is.low,ht=N+Ru,Wt=v+Nu+(ht>>>0<N>>>0?1:0),ht=ht+N0,Wt=Wt+Rs+(ht>>>0<N0>>>0?1:0),ht=ht+ks,Wt=Wt+Ge+(ht>>>0<ks>>>0?1:0),ht=ht+J,Wt=Wt+ue+(ht>>>0<J>>>0?1:0),R0=Us+Ms,Ps=yr+Os+(R0>>>0<Us>>>0?1:0);v=o,N=u,o=Q,u=g,Q=K,g=G,G=D+ht|0,K=R+Wt+(G>>>0<D>>>0?1:0)|0,R=le,D=T,le=pe,T=ae,pe=ce,ae=fe,fe=ht+R0|0,ce=Wt+Ps+(fe>>>0<ht>>>0?1:0)|0}M=U.low=M+fe,U.high=ie+ce+(M>>>0<fe>>>0?1:0),ee=B.low=ee+ae,B.high=W+pe+(ee>>>0<ae>>>0?1:0),q=C.low=q+T,C.high=F+le+(q>>>0<T>>>0?1:0),V=O.low=V+D,O.high=j+R+(V>>>0<D>>>0?1:0),se=S.low=se+G,S.high=re+K+(se>>>0<G>>>0?1:0),de=k.low=de+g,k.high=oe+Q+(de>>>0<g>>>0?1:0),H=P.low=H+u,P.high=Z+o+(H>>>0<u>>>0?1:0),y=$.low=y+N,$.high=X+v+(y>>>0<N>>>0?1:0)},_doFinalize:function(){var d=this._data,E=d.words,A=this._nDataBytes*8,U=d.sigBytes*8;E[U>>>5]|=128<<24-U%32,E[(U+128>>>10<<5)+30]=Math.floor(A/4294967296),E[(U+128>>>10<<5)+31]=A,d.sigBytes=E.length*4,this._process();var B=this._hash.toX32();return B},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d},blockSize:1024/32});n.SHA512=s._createHelper(m),n.HmacSHA512=s._createHmacHelper(m)}(),r.SHA512})}(rs)),rs.exports}var ns={exports:{}},Jc;function Kh(){return Jc||(Jc=1,function(t,e){(function(r,n,i){t.exports=n(Se(),C0(),Xc())})(ve,function(r){return function(){var n=r,i=n.x64,s=i.Word,c=i.WordArray,a=n.algo,h=a.SHA512,l=a.SHA384=h.extend({_doReset:function(){this._hash=new c.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var p=h._doFinalize.call(this);return p.sigBytes-=16,p}});n.SHA384=h._createHelper(l),n.HmacSHA384=h._createHmacHelper(l)}(),r.SHA384})}(ns)),ns.exports}var is={exports:{}},eu;function Yh(){return eu||(eu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),C0())})(ve,function(r){return function(n){var i=r,s=i.lib,c=s.WordArray,a=s.Hasher,h=i.x64,l=h.Word,p=i.algo,w=[],_=[],m=[];(function(){for(var A=1,U=0,B=0;B<24;B++){w[A+5*U]=(B+1)*(B+2)/2%64;var C=U%5,O=(2*A+3*U)%5;A=C,U=O}for(var A=0;A<5;A++)for(var U=0;U<5;U++)_[A+5*U]=U+(2*A+3*U)%5*5;for(var S=1,k=0;k<24;k++){for(var P=0,$=0,ie=0;ie<7;ie++){if(S&1){var M=(1<<ie)-1;M<32?$^=1<<M:P^=1<<M-32}S&128?S=S<<1^113:S<<=1}m[k]=l.create(P,$)}})();var d=[];(function(){for(var A=0;A<25;A++)d[A]=l.create()})();var E=p.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var A=this._state=[],U=0;U<25;U++)A[U]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(A,U){for(var B=this._state,C=this.blockSize/2,O=0;O<C;O++){var S=A[U+2*O],k=A[U+2*O+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var P=B[O];P.high^=k,P.low^=S}for(var $=0;$<24;$++){for(var ie=0;ie<5;ie++){for(var M=0,W=0,ee=0;ee<5;ee++){var P=B[ie+5*ee];M^=P.high,W^=P.low}var F=d[ie];F.high=M,F.low=W}for(var ie=0;ie<5;ie++)for(var q=d[(ie+4)%5],j=d[(ie+1)%5],V=j.high,re=j.low,M=q.high^(V<<1|re>>>31),W=q.low^(re<<1|V>>>31),ee=0;ee<5;ee++){var P=B[ie+5*ee];P.high^=M,P.low^=W}for(var se=1;se<25;se++){var M,W,P=B[se],oe=P.high,de=P.low,Z=w[se];Z<32?(M=oe<<Z|de>>>32-Z,W=de<<Z|oe>>>32-Z):(M=de<<Z-32|oe>>>64-Z,W=oe<<Z-32|de>>>64-Z);var H=d[_[se]];H.high=M,H.low=W}var X=d[0],y=B[0];X.high=y.high,X.low=y.low;for(var ie=0;ie<5;ie++)for(var ee=0;ee<5;ee++){var se=ie+5*ee,P=B[se],ce=d[se],fe=d[(ie+1)%5+5*ee],pe=d[(ie+2)%5+5*ee];P.high=ce.high^~fe.high&pe.high,P.low=ce.low^~fe.low&pe.low}var P=B[0],ae=m[$];P.high^=ae.high,P.low^=ae.low}},_doFinalize:function(){var A=this._data,U=A.words;this._nDataBytes*8;var B=A.sigBytes*8,C=this.blockSize*32;U[B>>>5]|=1<<24-B%32,U[(n.ceil((B+1)/C)*C>>>5)-1]|=128,A.sigBytes=U.length*4,this._process();for(var O=this._state,S=this.cfg.outputLength/8,k=S/8,P=[],$=0;$<k;$++){var ie=O[$],M=ie.high,W=ie.low;M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,W=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360,P.push(W),P.push(M)}return new c.init(P,S)},clone:function(){for(var A=a.clone.call(this),U=A._state=this._state.slice(0),B=0;B<25;B++)U[B]=U[B].clone();return A}});i.SHA3=a._createHelper(E),i.HmacSHA3=a._createHmacHelper(E)}(Math),r.SHA3})}(is)),is.exports}var ss={exports:{}},tu;function Zh(){return tu||(tu=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){/** @preserve
				(c) 2012 by Cédric Mesnil. All rights reserved.

				Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

				    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
				    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

				THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
				*/return function(n){var i=r,s=i.lib,c=s.WordArray,a=s.Hasher,h=i.algo,l=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),w=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),_=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=c.create([0,1518500249,1859775393,2400959708,2840853838]),d=c.create([1352829926,1548603684,1836072691,2053994217,0]),E=h.RIPEMD160=a.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,P){for(var $=0;$<16;$++){var ie=P+$,M=k[ie];k[ie]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}var W=this._hash.words,ee=m.words,F=d.words,q=l.words,j=p.words,V=w.words,re=_.words,se,oe,de,Z,H,X,y,ce,fe,pe;X=se=W[0],y=oe=W[1],ce=de=W[2],fe=Z=W[3],pe=H=W[4];for(var ae,$=0;$<80;$+=1)ae=se+k[P+q[$]]|0,$<16?ae+=A(oe,de,Z)+ee[0]:$<32?ae+=U(oe,de,Z)+ee[1]:$<48?ae+=B(oe,de,Z)+ee[2]:$<64?ae+=C(oe,de,Z)+ee[3]:ae+=O(oe,de,Z)+ee[4],ae=ae|0,ae=S(ae,V[$]),ae=ae+H|0,se=H,H=Z,Z=S(de,10),de=oe,oe=ae,ae=X+k[P+j[$]]|0,$<16?ae+=O(y,ce,fe)+F[0]:$<32?ae+=C(y,ce,fe)+F[1]:$<48?ae+=B(y,ce,fe)+F[2]:$<64?ae+=U(y,ce,fe)+F[3]:ae+=A(y,ce,fe)+F[4],ae=ae|0,ae=S(ae,re[$]),ae=ae+pe|0,X=pe,pe=fe,fe=S(ce,10),ce=y,y=ae;ae=W[1]+de+fe|0,W[1]=W[2]+Z+pe|0,W[2]=W[3]+H+X|0,W[3]=W[4]+se+y|0,W[4]=W[0]+oe+ce|0,W[0]=ae},_doFinalize:function(){var k=this._data,P=k.words,$=this._nDataBytes*8,ie=k.sigBytes*8;P[ie>>>5]|=128<<24-ie%32,P[(ie+64>>>9<<4)+14]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,k.sigBytes=(P.length+1)*4,this._process();for(var M=this._hash,W=M.words,ee=0;ee<5;ee++){var F=W[ee];W[ee]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return M},clone:function(){var k=a.clone.call(this);return k._hash=this._hash.clone(),k}});function A(k,P,$){return k^P^$}function U(k,P,$){return k&P|~k&$}function B(k,P,$){return(k|~P)^$}function C(k,P,$){return k&$|P&~$}function O(k,P,$){return k^(P|~$)}function S(k,P){return k<<P|k>>>32-P}i.RIPEMD160=a._createHelper(E),i.HmacRIPEMD160=a._createHmacHelper(E)}(),r.RIPEMD160})}(ss)),ss.exports}var as={exports:{}},ru;function os(){return ru||(ru=1,function(t,e){(function(r,n){t.exports=n(Se())})(ve,function(r){(function(){var n=r,i=n.lib,s=i.Base,c=n.enc,a=c.Utf8,h=n.algo;h.HMAC=s.extend({init:function(l,p){l=this._hasher=new l.init,typeof p=="string"&&(p=a.parse(p));var w=l.blockSize,_=w*4;p.sigBytes>_&&(p=l.finalize(p)),p.clamp();for(var m=this._oKey=p.clone(),d=this._iKey=p.clone(),E=m.words,A=d.words,U=0;U<w;U++)E[U]^=1549556828,A[U]^=909522486;m.sigBytes=d.sigBytes=_,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var p=this._hasher,w=p.finalize(l);p.reset();var _=p.finalize(this._oKey.clone().concat(w));return _}})})()})}(as)),as.exports}var cs={exports:{}},nu;function Qh(){return nu||(nu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),es(),os())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.Base,c=i.WordArray,a=n.algo,h=a.SHA256,l=a.HMAC,p=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:h,iterations:25e4}),init:function(w){this.cfg=this.cfg.extend(w)},compute:function(w,_){for(var m=this.cfg,d=l.create(m.hasher,w),E=c.create(),A=c.create([1]),U=E.words,B=A.words,C=m.keySize,O=m.iterations;U.length<C;){var S=d.update(_).finalize(A);d.reset();for(var k=S.words,P=k.length,$=S,ie=1;ie<O;ie++){$=d.finalize($),d.reset();for(var M=$.words,W=0;W<P;W++)k[W]^=M[W]}E.concat(S),B[0]++}return E.sigBytes=C*4,E}});n.PBKDF2=function(w,_,m){return p.create(m).compute(w,_)}}(),r.PBKDF2})}(cs)),cs.exports}var us={exports:{}},iu;function pr(){return iu||(iu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),Kc(),os())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.Base,c=i.WordArray,a=n.algo,h=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:h,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,w){for(var _,m=this.cfg,d=m.hasher.create(),E=c.create(),A=E.words,U=m.keySize,B=m.iterations;A.length<U;){_&&d.update(_),_=d.update(p).finalize(w),d.reset();for(var C=1;C<B;C++)_=d.finalize(_),d.reset();E.concat(_)}return E.sigBytes=U*4,E}});n.EvpKDF=function(p,w,_){return l.create(_).compute(p,w)}}(),r.EvpKDF})}(us)),us.exports}var fs={exports:{}},su;function et(){return su||(su=1,function(t,e){(function(r,n,i){t.exports=n(Se(),pr())})(ve,function(r){r.lib.Cipher||function(n){var i=r,s=i.lib,c=s.Base,a=s.WordArray,h=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var p=l.Base64,w=i.algo,_=w.EvpKDF,m=s.Cipher=h.extend({cfg:c.extend(),createEncryptor:function(M,W){return this.create(this._ENC_XFORM_MODE,M,W)},createDecryptor:function(M,W){return this.create(this._DEC_XFORM_MODE,M,W)},init:function(M,W,ee){this.cfg=this.cfg.extend(ee),this._xformMode=M,this._key=W,this.reset()},reset:function(){h.reset.call(this),this._doReset()},process:function(M){return this._append(M),this._process()},finalize:function(M){M&&this._append(M);var W=this._doFinalize();return W},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function M(W){return typeof W=="string"?ie:k}return function(W){return{encrypt:function(ee,F,q){return M(F).encrypt(W,ee,F,q)},decrypt:function(ee,F,q){return M(F).decrypt(W,ee,F,q)}}}}()});s.StreamCipher=m.extend({_doFinalize:function(){var M=this._process(!0);return M},blockSize:1});var d=i.mode={},E=s.BlockCipherMode=c.extend({createEncryptor:function(M,W){return this.Encryptor.create(M,W)},createDecryptor:function(M,W){return this.Decryptor.create(M,W)},init:function(M,W){this._cipher=M,this._iv=W}}),A=d.CBC=function(){var M=E.extend();M.Encryptor=M.extend({processBlock:function(ee,F){var q=this._cipher,j=q.blockSize;W.call(this,ee,F,j),q.encryptBlock(ee,F),this._prevBlock=ee.slice(F,F+j)}}),M.Decryptor=M.extend({processBlock:function(ee,F){var q=this._cipher,j=q.blockSize,V=ee.slice(F,F+j);q.decryptBlock(ee,F),W.call(this,ee,F,j),this._prevBlock=V}});function W(ee,F,q){var j,V=this._iv;V?(j=V,this._iv=n):j=this._prevBlock;for(var re=0;re<q;re++)ee[F+re]^=j[re]}return M}(),U=i.pad={},B=U.Pkcs7={pad:function(M,W){for(var ee=W*4,F=ee-M.sigBytes%ee,q=F<<24|F<<16|F<<8|F,j=[],V=0;V<F;V+=4)j.push(q);var re=a.create(j,F);M.concat(re)},unpad:function(M){var W=M.words[M.sigBytes-1>>>2]&255;M.sigBytes-=W}};s.BlockCipher=m.extend({cfg:m.cfg.extend({mode:A,padding:B}),reset:function(){var M;m.reset.call(this);var W=this.cfg,ee=W.iv,F=W.mode;this._xformMode==this._ENC_XFORM_MODE?M=F.createEncryptor:(M=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==M?this._mode.init(this,ee&&ee.words):(this._mode=M.call(F,this,ee&&ee.words),this._mode.__creator=M)},_doProcessBlock:function(M,W){this._mode.processBlock(M,W)},_doFinalize:function(){var M,W=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(W.pad(this._data,this.blockSize),M=this._process(!0)):(M=this._process(!0),W.unpad(M)),M},blockSize:128/32});var C=s.CipherParams=c.extend({init:function(M){this.mixIn(M)},toString:function(M){return(M||this.formatter).stringify(this)}}),O=i.format={},S=O.OpenSSL={stringify:function(M){var W,ee=M.ciphertext,F=M.salt;return F?W=a.create([1398893684,1701076831]).concat(F).concat(ee):W=ee,W.toString(p)},parse:function(M){var W,ee=p.parse(M),F=ee.words;return F[0]==1398893684&&F[1]==1701076831&&(W=a.create(F.slice(2,4)),F.splice(0,4),ee.sigBytes-=16),C.create({ciphertext:ee,salt:W})}},k=s.SerializableCipher=c.extend({cfg:c.extend({format:S}),encrypt:function(M,W,ee,F){F=this.cfg.extend(F);var q=M.createEncryptor(ee,F),j=q.finalize(W),V=q.cfg;return C.create({ciphertext:j,key:ee,iv:V.iv,algorithm:M,mode:V.mode,padding:V.padding,blockSize:M.blockSize,formatter:F.format})},decrypt:function(M,W,ee,F){F=this.cfg.extend(F),W=this._parse(W,F.format);var q=M.createDecryptor(ee,F).finalize(W.ciphertext);return q},_parse:function(M,W){return typeof M=="string"?W.parse(M,this):M}}),P=i.kdf={},$=P.OpenSSL={execute:function(M,W,ee,F,q){if(F||(F=a.random(64/8)),q)var j=_.create({keySize:W+ee,hasher:q}).compute(M,F);else var j=_.create({keySize:W+ee}).compute(M,F);var V=a.create(j.words.slice(W),ee*4);return j.sigBytes=W*4,C.create({key:j,iv:V,salt:F})}},ie=s.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:$}),encrypt:function(M,W,ee,F){F=this.cfg.extend(F);var q=F.kdf.execute(ee,M.keySize,M.ivSize,F.salt,F.hasher);F.iv=q.iv;var j=k.encrypt.call(this,M,W,q.key,F);return j.mixIn(q),j},decrypt:function(M,W,ee,F){F=this.cfg.extend(F),W=this._parse(W,F.format);var q=F.kdf.execute(ee,M.keySize,M.ivSize,W.salt,F.hasher);F.iv=q.iv;var j=k.decrypt.call(this,M,W,q.key,F);return j}})}()})}(fs)),fs.exports}var ls={exports:{}},au;function Xh(){return au||(au=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,c){var a=this._cipher,h=a.blockSize;i.call(this,s,c,h,a),this._prevBlock=s.slice(c,c+h)}}),n.Decryptor=n.extend({processBlock:function(s,c){var a=this._cipher,h=a.blockSize,l=s.slice(c,c+h);i.call(this,s,c,h,a),this._prevBlock=l}});function i(s,c,a,h){var l,p=this._iv;p?(l=p.slice(0),this._iv=void 0):l=this._prevBlock,h.encryptBlock(l,0);for(var w=0;w<a;w++)s[c+w]^=l[w]}return n}(),r.mode.CFB})}(ls)),ls.exports}var ds={exports:{}},ou;function Jh(){return ou||(ou=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,c){var a=this._cipher,h=a.blockSize,l=this._iv,p=this._counter;l&&(p=this._counter=l.slice(0),this._iv=void 0);var w=p.slice(0);a.encryptBlock(w,0),p[h-1]=p[h-1]+1|0;for(var _=0;_<h;_++)s[c+_]^=w[_]}});return n.Decryptor=i,n}(),r.mode.CTR})}(ds)),ds.exports}var hs={exports:{}},cu;function e1(){return cu||(cu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var h=a>>16&255,l=a>>8&255,p=a&255;h===255?(h=0,l===255?(l=0,p===255?p=0:++p):++l):++h,a=0,a+=h<<16,a+=l<<8,a+=p}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var c=n.Encryptor=n.extend({processBlock:function(a,h){var l=this._cipher,p=l.blockSize,w=this._iv,_=this._counter;w&&(_=this._counter=w.slice(0),this._iv=void 0),s(_);var m=_.slice(0);l.encryptBlock(m,0);for(var d=0;d<p;d++)a[h+d]^=m[d]}});return n.Decryptor=c,n}(),r.mode.CTRGladman})}(hs)),hs.exports}var xs={exports:{}},uu;function t1(){return uu||(uu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,c){var a=this._cipher,h=a.blockSize,l=this._iv,p=this._keystream;l&&(p=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(p,0);for(var w=0;w<h;w++)s[c+w]^=p[w]}});return n.Decryptor=i,n}(),r.mode.OFB})}(xs)),xs.exports}var ps={exports:{}},fu;function r1(){return fu||(fu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),r.mode.ECB})}(ps)),ps.exports}var ys={exports:{}},lu;function n1(){return lu||(lu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,c=i*4,a=c-s%c,h=s+a-1;n.clamp(),n.words[h>>>2]|=a<<24-h%4*8,n.sigBytes+=a},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(ys)),ys.exports}var gs={exports:{}},du;function i1(){return du||(du=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.pad.Iso10126={pad:function(n,i){var s=i*4,c=s-n.sigBytes%s;n.concat(r.lib.WordArray.random(c-1)).concat(r.lib.WordArray.create([c<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}(gs)),gs.exports}var ws={exports:{}},hu;function s1(){return hu||(hu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(ws)),ws.exports}var bs={exports:{}},xu;function a1(){return xu||(xu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},r.pad.ZeroPadding})}(bs)),bs.exports}var ms={exports:{}},pu;function o1(){return pu||(pu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(ms)),ms.exports}var _s={exports:{}},yu;function c1(){return yu||(yu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),et())})(ve,function(r){return function(n){var i=r,s=i.lib,c=s.CipherParams,a=i.enc,h=a.Hex,l=i.format;l.Hex={stringify:function(p){return p.ciphertext.toString(h)},parse:function(p){var w=h.parse(p);return c.create({ciphertext:w})}}}(),r.format.Hex})}(_s)),_s.exports}var Es={exports:{}},gu;function u1(){return gu||(gu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),Fr(),Tr(),pr(),et())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,c=n.algo,a=[],h=[],l=[],p=[],w=[],_=[],m=[],d=[],E=[],A=[];(function(){for(var C=[],O=0;O<256;O++)O<128?C[O]=O<<1:C[O]=O<<1^283;for(var S=0,k=0,O=0;O<256;O++){var P=k^k<<1^k<<2^k<<3^k<<4;P=P>>>8^P&255^99,a[S]=P,h[P]=S;var $=C[S],ie=C[$],M=C[ie],W=C[P]*257^P*16843008;l[S]=W<<24|W>>>8,p[S]=W<<16|W>>>16,w[S]=W<<8|W>>>24,_[S]=W;var W=M*16843009^ie*65537^$*257^S*16843008;m[P]=W<<24|W>>>8,d[P]=W<<16|W>>>16,E[P]=W<<8|W>>>24,A[P]=W,S?(S=$^C[C[C[M^$]]],k^=C[C[k]]):S=k=1}})();var U=[0,1,2,4,8,16,32,64,128,27,54],B=c.AES=s.extend({_doReset:function(){var C;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var O=this._keyPriorReset=this._key,S=O.words,k=O.sigBytes/4,P=this._nRounds=k+6,$=(P+1)*4,ie=this._keySchedule=[],M=0;M<$;M++)M<k?ie[M]=S[M]:(C=ie[M-1],M%k?k>6&&M%k==4&&(C=a[C>>>24]<<24|a[C>>>16&255]<<16|a[C>>>8&255]<<8|a[C&255]):(C=C<<8|C>>>24,C=a[C>>>24]<<24|a[C>>>16&255]<<16|a[C>>>8&255]<<8|a[C&255],C^=U[M/k|0]<<24),ie[M]=ie[M-k]^C);for(var W=this._invKeySchedule=[],ee=0;ee<$;ee++){var M=$-ee;if(ee%4)var C=ie[M];else var C=ie[M-4];ee<4||M<=4?W[ee]=C:W[ee]=m[a[C>>>24]]^d[a[C>>>16&255]]^E[a[C>>>8&255]]^A[a[C&255]]}}},encryptBlock:function(C,O){this._doCryptBlock(C,O,this._keySchedule,l,p,w,_,a)},decryptBlock:function(C,O){var S=C[O+1];C[O+1]=C[O+3],C[O+3]=S,this._doCryptBlock(C,O,this._invKeySchedule,m,d,E,A,h);var S=C[O+1];C[O+1]=C[O+3],C[O+3]=S},_doCryptBlock:function(C,O,S,k,P,$,ie,M){for(var W=this._nRounds,ee=C[O]^S[0],F=C[O+1]^S[1],q=C[O+2]^S[2],j=C[O+3]^S[3],V=4,re=1;re<W;re++){var se=k[ee>>>24]^P[F>>>16&255]^$[q>>>8&255]^ie[j&255]^S[V++],oe=k[F>>>24]^P[q>>>16&255]^$[j>>>8&255]^ie[ee&255]^S[V++],de=k[q>>>24]^P[j>>>16&255]^$[ee>>>8&255]^ie[F&255]^S[V++],Z=k[j>>>24]^P[ee>>>16&255]^$[F>>>8&255]^ie[q&255]^S[V++];ee=se,F=oe,q=de,j=Z}var se=(M[ee>>>24]<<24|M[F>>>16&255]<<16|M[q>>>8&255]<<8|M[j&255])^S[V++],oe=(M[F>>>24]<<24|M[q>>>16&255]<<16|M[j>>>8&255]<<8|M[ee&255])^S[V++],de=(M[q>>>24]<<24|M[j>>>16&255]<<16|M[ee>>>8&255]<<8|M[F&255])^S[V++],Z=(M[j>>>24]<<24|M[ee>>>16&255]<<16|M[F>>>8&255]<<8|M[q&255])^S[V++];C[O]=se,C[O+1]=oe,C[O+2]=de,C[O+3]=Z},keySize:256/32});n.AES=s._createHelper(B)}(),r.AES})}(Es)),Es.exports}var vs={exports:{}},wu;function f1(){return wu||(wu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),Fr(),Tr(),pr(),et())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,c=i.BlockCipher,a=n.algo,h=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],w=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],_=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=a.DES=c.extend({_doReset:function(){for(var U=this._key,B=U.words,C=[],O=0;O<56;O++){var S=h[O]-1;C[O]=B[S>>>5]>>>31-S%32&1}for(var k=this._subKeys=[],P=0;P<16;P++){for(var $=k[P]=[],ie=p[P],O=0;O<24;O++)$[O/6|0]|=C[(l[O]-1+ie)%28]<<31-O%6,$[4+(O/6|0)]|=C[28+(l[O+24]-1+ie)%28]<<31-O%6;$[0]=$[0]<<1|$[0]>>>31;for(var O=1;O<7;O++)$[O]=$[O]>>>(O-1)*4+3;$[7]=$[7]<<5|$[7]>>>27}for(var M=this._invSubKeys=[],O=0;O<16;O++)M[O]=k[15-O]},encryptBlock:function(U,B){this._doCryptBlock(U,B,this._subKeys)},decryptBlock:function(U,B){this._doCryptBlock(U,B,this._invSubKeys)},_doCryptBlock:function(U,B,C){this._lBlock=U[B],this._rBlock=U[B+1],d.call(this,4,252645135),d.call(this,16,65535),E.call(this,2,858993459),E.call(this,8,16711935),d.call(this,1,1431655765);for(var O=0;O<16;O++){for(var S=C[O],k=this._lBlock,P=this._rBlock,$=0,ie=0;ie<8;ie++)$|=w[ie][((P^S[ie])&_[ie])>>>0];this._lBlock=P,this._rBlock=k^$}var M=this._lBlock;this._lBlock=this._rBlock,this._rBlock=M,d.call(this,1,1431655765),E.call(this,8,16711935),E.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),U[B]=this._lBlock,U[B+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function d(U,B){var C=(this._lBlock>>>U^this._rBlock)&B;this._rBlock^=C,this._lBlock^=C<<U}function E(U,B){var C=(this._rBlock>>>U^this._lBlock)&B;this._lBlock^=C,this._rBlock^=C<<U}n.DES=c._createHelper(m);var A=a.TripleDES=c.extend({_doReset:function(){var U=this._key,B=U.words;if(B.length!==2&&B.length!==4&&B.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var C=B.slice(0,2),O=B.length<4?B.slice(0,2):B.slice(2,4),S=B.length<6?B.slice(0,2):B.slice(4,6);this._des1=m.createEncryptor(s.create(C)),this._des2=m.createEncryptor(s.create(O)),this._des3=m.createEncryptor(s.create(S))},encryptBlock:function(U,B){this._des1.encryptBlock(U,B),this._des2.decryptBlock(U,B),this._des3.encryptBlock(U,B)},decryptBlock:function(U,B){this._des3.decryptBlock(U,B),this._des2.encryptBlock(U,B),this._des1.decryptBlock(U,B)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=c._createHelper(A)}(),r.TripleDES})}(vs)),vs.exports}var Bs={exports:{}},bu;function l1(){return bu||(bu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),Fr(),Tr(),pr(),et())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,c=n.algo,a=c.RC4=s.extend({_doReset:function(){for(var p=this._key,w=p.words,_=p.sigBytes,m=this._S=[],d=0;d<256;d++)m[d]=d;for(var d=0,E=0;d<256;d++){var A=d%_,U=w[A>>>2]>>>24-A%4*8&255;E=(E+m[d]+U)%256;var B=m[d];m[d]=m[E],m[E]=B}this._i=this._j=0},_doProcessBlock:function(p,w){p[w]^=h.call(this)},keySize:256/32,ivSize:0});function h(){for(var p=this._S,w=this._i,_=this._j,m=0,d=0;d<4;d++){w=(w+1)%256,_=(_+p[w])%256;var E=p[w];p[w]=p[_],p[_]=E,m|=p[(p[w]+p[_])%256]<<24-d*8}return this._i=w,this._j=_,m}n.RC4=s._createHelper(a);var l=c.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var p=this.cfg.drop;p>0;p--)h.call(this)}});n.RC4Drop=s._createHelper(l)}(),r.RC4})}(Bs)),Bs.exports}var As={exports:{}},mu;function d1(){return mu||(mu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),Fr(),Tr(),pr(),et())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,c=n.algo,a=[],h=[],l=[],p=c.Rabbit=s.extend({_doReset:function(){for(var _=this._key.words,m=this.cfg.iv,d=0;d<4;d++)_[d]=(_[d]<<8|_[d]>>>24)&16711935|(_[d]<<24|_[d]>>>8)&4278255360;var E=this._X=[_[0],_[3]<<16|_[2]>>>16,_[1],_[0]<<16|_[3]>>>16,_[2],_[1]<<16|_[0]>>>16,_[3],_[2]<<16|_[1]>>>16],A=this._C=[_[2]<<16|_[2]>>>16,_[0]&4294901760|_[1]&65535,_[3]<<16|_[3]>>>16,_[1]&4294901760|_[2]&65535,_[0]<<16|_[0]>>>16,_[2]&4294901760|_[3]&65535,_[1]<<16|_[1]>>>16,_[3]&4294901760|_[0]&65535];this._b=0;for(var d=0;d<4;d++)w.call(this);for(var d=0;d<8;d++)A[d]^=E[d+4&7];if(m){var U=m.words,B=U[0],C=U[1],O=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,S=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,k=O>>>16|S&4294901760,P=S<<16|O&65535;A[0]^=O,A[1]^=k,A[2]^=S,A[3]^=P,A[4]^=O,A[5]^=k,A[6]^=S,A[7]^=P;for(var d=0;d<4;d++)w.call(this)}},_doProcessBlock:function(_,m){var d=this._X;w.call(this),a[0]=d[0]^d[5]>>>16^d[3]<<16,a[1]=d[2]^d[7]>>>16^d[5]<<16,a[2]=d[4]^d[1]>>>16^d[7]<<16,a[3]=d[6]^d[3]>>>16^d[1]<<16;for(var E=0;E<4;E++)a[E]=(a[E]<<8|a[E]>>>24)&16711935|(a[E]<<24|a[E]>>>8)&4278255360,_[m+E]^=a[E]},blockSize:128/32,ivSize:64/32});function w(){for(var _=this._X,m=this._C,d=0;d<8;d++)h[d]=m[d];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<h[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<h[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<h[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<h[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<h[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<h[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<h[6]>>>0?1:0)|0,this._b=m[7]>>>0<h[7]>>>0?1:0;for(var d=0;d<8;d++){var E=_[d]+m[d],A=E&65535,U=E>>>16,B=((A*A>>>17)+A*U>>>15)+U*U,C=((E&4294901760)*E|0)+((E&65535)*E|0);l[d]=B^C}_[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,_[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,_[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,_[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,_[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,_[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,_[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,_[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.Rabbit=s._createHelper(p)}(),r.Rabbit})}(As)),As.exports}var Cs={exports:{}},_u;function h1(){return _u||(_u=1,function(t,e){(function(r,n,i){t.exports=n(Se(),Fr(),Tr(),pr(),et())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,c=n.algo,a=[],h=[],l=[],p=c.RabbitLegacy=s.extend({_doReset:function(){var _=this._key.words,m=this.cfg.iv,d=this._X=[_[0],_[3]<<16|_[2]>>>16,_[1],_[0]<<16|_[3]>>>16,_[2],_[1]<<16|_[0]>>>16,_[3],_[2]<<16|_[1]>>>16],E=this._C=[_[2]<<16|_[2]>>>16,_[0]&4294901760|_[1]&65535,_[3]<<16|_[3]>>>16,_[1]&4294901760|_[2]&65535,_[0]<<16|_[0]>>>16,_[2]&4294901760|_[3]&65535,_[1]<<16|_[1]>>>16,_[3]&4294901760|_[0]&65535];this._b=0;for(var A=0;A<4;A++)w.call(this);for(var A=0;A<8;A++)E[A]^=d[A+4&7];if(m){var U=m.words,B=U[0],C=U[1],O=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,S=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,k=O>>>16|S&4294901760,P=S<<16|O&65535;E[0]^=O,E[1]^=k,E[2]^=S,E[3]^=P,E[4]^=O,E[5]^=k,E[6]^=S,E[7]^=P;for(var A=0;A<4;A++)w.call(this)}},_doProcessBlock:function(_,m){var d=this._X;w.call(this),a[0]=d[0]^d[5]>>>16^d[3]<<16,a[1]=d[2]^d[7]>>>16^d[5]<<16,a[2]=d[4]^d[1]>>>16^d[7]<<16,a[3]=d[6]^d[3]>>>16^d[1]<<16;for(var E=0;E<4;E++)a[E]=(a[E]<<8|a[E]>>>24)&16711935|(a[E]<<24|a[E]>>>8)&4278255360,_[m+E]^=a[E]},blockSize:128/32,ivSize:64/32});function w(){for(var _=this._X,m=this._C,d=0;d<8;d++)h[d]=m[d];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<h[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<h[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<h[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<h[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<h[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<h[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<h[6]>>>0?1:0)|0,this._b=m[7]>>>0<h[7]>>>0?1:0;for(var d=0;d<8;d++){var E=_[d]+m[d],A=E&65535,U=E>>>16,B=((A*A>>>17)+A*U>>>15)+U*U,C=((E&4294901760)*E|0)+((E&65535)*E|0);l[d]=B^C}_[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,_[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,_[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,_[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,_[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,_[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,_[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,_[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.RabbitLegacy=s._createHelper(p)}(),r.RabbitLegacy})}(Cs)),Cs.exports}var Fs={exports:{}},Eu;function x1(){return Eu||(Eu=1,function(t,e){(function(r,n,i){t.exports=n(Se(),Fr(),Tr(),pr(),et())})(ve,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,c=n.algo;const a=16,h=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var p={pbox:[],sbox:[]};function w(A,U){let B=U>>24&255,C=U>>16&255,O=U>>8&255,S=U&255,k=A.sbox[0][B]+A.sbox[1][C];return k=k^A.sbox[2][O],k=k+A.sbox[3][S],k}function _(A,U,B){let C=U,O=B,S;for(let k=0;k<a;++k)C=C^A.pbox[k],O=w(A,C)^O,S=C,C=O,O=S;return S=C,C=O,O=S,O=O^A.pbox[a],C=C^A.pbox[a+1],{left:C,right:O}}function m(A,U,B){let C=U,O=B,S;for(let k=a+1;k>1;--k)C=C^A.pbox[k],O=w(A,C)^O,S=C,C=O,O=S;return S=C,C=O,O=S,O=O^A.pbox[1],C=C^A.pbox[0],{left:C,right:O}}function d(A,U,B){for(let P=0;P<4;P++){A.sbox[P]=[];for(let $=0;$<256;$++)A.sbox[P][$]=l[P][$]}let C=0;for(let P=0;P<a+2;P++)A.pbox[P]=h[P]^U[C],C++,C>=B&&(C=0);let O=0,S=0,k=0;for(let P=0;P<a+2;P+=2)k=_(A,O,S),O=k.left,S=k.right,A.pbox[P]=O,A.pbox[P+1]=S;for(let P=0;P<4;P++)for(let $=0;$<256;$+=2)k=_(A,O,S),O=k.left,S=k.right,A.sbox[P][$]=O,A.sbox[P][$+1]=S;return!0}var E=c.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var A=this._keyPriorReset=this._key,U=A.words,B=A.sigBytes/4;d(p,U,B)}},encryptBlock:function(A,U){var B=_(p,A[U],A[U+1]);A[U]=B.left,A[U+1]=B.right},decryptBlock:function(A,U){var B=m(p,A[U],A[U+1]);A[U]=B.left,A[U+1]=B.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(E)}(),r.Blowfish})}(Fs)),Fs.exports}(function(t,e){(function(r,n,i){t.exports=n(Se(),C0(),Vh(),Gh(),Fr(),Wh(),Tr(),Kc(),es(),Lh(),Xc(),Kh(),Yh(),Zh(),os(),Qh(),pr(),et(),Xh(),Jh(),e1(),t1(),r1(),n1(),i1(),s1(),a1(),o1(),c1(),u1(),f1(),l1(),d1(),h1(),x1())})(ve,function(r){return r})})(zc);var p1=zc.exports;const vu=qs(p1);window.Buffer=Lt.Buffer;const y1=Lt.Buffer.alloc(32),g1=`
account-id`,w1=t=>t<0?(Number(t)>>>0).toString(16):Number(t).toString(16),b1=t=>{const e=qh.unsigned(Lt.Buffer.from(t));return w1(e).padStart(8,"0")},Bu=t=>{const e=[];let r;for(r=0;r<t.length;r+=1)e[r/4|0]|=t[r]<<24-8*r;return vu.lib.WordArray.create(e,t.length)},m1=(t,e)=>{const r=[];return e>0&&r.push(t>>>24),e>1&&r.push(t>>>16&255),e>2&&r.push(t>>>8&255),e>3&&r.push(t&255),r},_1=(t,e)=>{t.hasOwnProperty("sigBytes")&&t.hasOwnProperty("words")&&(e=t.sigBytes,t=t.words);let r=[],n,i=0;for(;e>0;)n=m1(t[i],Math.min(4,e)),e-=n.length,r=[...r,n],i++;return[].concat.apply([],r)},Ts=(t,e="")=>{try{var r=Ee.from(t);const n=vu.algo.SHA224.create();n.update(g1),n.update(Bu(r.toUint8Array()));const i=Lt.Buffer.from(y1);e&&i.writeUInt32BE(e),n.update(Bu(i));const s=n.finalize(),c=_1(s,28);return b1(c)+s.toString()}catch(n){return console.log(n),!1}},E1={readyState:"Loadable",url:"http://localhost:4943",authClient:!0,connectWallet:async function(t={whitelist:[],host:""}){var e=this,r={};return e.authClient=await Pc.create(),new Promise(async(n,i)=>{var s=await e.authClient.isAuthenticated();s?(r=await c(),n(r)):e.authClient.login({identityProvider:"http://rdmx6-jaaaa-aaaaa-aaadq-cai.localhost:4943",onSuccess:async()=>{r=await c(),n(r)}});async function c(){var a=await e.authClient.getIdentity(),h=await(a==null?void 0:a.getPrincipal());e.agent=new Vt({identity:a,host:t.host}),e.agent.fetchRootKey();var l=await Ts(a==null?void 0:a.getPrincipal().toString());return e.createActor=async function(p={canisterId:"",interfaceFactory:!1}){return!p.canisterId||!p.interfaceFactory?!1:await cr.createActor(p.interfaceFactory,{agent:this.agent,canisterId:p.canisterId})},e.createAgent=async function(){return new Vt({identity:a,host:t.host})},e.getPrincipal=async function(){return a.getPrincipal()},e.disConnectWallet=async function(){await e.authClient.logout()},{accountId:l,principalId:h.toString()}}})}};window.ic&&window.ic.plug&&window.ic.plug.init(),window.onload=function(){window.ic.plug&&(v1.readyState="Installed")};const v1={readyState:"NotDetected",url:"https://plugwallet.ooo/",connectWallet:async function(t={whitelist:[],host:""}){window.ic.plug||(this.readyState="NotDetected",window.open("https://plugwallet.ooo/"));var e=!1,r=!1,n=!1;new Promise(s=>{setTimeout(()=>{s(!1)},3e3)}),n=await window.ic.plug.isConnected();try{n?await window.ic.plug.createAgent(t):e=await window.ic.plug.requestConnect(t),r=await window.ic.plug.agent.getPrincipal();var i=await window.ic.plug.sessionManager.getSession();return this.agent=window.ic.plug.agent,this.getPrincipal=async function(){return window.ic.plug.getPrincipal()},this.createActor=async function(s,c){return window.ic.plug.createActor(s,c)},this.batchTransactions=async function(s,c={state:"init",txList:[]}){return c&&c.txList>0&&s.forEach((a,h)=>{s[h].onSuccess=()=>{c.state=txList[h],a.onSuccess()}}),window.ic.plug.batchTransactions(s)},{accountId:i.accountId,principalId:r.toString()}}catch{return!1}},disConnectWallet:async function(){await window.ic.plug.disconnect()}};window.Buffer=Lt.Buffer,Lt.Buffer.from(new TextEncoder().encode(`
ic-request`));var B1="https://www.stoicwallet.com",Ss,F0,A1,Au={},Cu={};function C1(t){Cu[t].parentNode.removeChild(Cu[t])}window.addEventListener("message",function(t){t.origin==B1&&(t&&t.data&&t.data.target==="STOIC-EXT"?(typeof t.data.success<"u"&&t.data.success?Au[t.data.listener][0](t.data.data):Au[t.data.listener][1](t.data.data),C1(t.data.listener)):t.data.action=="initiateStoicConnect"?Ss.postMessage({action:"requestAuthorization",apikey:A1},"*"):t.data.action=="rejectAuthorization"?(F0[1]("Authorization Rejected"),F0=null,Ss.close()):t.data.action=="confirmAuthorization"&&(F0[0](t.data),F0=null,Ss.close()))},!1),window.icx=new gr.AstroXWebViewHandler;const hn={providerUrl:"https://63k2f-nyaaa-aaaah-aakla-cai.raw.ic0.app",delegationModes:["globalThis"],ledgerHost:"https://icp0.io/"},F1=async(t="",e=[])=>await xt.IC.create({useFrame:!(window.innerWidth<768),signerProviderUrl:`${hn.providerUrl}/#signer`,walletProviderUrl:`${hn.providerUrl}/#transaction`,identityProvider:`${hn.providerUrl}/#authorize`,host:t||hn.ledgerHost,ledgerHost:t||hn.ledgerHost,ledgerCanisterId:"ryjl3-tyaaa-aaaaa-aaaba-cai",permissions:["permissions-identity","permissions-wallet"],delegationTargets:e,noUnify:!1});(Tu=window.ic)!=null&&Tu.astrox||F1(),(Su=window==null?void 0:window.ethereum)!=null&&Su.isMetaMask;const T1=[{id:"nns",name:"Internet Identity",icon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA4ODAgNjQwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA4ODAgNjQwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6bm9uZTt9Cgkuc3Qxe2ZpbGw6dXJsKCNTVkdJRF8xXyk7fQoJLnN0MntmaWxsOnVybCgjU1ZHSURfMl8pO30KCS5zdDN7ZmlsbDojMjlBQkUyO30KPC9zdHlsZT4KPGc+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjcxLjk5LDMyMGMwLTQ1LjA5LTM3LjYzLTgxLjc4LTgzLjg5LTgxLjc4Yy0xMi4yNiwwLTMzLjgsNi4wNy02Ni43OCwzNC45NwoJCWMtMTcuNzMsMTUuNTQtMzMuMTcsMzIuODctNDMuODUsNDUuNTVjMTcuOTksMTkuMDUsMzcuNDcsMzkuMjMsNDYuMzEsNDYuODljMy42MywzLjE0LDI3LjYzLDIyLjgxLDU2LjA5LDM1LjE0CgkJYzMuMzQsMC43NCw2LjA2LDEsOC4xNiwxQzYzNC4zNCw0MDEuNSw2NzEuOTksMzY0Ljg0LDY3MS45OSwzMjB6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTIyLjg5LDM2Ni41NGMyNy4yMiwyMy41OSw0NS43MiwzMS43NCw1Ni45OCwzNC4yNGMzLjM0LDAuNzQsNi4wNiwxLDguMTYsMQoJCWM0Ni4zLTAuMjgsODMuOTUtMzYuOTQsODMuOTUtODEuNzhjMC00NS4wOS0zNy42My04MS43OC04My44OS04MS43OGMtMTIuMjYsMC0zMy44LDYuMDctNjYuNzgsMzQuOTcKCQljLTE3LjczLDE1LjU0LTMzLjE3LDMyLjg3LTQzLjg1LDQ1LjU1QzQ3Ny4yMSwzMTkuMDUsNTA0LjMsMzUwLjQzLDUyMi44OSwzNjYuNTR6Ii8+Cgk8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lEXzFfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjUxNS4yNzQzIiB5MT0iMjAxLjkzNDYiIHgyPSI3MDUuNDg0OSIgeTI9IjM5OC45MDM0Ij4KCQk8c3RvcCAgb2Zmc2V0PSIwLjIxIiBzdHlsZT0ic3RvcC1jb2xvcjojRjE1QTI0Ii8+CgkJPHN0b3AgIG9mZnNldD0iMC42ODQxIiBzdHlsZT0ic3RvcC1jb2xvcjojRkJCMDNCIi8+Cgk8L2xpbmVhckdyYWRpZW50PgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTU4OC4xLDE4NGMtMzIuMTYsMC02Ny4yOCwxNi40OS0xMDQuMzgsNDljLTE3LjU3LDE1LjQtMzIuOCwzMS44OC00NC4yMyw0NS4xYzAuMDIsMC4wMiwwLjA0LDAuMDQsMC4wNiwwLjA3CgkJYzAuMDMtMC4wNCwwLjA1LTAuMDYsMC4wNS0wLjA2czE4LjAzLDE5LjYzLDM3Ljg3LDQwLjY0YzEwLjY4LTEyLjY5LDI2LjExLTMwLjAxLDQzLjg1LTQ1LjU1YzMyLjk4LTI4LjkxLDU0LjUyLTM0Ljk3LDY2Ljc4LTM0Ljk3CgkJYzQ2LjI2LDAsODMuODksMzYuNjksODMuODksODEuNzhjMCw0NC44NC0zNy42NSw4MS41LTgzLjk1LDgxLjc4Yy0yLjExLDAtNC44Mi0wLjI2LTguMTYtMWMxMy40OSw1Ljg0LDI3Ljk5LDEwLjA0LDQxLjgsMTAuMDQKCQljODQuNzksMCwxMDEuMzYtNTUuMzMsMTAyLjQ5LTU5LjI1YzIuNTEtMTAuMTQsMy44NC0yMC43LDMuODQtMzEuNTZDNzI4LDI0NS4wMSw2NjUuMjQsMTg0LDU4OC4xLDE4NHoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yMDguMDEsMzIwYzAsNDUuMDksMzcuNjMsODEuNzgsODMuODksODEuNzhjMTIuMjYsMCwzMy44LTYuMDcsNjYuNzgtMzQuOTcKCQljMTcuNzMtMTUuNTQsMzMuMTctMzIuODcsNDMuODUtNDUuNTVjLTE3Ljk5LTE5LjA1LTM3LjQ3LTM5LjIzLTQ2LjMxLTQ2Ljg5Yy0zLjYzLTMuMTQtMjcuNjMtMjIuODEtNTYuMDktMzUuMTQKCQljLTMuMzQtMC43NC02LjA2LTEtOC4xNi0xQzI0NS42NiwyMzguNSwyMDguMDEsMjc1LjE2LDIwOC4wMSwzMjB6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzU3LjExLDI3My40NmMtMjcuMjItMjMuNTktNDUuNzItMzEuNzQtNTYuOTgtMzQuMjRjLTMuMzQtMC43NC02LjA2LTEtOC4xNi0xCgkJYy00Ni4zLDAuMjgtODMuOTUsMzYuOTQtODMuOTUsODEuNzhjMCw0NS4wOSwzNy42Myw4MS43OCw4My44OSw4MS43OGMxMi4yNiwwLDMzLjgtNi4wNyw2Ni43OC0zNC45NwoJCWMxNy43My0xNS41NCwzMy4xNy0zMi44Nyw0My44NS00NS41NWMwLjI2LTAuMywwLjUyLTAuNjIsMC43OC0wLjkyQzM5Mi4xMiwzMDcuNTEsMzc1LjcsMjg5LjU3LDM1Ny4xMSwyNzMuNDZ6Ii8+CgkKCQk8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lEXzJfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9Ii04NzcuMzAzNSIgeTE9Ii0xMTIyLjY4MTkiIHgyPSItNjg3LjA5MjgiIHkyPSItOTI1LjcxMzEiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIC0xIC01MTIuNTc3OCAtNjg0LjYxNjQpIj4KCQk8c3RvcCAgb2Zmc2V0PSIwLjIxIiBzdHlsZT0ic3RvcC1jb2xvcjojRUQxRTc5Ii8+CgkJPHN0b3AgIG9mZnNldD0iMC44OTI5IiBzdHlsZT0ic3RvcC1jb2xvcjojNTIyNzg1Ii8+Cgk8L2xpbmVhckdyYWRpZW50PgoJPHBhdGggY2xhc3M9InN0MiIgZD0iTTI5MS45LDQ1NmMzMi4xNiwwLDY3LjI4LTE2LjQ5LDEwNC4zOC00OWMxNy41Ny0xNS40LDMyLjgtMzEuODgsNDQuMjMtNDUuMWMtMC4wMi0wLjAyLTAuMDQtMC4wNC0wLjA2LTAuMDcKCQljLTAuMDMsMC4wNC0wLjA1LDAuMDYtMC4wNSwwLjA2cy0xOC4wMy0xOS42My0zNy44Ny00MC42NGMtMTAuNjgsMTIuNjktMjYuMTEsMzAuMDEtNDMuODUsNDUuNTUKCQljLTMyLjk4LDI4LjkxLTU0LjUyLDM0Ljk3LTY2Ljc4LDM0Ljk3Yy00Ni4yNiwwLTgzLjg5LTM2LjY5LTgzLjg5LTgxLjc4YzAtNDQuODQsMzcuNjUtODEuNSw4My45NS04MS43OGMyLjExLDAsNC44MiwwLjI2LDguMTYsMQoJCWMtMTMuNDktNS44NC0yNy45OS0xMC4wNC00MS44LTEwLjA0Yy04NC43OSwwLTEwMS4zNiw1NS4zMy0xMDIuNDksNTkuMjVjLTIuNTEsMTAuMTQtMy44NCwyMC43LTMuODQsMzEuNTYKCQlDMTUyLDM5NC45OSwyMTQuNzYsNDU2LDI5MS45LDQ1NnoiLz4KCTxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik02MjEuNTIsNDA5LjQ1Yy00My40MS0xLjA3LTg4LjUzLTM1LjMtOTcuNzQtNDMuODFjLTIzLjc4LTIxLjk5LTc4LjY2LTgxLjUzLTgyLjk3LTg2LjIKCQlDNDAwLjU4LDIzNC40LDM0Ni4wNywxODQsMjkxLjksMTg0aC0wLjA3aC0wLjA3Yy02NS44NSwwLjMzLTEyMS4xOSw0NC45Mi0xMzUuOTEsMTA0LjQ0YzEuMTMtMy45MiwyMi43Ni02MC4zLDEwMi40Mi01OC4zNAoJCWM0My40MSwxLjA3LDg4Ljc1LDM1Ljc2LDk3Ljk1LDQ0LjI3YzIzLjc4LDIxLjk5LDc4LjY4LDgxLjU0LDgyLjk3LDg2LjIxQzQ3OS40Miw0MDUuNjEsNTMzLjkzLDQ1Niw1ODguMSw0NTZoMC4wN2gwLjA3CgkJYzY1Ljg1LTAuMzMsMTIxLjE5LTQ0LjkyLDEzNS45MS0xMDQuNDRDNzIzLjAzLDM1NS40OCw3MDEuMTgsNDExLjQxLDYyMS41Miw0MDkuNDV6Ii8+CjwvZz4KPC9zdmc+Cg==",adapter:E1}],Fu=class{constructor(e={},r){qe(this,"state","idle");qe(this,"transactionLlist",{});qe(this,"stepsList",[]);qe(this,"completed",[]);qe(this,"activeStep","");qe(this,"failedSteps",[]);qe(this,"transactionResults",{});qe(this,"trxArray",[]);qe(this,"_info",!1);qe(this,"_adapterObj",!1);qe(this,"_prepareTrxArry",function(){var e=this;e.trxArray=[];var r=[];Object.values(this.transactionLlist).forEach(i=>{r.push(i),i.updateNextStep&&(e.trxArray.push(r),r=[])}),r.length>0&&e.trxArray.push(r);var n=0;return e.trxArray.forEach((i,s)=>{i.forEach((c,a)=>{e.trxArray[s][a].stepIndex=n,e.trxArray[s][a].state="idle",e.trxArray[s][a].onSuccessMain=async(h,l)=>{const p=l.stepIndex,w=c.onSuccess,_=c.onFail;if(h.err||h.Err||h.ERR)return e.failedSteps.push(e.stepsList[p]),e.transactionResults[e.stepsList[p]]=h,e.state="error",l.state="error",_&&await _(h),!1;e.completed.push(e.stepsList[p]),e.activeStep=e.stepsList[p+1],e.transactionResults[e.stepsList[p]]=h,l.state="done",l.updateNextStep&&e.trxArray[s+1]&&await l.updateNextStep(h,e.trxArray[s+1][0]),w&&await w(h)},e.trxArray[s][a].onFailMain=async(h,l)=>{const p=c.onFail,w=l.stepIndex;return console.error(`error in  ${e.stepsList[w]} `,e.trxArray[s][a]),console.error(h),e.failedSteps.push(e.stepsList[w]),e.activeStep=e.stepsList[w],e.state="error",l.state="error",p&&await p(h),!1},n++})}),e.trxArray});if(!r||!r.provider)return!1;if(Object.entries(e).forEach(([n,i])=>{typeof i=="object"&&(this.transactionLlist[n]=i)}),Object.keys(this.transactionLlist).length>0)this.stepsList=Object.keys(this.transactionLlist),this._adapterObj=r;else return!1}async retryExecute(){if(this.state!="error")return!1;this.trxArray=this.trxArray.map(r=>r.filter(n=>n.state!=="done")),this.state="running",this._info="",this.failedSteps=[];var e=await this._processBatch();return e}async execute(){return this.state=="running"||!this._adapterObj||Object.keys(this.transactionLlist).length==0?!1:this.state=="done"?this.transactionResults:(this.state="running",this.failedSteps=[],this.trxArray=this._prepareTrxArry(),await this._processBatch())}async _processBatch(){if(!this.trxArray.length)return!1;var e=this;if(e.activeStep=e.completed.length>0?e.stepsList[e.completed.length]:e.stepsList[0],["bitfinity"].includes(this._adapterObj.walletActive)){for(const i of e.trxArray){if(e.state=="error"||e.state=="done")break;if(i.length)var r=await this._adapterObj.provider.batchTransactions(i)}return e.failedSteps.length==0?(e.state="done",e.transactionResults):(e.state="error",!1)}else if(["plug","stoic","dfinity","astrox","metamask","nfid"].includes(this._adapterObj.walletActive))try{for(const i of e.trxArray){if(e.state=="error"||e.state=="done")break;if(i.length)for(const s of i){if(e.state=="error"||e.state=="done")break;var n=await e._adapterObj.getCanisterActor(s.canisterId,s.idl,!1,!0),r=!1;s.methodName?s.args?r=await n[s.methodName](...s.args):r=await n[s.methodName]():await s.onFailMain(r),r?await s.onSuccessMain(r,s):await s.onFailMain(r,s)}}return e.failedSteps.length==0?(e.state="done",e.transactionResults):(e.state="error",!1)}catch(i){return e.state="error",console.error(i),e._info=i,!1}else return console.log("trx method not defined..."),e.state="error",!1}},xn="http://localhost:4943",S1=10**8,Sr="ryjl3-tyaaa-aaaaa-aaaba-cai",T0="nnsWallet",Ns=class{constructor(e={whitelist:[Sr],host:xn}){qe(this,"accountId",!1);qe(this,"principalId",!1);qe(this,"walletActive","");qe(this,"provider",!1);qe(this,"balance",0);qe(this,"canisterActors",{});qe(this,"anoncanisterActors",[]);qe(this,"connectedWalletInfo",{});qe(this,"wallets",T1);qe(this,"_connectObject",{whitelist:[Sr],host:xn});localStorage.getItem(T0),e=this._cleanUpConnObj(e)}_cleanUpConnObj(e){return e.whitelist.push(Sr),e.whitelist=Array.from(new Set([...e.whitelist])),this._connectObject=e,e}async connect(e,r={whitelist:[],host:xn}){if(r=this._cleanUpConnObj(r),!e)return!1;try{var n=this.wallets.find(c=>c.id==e);if(!n)return!1;if(n.adapter.readyState=="Installed"||n.adapter.readyState=="Loadable"){var i=await n.adapter.connectWallet(r);if(!i)return!1;this.principalId=i.principalId,this.accountId=i.accountId,this.walletActive=e,this.provider=n.adapter,this.connectedWalletInfo={id:n.id,icon:n.icon,name:n.name},i.stoicAccounts&&localStorage.setItem("stoicAccounts",i.stoicAccounts.length||0),localStorage.setItem(T0,this.walletActive);var s=new CustomEvent("nnsWalletConnected");window.dispatchEvent(s,e),this.getWalletBalance()}else n.adapter.readyState=="NotDetected"&&window.open(n.adapter.url,"_blank");return this.principalId}catch{return!1}}async disconnect(){return this.provider.disConnectWallet(),localStorage.removeItem(T0),this.provider=!1,this.address=!1,this.wallet="",!0}async isLoaded(){return new Promise((e,r)=>{var n=setInterval(()=>{this.provider&&(clearInterval(n),e(!0))},500)})}async getWalletBalance(e="number"){if(!this.accountId)return 0;var r=await this.getCanisterActor(Sr,Ih,!0);const n=await r.icrc1_balance_of({owner:Ee.from(this.principalId),subaccount:[]});return e=="number"?this.balance=parseFloat(n)/S1:this.balance=n,this.balance}async requestICPTransfer(e){return new Promise(async(r,n)=>{var i=()=>{},s=await this.getCanisterActor(Sr,i);const c=await s.send_dfx(e).catch(a=>{n(a)});c&&r(c),n(!1)})}async getCanisterActor(e,r,n=!1,i=!1,s=!1){if(s)return this.getSignedActor(e,r);let c=!1;if(n)if(i){const a=new Vt({AnonymousIdentity:kr,host:this._connectObject.host});c=await cr.createActor(r,{agent:a,canisterId:e}),this.anoncanisterActors[e]=c}else if(this.anoncanisterActors[e])c=this.anoncanisterActors[e];else{const a=new Vt({AnonymousIdentity:kr,host:this._connectObject.host});c=await cr.createActor(r,{agent:a,canisterId:e}),this.anoncanisterActors[e]=c}else i?(c=await this.provider.createActor({canisterId:e,interfaceFactory:r}),this.canisterActors[e]=c):this.canisterActors[e]?c=this.canisterActors[e]:(c=await this.provider.createActor({canisterId:e,interfaceFactory:r}),this.canisterActors[e]=c);return c}async getSignedActor(e,r){if(!this.provider)throw new Error("Wallet not connected");try{const i=await(await Pc.create()).getIdentity(),s=new Vt({identity:i,host:this._connectObject.host});return this._connectObject.host.includes("localhost")&&await s.fetchRootKey(),await cr.createActor(r,{agent:s,canisterId:e})}catch(n){throw console.error(`Error creating signed actor for canister ${e}:`,n),n}}async autoConnect(e={whitelist:[Sr],host:xn}){e=this._cleanUpConnObj(e);var r=localStorage.getItem(T0),n=this.wallets.find(s=>s.id==r);if(!n)return!1;await window.onload();var i=await this.connect(r,e);return i}},N1=Fu,R1=Ts,O1=new Ns({whitelist:[Sr],host:xn});window&&(window.pnp=Ns,window.pnp.BatchTransact=Fu,window.pnp.nns={AnonymousIdentity:kr,Principal:Ee}),Ze.BatchTransact=N1,Ze.PnP=Ns,Ze.PnPAdapter=O1,Ze.principalIdFromHex=R1,Object.defineProperty(Ze,Symbol.toStringTag,{value:"Module"})});
